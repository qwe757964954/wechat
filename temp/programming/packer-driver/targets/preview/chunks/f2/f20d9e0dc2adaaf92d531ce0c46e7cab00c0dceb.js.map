{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/hall/scripts/selectGameLevelPrefabCtr.ts"],"names":["Label","Node","Prefab","Quat","ScrollView","Sprite","SpriteAtlas","SpriteFrame","Vec3","_decorator","instantiate","tween","GCache","AppEvent","AppSound","GConstants","GameRes","UIID","Utils","DelegateComponent","resLoader","EventManager","BaseComponent","ccclass","property","menu","selectGameLevelPrefabCtr","tooltip","type","curRoleID","curRoleSex","curRoomConf","curRoomType","roomAnteLevel","roomTab","GameTab","bukechi","kechi","roomTabID","_currowGameID","_currowLeaveRoomID","_currowLeaveData","onInitModuleEvent","addModelListener","USER_UPDATE_INFO","updateRoleShow","onLoad","getComp","initData","initView","loadGameRes","start","comp","node","getComponent","param","getParams","dispatch","NET_REQ_GAME_LEVEL_ROOM_TAB","getPreLoaderRes","Prefab_HallTopUI","bundle","path","res","addChild","setInitAni","updateRoom","selectLanternTab","updateSelectData","event","console","log","data","userSex","User","getUserSex","isNotNull","spineRoleNode","removeAllChildren","resConf","GoodsData","getRoleAnimConfigById","aniName","standby","parentNode","trackIndex","isLoop","SYS_ANI_PLAY","updateRoleName","bgQianAni","spineQianNode","Spine_Xc_Bg","bgAni","spineHouNode","btnAni","Spine_Xc_Btn","hudieAni","Spine_Xc_Hudie","toPos","name","sprite","roleName","spriteFrame","sizeMode","roomListNode","num","i","itemNode","roomNode","nodeTips","active","kechiLight","bukechiLight","showLevlelList","currowLeaveTabID","isNull","SelectGame","getGameLevelTabInfo","levelData","getGameLevelRoomSortList","table_isEmpty","currentMaxIndex","hightLightGameLevel","length","value","createCommonItem","play","itemData","isHightLight","layout_item","img_bg","getChildByName","icon","setSpriteFrame","bottomScore","goinScore","string","String","base_chip","lowScore","string_moneyToShortNumber","min_money","hightScore","max_money","string_formatByLua","img_circle","by","rotation","call","selectAni","selectAtlas","spriteFrames","levelname","currentMin","getUserMoneyByID","v","lowLimit","different","string_isHttp","self","loadRemote","ext","err","imageAsset","isValid","image_ImageAssetToSpriteFrame","spineNode","chooseAni","Spine_Xc_Choice","chooseLightAni","onClickLevelRoom","SYS_PLAY_EFFECT","CommClick","target","child","children","checkIntoRoom","onReturnClick","destroy","onRoleClick","onClickKeChi","onClickBuKeChi","onClickQuickStart","checkQuickGame","onClickBtnRule","VIEW_UI_OPEN","PictureTabDialog","onDestroy"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Label, Node, Prefab, Quat, ScrollView, Sprite, SpriteAtlas, SpriteFrame, Vec3, _decorator, instantiate, tween } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { AppSound } from '../../../config/AppSound';\nimport { GConstants } from '../../../config/GameConstant';\nimport { GameRes } from '../../../config/GameRes';\nimport { UIID } from '../../../config/UIConfig';\nimport { inf_SpineAniCreate } from '../../../framework/InterfaceDefines';\nimport { Utils } from '../../../framework/Utils';\nimport { DelegateComponent } from '../../../framework/layer/DelegateComponent';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = selectGameLevelPrefabCtr\n * URL = db://assets/package/hall/scripts/selectGameLevelPrefabCtr.ts\n * Time = Wed Sep 07 2022 17:11:23 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('selectGameLevelPrefabCtr')\n//方便编辑器识别的菜单项目\n@menu('prefab/hall/selectGameLevelPrefabCtr')\nexport class selectGameLevelPrefabCtr extends BaseComponent {\n\n\t//后背景动画根节点\n\t@property({ tooltip: \"后背景动画根节点\", type: Node })\n\tprivate spineQianNode: Node | null = null;\n\t//前背景动画根节点\n\t@property({ tooltip: \"前背景动画根节点\", type: Node })\n\tprivate spineHouNode: Node | null = null;\n\n\t//大厅人物动画根节点\n\t@property({ tooltip: \"大厅人物动画根节点\", type: Node })\n\tprivate spineRoleNode: Node | null = null;\n\n\t//蝴蝶动画根节点\n\t@property({ tooltip: \"蝴蝶动画根节点\", type: Node })\n\tprivate hudieAni: Node | null = null;\n\n\t//按钮动画根节点\n\t@property({ tooltip: \"按钮动画根节点\", type: Node })\n\tprivate btnAni: Node | null = null;\n\n\t//选中动画根节点\n\t@property({ tooltip: \"选中动画根节点\", type: Node })\n\tprivate choiceAni: Node | null = null;\n\n\t//选场房间节点\n\t@property({ tooltip: \"选场房间节点\", type: Node })\n\tprivate roomNode: Node | null = null;\n\n\t//选场房间列表节点\n\t@property({ tooltip: \"选场房间列表节点\", type: Node })\n\tprivate roomListNode: Node | null = null;\n\n\t//选场房间列表滚动视图组件\n\t@property({ tooltip: \"选场房间列表滚动视图组件\", type: ScrollView })\n\tprivate roomListView: ScrollView | null = null;\n\n\t//角色名称节点\n\t@property({ tooltip: \"头像根节点\", type: Node })\n\tprivate roleName: Node | null = null;\n\n\t//可吃场灯笼按钮节点\n\t@property({ tooltip: \"可吃场灯笼按钮节点\", type: Node })\n\tprivate kechiLight: Node | null = null;\n\n\t//不可吃场灯笼按钮节点\n\t@property({ tooltip: \"不可吃场灯笼按钮节点\", type: Node })\n\tprivate bukechiLight: Node | null = null;\n\n\t//tip节点\n\t@property({ tooltip: \"tip节点\", type: Node })\n\tprivate nodeTips: Node | null = null;\n\n\t//选场资源图集\n\t@property({ tooltip: \"选场资源图集\", type: SpriteAtlas })\n\tprivate selectAtlas: SpriteAtlas | null = null;\n\n\t//当前出战角色ID\n\tcurRoleID: string = null;\n\n\t//当前角色性别\n\tcurRoleSex = null;\n\t\n\t//当前场次配置缓存\n\tcurRoomConf = null;\n\t//当前房间类型\n\tcurRoomType: string = null;\n\t\n\n\n\t/** 场次等级  */\n\troomAnteLevel = {\n\t\t\"初级场\": 1,    //\"初级\",     \n\t\t\"中级场\": 2,   // \"中级\",     \n\t\t\"高级场\": 3      // \"高级\",\n\t}\n\n\troomTab = [\n        GConstants.GameTab.bukechi,\n\t\tGConstants.GameTab.kechi,\n\t]\n\troomTabID = {\n        [GConstants.GameTab.bukechi] : 0,\n\t\t[GConstants.GameTab.kechi] : 1,\n\t}\n\n\t//当前游戏ID\n\t_currowGameID = null\n\t// //当前选中玩法(tabid 当前写死)\n\t// _currowLeaveTabID = null;\n\t//当前选中房间\n\t_currowLeaveRoomID = null;\n\t//当前房间列表信息\n\t_currowLeaveData = null;\n\n\t/**初始化添加事件绑定 */\n\tprotected onInitModuleEvent(): void {\n\t\t// /**角色数据更新 */\n\t\t// this.addModelListener(AppEvent.USER_UPDATE_ROLE_INFO, this.updateRoleShow);\n\t\t// /**选场数据有更新 */\n\t\t// this.addModelListener(AppEvent.HALL_UPDATE_SELECT_GAME, this.updateSelectData);\n\t\t/**玩家数据更新 */\n\t\tthis.addModelListener(AppEvent.USER_UPDATE_INFO, this.updateRoleShow);\n\t}\n\n\tonLoad() {\n\t\tthis.getComp()\n\t\tthis.initData();\n\t\tthis.initView();\n\t\tthis.loadGameRes();\n\t};\n\n\t/**加载游戏资源 */\n\tloadGameRes() {\n\t\t// mark\n\t\t// resLoader.loadDir(\"game\", \"spineAni\", (error, data: any) => {\n\t\t// \tif (error) {\n\t\t// \t\tconsole.log(error);\n\t\t// \t\treturn;\n\t\t// \t}\n\t\t// });\n\t}\n\n\tstart() {\n\n\t};\n\n\tgetComp() {\n\t\tlet comp = this.node.getComponent(DelegateComponent)\n\t\tif (comp) {\n\t\t\tlet param = comp.getParams()\n\t\t\tif (param) {\n\t\t\t\tthis._currowGameID = param[\"game_id\"]\n\t\t\t\tthis.curRoomType = this.roomTab[param[\"tab_id\"]]\n\t\t\t}\n\t\t}\n\t}\n\n\tinitData() {\n\t\t// //请求拉取底注场场次数据\n\t\t// EventManager.dispatch(AppEvent.NET_CMD_REQ_ROOM_CATALOGLIST, GConstants.GameRoomType.ROOM_TYPE_ANTE);\n\t\t// if (!GCache || !GCache.SelectGame) {\n\t\t// \treturn\n\t\t// }\n\t\t// let roomID = GCache.SelectGame.getRoomId(this.curRoomType);\n\t\t// let gameType = GCache.SelectGame.getCurRoomInfo();\n\t\t// let intoRoomData = GCache.SelectGame.getIntoRoomData();\n\t\t// // console.log(\"获取进入游戏房间的数据\", this.curRoomType, roomeID);\n\t\t// // console.log(\"获取当前选择的游戏玩法类型\", gameType);\n\t\t// // console.log(\"roomID======>>>>>>\", intoRoomData);\n\n\t\t// let curRoomConf = GCache.SelectGame.getRoomId(this.curRoomType);\n\t\tif (this._currowGameID != null) {\n\t\t\t//请求游戏房间信息\n\t\t\tEventManager.dispatch(AppEvent.NET_REQ_GAME_LEVEL_ROOM_TAB, this._currowGameID)\n\t\t\t//请求游戏场次人数\n\t\t\t// EventManager.dispatch(AppEvent.NET_REQ_GAME_LEVEL_PERSON_COUNT, this._currowGameID)\n\n\t\t}\n\t}\n\n\t//初始化界面\n\tinitView() {\n\t\tthis.getPreLoaderRes(GameRes.Prefab_HallTopUI.bundle, GameRes.Prefab_HallTopUI.path, Prefab, (res) => {\n\t\t\tthis.node.addChild(res);\n\t\t})\n\t\tthis.setInitAni()\n\t\tthis.updateRoom();\n\t\tthis.selectLanternTab()\n\t\tthis.updateRoleShow();\n\t}\n\n\t/**选场数据有更新 */\n\tupdateSelectData(event, param) {\n\t\tconsole.log(\"选场数据有更新\")\n\t}\n\n\t/**更新玩家展示角色*/\n\tupdateRoleShow(event = null, data?) {\n\t\t// mark 临时配置，上角色版本再处理\n\t\tlet userSex = GCache.User.getUserSex();\n\n\t\tif (Utils.isNotNull(this.curRoleSex) && this.curRoleSex == userSex) {\n\t\t\treturn;\n\t\t}\n\t\tthis.curRoleSex == userSex\n\n\t\tthis.spineRoleNode.removeAllChildren();\n\t\tlet param = {\n\t\t\tresConf: GCache.GoodsData.getRoleAnimConfigById(this.curRoleID).path,\n\t\t\taniName: GCache.GoodsData.getRoleAnimConfigById(this.curRoleID).standby[0],\n\t\t\tparentNode: this.spineRoleNode,\n\t\t\ttrackIndex: null,\n\t\t\tisLoop: true,\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, param)\n\t\tthis.updateRoleName();\n\t}\n\n\tsetInitAni() {\n\t\tlet bgQianAni: inf_SpineAniCreate = {\n\t\t\tparentNode: this.spineQianNode,\n\t\t\tresConf: GameRes.Spine_Xc_Bg,\n\t\t\taniName: \"qian\",\n\t\t\ttrackIndex: 0,\n\t\t\tisLoop: true,\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, bgQianAni);\n\n\t\tlet bgAni: inf_SpineAniCreate = {\n\t\t\tparentNode: this.spineHouNode,\n\t\t\tresConf: GameRes.Spine_Xc_Bg,\n\t\t\taniName: \"hou\",\n\t\t\ttrackIndex: 0,\n\t\t\tisLoop: true,\n\t\t}\n\n\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, bgAni);\n\n\t\tlet btnAni: inf_SpineAniCreate = {\n\t\t\tparentNode: this.btnAni,\n\t\t\tresConf: GameRes.Spine_Xc_Btn,\n\t\t\taniName: \"btn\",\n\t\t\ttrackIndex: 0,\n\t\t\tisLoop: true,\n\t\t}\n\n\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, btnAni);\n\n\t\tlet hudieAni: inf_SpineAniCreate = {\n\t\t\tparentNode: this.hudieAni,\n\t\t\tresConf: GameRes.Spine_Xc_Hudie,\n\t\t\taniName: \"hudie_r\",//\"hudie_l\", \"hudie_r\"\n\t\t\ttrackIndex: 0,\n\t\t\tisLoop: true,\n\t\t\ttoPos: new Vec3(233, 239, 0)\n\t\t}\n\n\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, hudieAni);\n\n\t}\n\n\t/**刷新角色名称 */\n\tupdateRoleName() {\n\t\tlet res = GCache.GoodsData.getRoleAnimConfigById(this.curRoleID).name\n\t\tthis.getPreLoaderRes(res.bundle, res.path, SpriteFrame, (sprite) => {\n\t\t\tthis.roleName.getComponent(Sprite).spriteFrame = sprite;\n\t\t\tthis.roleName.getComponent(Sprite).sizeMode = 2;\n\t\t})\n\t}\n\n\t//刷新房间显示\n\tupdateRoom() {\n\t\tthis.roomListNode.removeAllChildren();\n\t\tlet num: number = 3;\n\t\t// if (num > 3) {\n\t\t// \tthis.roomListView.enabled = true\n\t\t// } else {\n\t\t// \tthis.roomListView.enabled = false\n\t\t// }\n\t\tfor (let i = 0; i < num; i++) {\n\t\t\tlet itemNode = instantiate(this.roomNode);\n\t\t\tthis.roomListNode.addChild(itemNode);\n\t\t}\n\t}\n\n\t/**玩法标签 */\n\tselectLanternTab() {\n\t\tthis.roomListNode.removeAllChildren();\n\t\tthis.nodeTips.active = false;\n\t\tif (this.curRoomType == GConstants.GameTab.kechi) {\n\t\t\t//可吃玩法\n\t\t\tthis.kechiLight.active = true;\n\t\t\tthis.bukechiLight.active = false;\n\t\t\tthis.showLevlelList();\n\t\t} else if (this.curRoomType == GConstants.GameTab.bukechi) {\n\t\t\t//不可吃玩法\n\t\t\tthis.kechiLight.active = false;\n\t\t\tthis.bukechiLight.active = true;\n\t\t\tthis.showLevlelList();\n\t\t}\n\t}\n\n\tshowLevlelList() {\n\t\tlet currowLeaveTabID = this.roomTabID[this.curRoomType];\n\t\tif (Utils.isNull(currowLeaveTabID)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._currowLeaveData = GCache.SelectGame.getGameLevelTabInfo(this._currowGameID, currowLeaveTabID)\n\t\tlet levelData = GCache.SelectGame.getGameLevelRoomSortList(this._currowGameID, currowLeaveTabID)\n\t\tif (Utils.table_isEmpty(levelData)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(\"显示不洗牌场次列表\", levelData)\n\t\tlet currentMaxIndex = this.hightLightGameLevel(levelData)\n\t\tconsole.log(\"显示不洗牌场次高亮\", currentMaxIndex)\n\t\tfor (let i = 0; i < levelData.length; i++) {\n\t\t\tlet value = levelData[i];\n\t\t\tif (i == currentMaxIndex) {\n\t\t\t\tthis.createCommonItem(this.curRoomType, value, true);\n\t\t\t} else {\n\t\t\t\tthis.createCommonItem(this.curRoomType, value);\n\t\t\t}\n\t\t}\n\t}\n\n\t\n\t/** 通用:创建房间条目 */\n\tcreateCommonItem(play, itemData, isHightLight = false) {\n\t\t// room:ante:level 该场次的等级，初级，中级，高级，精英，大师\n\t\tlet layout_item = instantiate(this.roomNode);\n\t\tlet img_bg = layout_item.getChildByName(\"img_item\");\n\t\tlet icon = layout_item.getChildByName(\"img_icon\");\n\t\tthis.setSpriteFrame(img_bg, itemData.icon);\n\t\tlet bottomScore = layout_item.getChildByName(\"label_score\");\n\t\tlet goinScore = layout_item.getChildByName(\"label_into\");\n\t\tbottomScore.getComponent(Label).string = String(itemData.base_chip || 0);\n\t\tlet lowScore = Utils.string_moneyToShortNumber(itemData.min_money || 0)\n\t\tlet hightScore = Utils.string_moneyToShortNumber(itemData.max_money || 0)\n\t\t// //小于等于0代表无上限\n\t\tif (itemData.max_money <= 0) {\n\t\t\tgoinScore.getComponent(Label).string = Utils.string_formatByLua(\"准入%s以上\", lowScore)\n\t\t}\n\t\telse {\n\t\t\tgoinScore.getComponent(Label).string = Utils.string_formatByLua(\"准入%s-%s\", lowScore, hightScore)\n\t\t}\n\n\t\tif (isHightLight) {\n\t\t\tlet img_circle = layout_item.getChildByName(\"img_circle\");\n\t\t\ttween(img_circle)\n\t\t\t\t.by(30, { rotation: new Quat(0, 0, 0, 0) })\n\t\t\t\t.call(() => {\n\t\t\t\t})\n\t\t\t\t.start()\n\t\t\tthis.selectAni(layout_item);\n\t\t}\n\n\t\ticon.getComponent(Sprite).spriteFrame = this.selectAtlas.spriteFrames[`selectField/icon_${this.roomAnteLevel[itemData.levelname]}`]\n\t\tlayout_item[\"data\"] = itemData;\n\t\tlayout_item.active = true;\n\t\tthis.roomListNode.addChild(layout_item);\n\t}\n\n\thightLightGameLevel(data) {\n\t\tlet currentMaxIndex = 0;\n\t\tlet currentMin = GCache.User.getUserMoneyByID(0)\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tlet v = data[i];\n\t\t\tlet lowLimit =  v.min_money || 0;\n\t\t\tlet different = GCache.User.getUserMoneyByID(0) - lowLimit;\n\t\t\tif (different >= 0 && different <= currentMin) {\n\t\t\t\tcurrentMaxIndex = i;\n\t\t\t\tcurrentMin = different;\n\t\t\t}\n\t\t}\n\t\treturn currentMaxIndex;\n\t}\n\n\t/**设置远端图片 */\n\tsetSpriteFrame(node, path) {\n\t\tif (!path) {\n\t\t\treturn\n\t\t}\n\t\tif (Utils.string_isHttp(path)) {\n\t\t\tlet self = this;\n\t\t\tresLoader.loadRemote(path, { ext: '.jpg' }, (err, imageAsset) => {\n\t\t\t\tif (!imageAsset) { //资源可能还在加载中\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (!self.node || self.node.isValid == false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n\t\t\t\tif (spriteFrame) {\n\t\t\t\t\tnode.getComponent(Sprite).spriteFrame = spriteFrame;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tselectAni(node) {\n\t\tnode.getChildByName(\"img_select\").active = true;\n\t\tlet spineNode = node.getChildByName(\"spineNode\")\n\t\tif (spineNode) {\n\t\t\tlet chooseAni: inf_SpineAniCreate = {\n\t\t\t\tparentNode: spineNode,\n\t\t\t\tresConf: GameRes.Spine_Xc_Choice,\n\t\t\t\taniName: \"XC_xuanzhong_light\",\n\t\t\t\ttrackIndex: 0,\n\t\t\t\tisLoop: true,\n\t\t\t\ttoPos: null,\n\t\t\t}\n\t\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, chooseAni);\n\n\t\t\tlet chooseLightAni: inf_SpineAniCreate = {\n\t\t\t\tparentNode: spineNode,\n\t\t\t\tresConf: GameRes.Spine_Xc_Choice,\n\t\t\t\taniName: \"XC_xuanzhong_light2\",\n\t\t\t\ttrackIndex: 0,\n\t\t\t\tisLoop: true,\n\t\t\t\ttoPos: null,\n\t\t\t}\n\t\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, chooseLightAni);\n\t\t}\n\t}\n\n\t//点击房间\n\tonClickLevelRoom(event: EventTouch) {\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\t// EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.selectGame_6 });\n\n\t\tlet node = event.target;\n\t\tfor (let child of this.roomListNode.children) {\n\t\t\tchild.getChildByName(\"img_select\").active = false;\n\t\t\tchild.getChildByName(\"spineNode\").removeAllChildren();\n\t\t}\n\t\tthis.selectAni(node);\n\n\t\tlet itemData = node[\"data\"];\n\n\t\tGCache.SelectGame.checkIntoRoom(this._currowGameID, itemData);\n\t}\n\n\t//点击返回大厅按钮\n\tonReturnClick(event: EventTouch) {\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\t// EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.selectGame_1 });\n\t\t// GCache.SelectGame.saveChooseData(null);\n\t\tthis.node.destroy();\n\t}\n\n\t//点击角色按钮\n\tonRoleClick(event: EventTouch) {\n\t\t// EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\t// EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.RoleScenePrefab, {}, {});\n\t}\n\n\t//点击切换可吃按钮\n\tonClickKeChi(event: EventTouch) {\n\t\tconsole.log(\"onClickKeChi\", this.curRoomType)\n\t\tif (this.curRoomType == GConstants.GameTab.kechi) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\t//EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.selectGame_7 });\n\t\tthis.curRoomType = GConstants.GameTab.kechi;\n\t\tthis.selectLanternTab()\n\t}\n\n\t//点击切换不可吃按钮\n\tonClickBuKeChi(event: EventTouch) {\n\t\tconsole.log(\"onClickKeChi\", this.curRoomType)\n\t\tif (this.curRoomType == GConstants.GameTab.bukechi) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\t//EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.selectGame_7 });\n\t\tthis.curRoomType = GConstants.GameTab.bukechi;\n\t\tthis.selectLanternTab()\n\t}\n\n\n\t//快速开始\n\tonClickQuickStart(event: EventTouch) {\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\n\t\tlet currowLeaveTabID = this.roomTabID[this.curRoomType];\n\t\tif (Utils.isNull(currowLeaveTabID)) {\n\t\t\treturn;\n\t\t}\n\t\tGCache.SelectGame.checkQuickGame(this._currowGameID, currowLeaveTabID);\n\t}\n\t/** 点击了规则按钮 */\n\tonClickBtnRule(event: EventTouch) {\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\tEventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.PictureTabDialog, \"玩法规则\", null, null, true)\n\t}\n\n\t//销毁\n\tonDestroy() {\n\t\t// //通知:请求推荐弹窗\n\t\t// EventManager.dispatch(AppEvent.RECOMMEND_POP_GET, GConstants.PopupPos.POS_BACK_HALL)\n\t};\n\n}\n\n"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/hall/scripts/shopGoodsPrefabCtr.ts"],"names":["Label","Layout","Node","Sprite","SpriteFrame","_decorator","GConstants","Utils","resLoader","BaseComponent","ccclass","property","menu","shopGoodsPrefabCtr","tooltip","type","_goodsData","isGoodsSelect","_isOnLoad","_callbackFunc","goodsData","data","updateView","isSelect","updateSelelctState","clickCallback","func","onLoad","start","initView","console","log","table_isEmpty","node_ClickMask","active","labelName","string","nullToDefault","name","node_ItemBg","setSpriteFrameByRemote","node_ItemIcon","icon","isHadBuy","limit_buy_way","node_NumBg","maxNum","limit_buy_num","hadNum","bought_num","label_NumBg","number_valueOf","specialDesc","node_showJiaZeng","label_showJiaZeng","node","string_isHttp","eventIcon","sprite_Corner","currency","PayType","RMB","node_Exchange","label_RmbPrice","node_ExchangeIcon","price","SILVER","TICKET","SHARE","label_ExchangePrice","getComponent","spriteFrame","spriFrame_share","VIDEO","spriFrame_video","updateLayout","node_Select","onClickFunc","event","path","self","loadRemote","ext","err","imageAsset","isValid","image_ImageAssetToSpriteFrame","onDestroy"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Label, Layout, Node, Sprite, SpriteFrame, _decorator } from 'cc';\nimport { GConstants } from '../../../config/GameConstant';\nimport { Utils } from '../../../framework/Utils';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = shopGoodsPrefabCtr\n * URL = db://assets/package/hall/scripts/shopGoodsPrefabCtr.ts\n * Time = Mon Oct 31 2022 12:19:06 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('shopGoodsPrefabCtr')\n@menu('prefab/hall/shopGoodsPrefabCtr')\nexport class shopGoodsPrefabCtr extends BaseComponent {\n    //商品名称\n    @property({ tooltip: \"商品名称\", type: Label })\n    private labelName: Label | null = null;\n\n    //商品兑换价格根节点\n    @property({ tooltip: \"商品兑换价格根节点\", type: Node })\n    private node_Exchange: Node | null = null;\n\n    //商品兑换图标\n    @property({ tooltip: \"商品兑换图标\", type: Node })\n    private node_ExchangeIcon: Node | null = null;\n    //商品兑换价格\n    @property({ tooltip: \"商品兑换价格\", type: Label })\n    private label_ExchangePrice: Label | null = null;\n\n\n    //商品人民币/免费价格\n    @property({ tooltip: \"商品人民币/免费价格\", type: Label })\n    private label_RmbPrice: Label | null = null;\n\n\n    //商品数量背景显示\n    @property({ tooltip: \"商品数量背景显示\", type: Node })\n    private node_NumBg: Node | null = null;\n    //商品数量\n    @property({ tooltip: \"商品数量\", type: Label })\n    private label_NumBg: Label | null = null;\n\n    //商品优惠角标显示\n    @property({ tooltip: \"商品优惠角标显示\", type: Sprite })\n    private sprite_Corner: Sprite | null = null;\n\n    //商品图片根节点\n    @property({ tooltip: \"商品图片根节点\", type: Node })\n    private node_ItemBg: Node | null = null;\n    //商品图片节点\n    @property({ tooltip: \"商品图片\", type: Node })\n    private node_ItemIcon: Node | null = null;\n\n    //商品已拥有显示\n    @property({ tooltip: \"商品已拥有显示\", type: Node })\n    private node_HadBuy: Node | null = null;\n\n    //商品选中节点\n    @property({ tooltip: \"商品选中节点\", type: Node })\n    private node_Select: Node | null = null;\n    //加赠文字展示节点\n    @property({ tooltip: \"加赠文字展示节点\", type: Node })\n    private node_showJiaZeng: Node | null = null;\n    //加赠文字展示\n    @property({ tooltip: \"加赠文字展示\", type: Label })\n    private label_showJiaZeng: Label | null = null;\n    //分享Icon图片\n    @property({ tooltip: \"分享Icon图片\", type: SpriteFrame })\n    private spriFrame_share: SpriteFrame | null = null;\n\n    //看视频Icon图片\n    @property({ tooltip: \"看视频Icon图片\", type: SpriteFrame })\n    private spriFrame_video: SpriteFrame | null = null;\n\n    //角标-首充加赠\n    @property({ tooltip: \"角标-首充加赠\", type: SpriteFrame })\n    private spriFrame_FirstPay: SpriteFrame | null = null;\n\n    //商品点击层节点\n    @property({ tooltip: \"商品点击层节点\", type: Node })\n    private node_ClickMask: Node | null = null;\n\n\n    //商品数据缓存\n    _goodsData = null;\n    /** 商品是否可显示选中框 */\n    isGoodsSelect: boolean = false;\n    /** 是否已加载 */\n    _isOnLoad = false;\n\n    /** 回调函数 */\n    _callbackFunc = null;\n    // corner: \"\"\n    // desc: \"\"\n    // gifts: []\n    // goodsID:  38\n    // hadBuy: false\n    // icon: \"http://xxddz-static.17c.cn/images/libao-1636528611.png\"\n    // isPag:  true\n    // item_url: \"\"\n    // limitNum: {maxNum: 1, hadNum: 0, timeUnit: 2}\n    // limitTime:  {}\n    // name:  \"超级钻石礼包\"\n    // order: 3\n    // ownStatus: 2\n    // pay: [{…}]\n    // res: [{…}, {…}]\n\n    /** 设置物品数据 */\n    set goodsData(data) {\n        this._goodsData = data;\n        if (this._isOnLoad) {\n            this.updateView();\n        }\n    }\n    get goodsData() {\n        return this._goodsData;\n    }\n\n    /** 设置选中状态 */\n    set isSelect(isSelect: boolean) {\n        this.isGoodsSelect = isSelect;\n        if (this._isOnLoad) {\n            this.updateSelelctState();\n        }\n    }\n    /** 设置选中状态 */\n    set clickCallback(func: Function) {\n        this._callbackFunc = func;\n    }\n\n\n    onLoad() {\n\n    };\n\n    start() {\n        this._isOnLoad = true;\n        this.initView();\n    };\n\n    initView() {\n        this.updateView();\n    }\n\n\n    /** 更新界面 */\n    updateView() {\n        console.log(\"更新的商品\", this._goodsData)\n        if (Utils.table_isEmpty(this._goodsData)) {\n            this.node_ClickMask.active = false;\n            return\n        }\n        //商品名称\n        this.labelName.string = Utils.nullToDefault(this._goodsData.name, \"\");\n        //更新商品图片\n        this.node_ItemBg.active = true;\n        this.setSpriteFrameByRemote(this.node_ItemIcon, this._goodsData.icon);\n        //是否已购买\n        let isHadBuy = false;\n        //更新商品数量/是否限购\n        if (!this._goodsData.limit_buy_way || this._goodsData.limit_buy_way == '0') {\n            this.node_NumBg.active = false;\n        } else {\n            this.node_NumBg.active = true;\n            let maxNum = this._goodsData.limit_buy_num || 0;\n            let hadNum = this._goodsData.bought_num || 0;\n            this.label_NumBg.string = `${hadNum}/${maxNum}`;\n            if (Utils.number_valueOf(hadNum, -1) >= Utils.number_valueOf(maxNum, 0)) {\n                //超限购禁止购买\n                isHadBuy = true;\n            }\n        }\n        // 判断是否加赠 \n        if (!!this._goodsData.specialDesc) {\n            this.node_showJiaZeng.active = true;\n            this.label_showJiaZeng.string = this._goodsData.specialDesc\n        } else {\n            this.node_showJiaZeng.active = false\n            this.label_showJiaZeng.node.active = false\n        }\n        //更新角标图片\n        if (Utils.string_isHttp(this._goodsData.eventIcon) == true) {\n            console.log('添加了角标')\n            this.setSpriteFrameByRemote(this.sprite_Corner.node, this._goodsData.eventIcon);\n            this.sprite_Corner.node.active = true;\n        } else {\n            this.sprite_Corner.node.active = false\n        }\n        //商品价格 展示金条兑换 下次再做\n        switch (this._goodsData.currency) {\n            case GConstants.PayType.RMB:// rmb 1 \t//人民币支付\n                this.node_Exchange.active = false;\n                this.label_RmbPrice.node.active = true;\n                this.node_ExchangeIcon.active = false;\n                this.label_RmbPrice.string = `${this._goodsData.price}元`;\n                break;\n            case GConstants.PayType.SILVER:\n                this.node_Exchange.active = false;\n                this.node_ExchangeIcon.active = false;\n                this.label_RmbPrice.node.active = true;\n                this.label_RmbPrice.string = `${this._goodsData.price}银币`;\n                break;\n            case GConstants.PayType.TICKET:\n                this.node_Exchange.active = false;\n                this.node_ExchangeIcon.active = false;\n                this.label_RmbPrice.node.active = true;\n                this.label_RmbPrice.string = `${this._goodsData.price}兑换券`;\n                break;\n            case GConstants.PayType.SHARE:\n                this.node_Exchange.active = true;\n                this.label_RmbPrice.node.active = false;\n                this.label_ExchangePrice.node.active = true;\n                this.label_ExchangePrice.string = `分享`;\n                this.node_ExchangeIcon.active = true;\n                this.node_ExchangeIcon.getComponent(Sprite).spriteFrame = this.spriFrame_share;\n                break;\n            case GConstants.PayType.VIDEO:\n                this.node_Exchange.active = true;\n                this.label_RmbPrice.node.active = false;\n                this.label_ExchangePrice.node.active = true;\n                this.label_ExchangePrice.string = `看视频`;\n                this.node_ExchangeIcon.active = true;\n                this.node_ExchangeIcon.getComponent(Sprite).spriteFrame = this.spriFrame_video;\n                break;\n            default:\n                break;\n        }\n        this.node_Exchange.getComponent(Layout).updateLayout();\n        this.updateSelelctState();\n        this.node_ClickMask.active = true;\n    }\n    /** 更新选中状态 */\n    updateSelelctState() {\n        this.node_Select.active = this.isGoodsSelect;\n    }\n\n    /** 点击函数 */\n    onClickFunc(event: EventTouch) {\n        if (this._callbackFunc) {\n            this._callbackFunc(event);\n        }\n    }\n    /**设置远端图片 */\n    setSpriteFrameByRemote(node, path) {\n        if (!path) {\n            return\n        }\n        if (Utils.string_isHttp(path)) {\n            let self = this;\n            resLoader.loadRemote(path, { ext: '.jpg' }, (err, imageAsset) => {\n                if (!imageAsset) { //资源可能还在加载中\n                    return\n                }\n                if (!self.node || self.node.isValid == false) {\n                    return;\n                }\n                let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n                if (spriteFrame) {\n                    node.getComponent(Sprite).spriteFrame = spriteFrame;\n                }\n            })\n        }\n    }\n\n    //销毁\n    onDestroy() {\n\n    };\n\n}\n\n"]}
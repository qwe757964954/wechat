{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/giftbag/script/bankupGift.ts"],"names":["Button","Node","Sprite","_decorator","GCache","AppEvent","GConstants","GameTxt","resLoader","EventManager","Utils","BaseComponent","Platform","ccclass","property","menu","bankupGift","_bankrupFeedbackData","_currowChooseIndex","_goodsGiftArray","onLoad","item_1","item_2","item_3","updataBankUpData","updateView","start","onInitModuleEvent","addModelListener","NET_RESP_BANKRUPT_GIFT_CONF","respBankUpGiftConf","ACTIVITY_BANKUP_BACK","getOnGetMoneyCallBack","Activity","BankrupData","getNewBankUpGiftConf","console","log","getBankUpFeedbackData","self","giftPack","index","length","checkImg","getChildByName","active","len","itemNode","goodBg","icon","loadRemote","ext","err","imageAsset","node","isValid","spriteFrame","image_ImageAssetToSpriteFrame","getComponent","upGoodsBuyBtn","openPageChoseGood","onClickBuyGoods","event","custom","dispatch","SYS_TOAST_TIP","content","isNotNull","CurrowPaySceneType","UBPaySceneConfig","KRoomBrokenRecharge","gid","payData","ShopInfo","getPriceByGoodsSceneId","GoodsListID","Bankruptcy","checkBuyWay","payID","goodsId","PayType","RMB","OTHER_PAY_WILL","destroy","SHARE","_allowShareMsg","ShareInfo","shareTimeAllowed","ShareSceneConf","shopshare","shareWXFriends","handler","__doCallBackShare","VIDEO","playerAdVideo","__doCallBackWatchADs","data","isWXPlatform","shareSucConditions","shareUseTime","shareFailMsg","NET_REQ_SHARE_AWARD","ReqUrl","shareType","shop","status","goodsID","NET_REQ_ADS_AWARD","onClickGoods","Checkmark","getCurrentTarget","name","currentGood","currentgoods","buyBtn","buyBtnNode","onClickReturn","GAME_GOTO_EXIT","onClickGetMoney","NET_REQ_BANKRUPT","isSuccess","packetInfo","getMoneyBtnNode","interactable","onMaskClick","onDestroy","respData","reqData"],"mappings":"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","sourcesContent":["\nimport { Button, EventTouch, Node, Sprite, _decorator } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { GConstants } from '../../../config/GameConstant';\nimport { GameTxt } from '../../../config/GameTxt';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { Utils } from '../../../framework/Utils';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { Platform } from '../../../platform/Platform';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = bankupGift\n * URL = db://assets/package/hall/scripts/bankupGift.ts\n * Time = Wed Nov 30 2023 11:58:45 GMT+0800 (中国标准时间)\n * Author = \n *\n *\n */\n\n@ccclass('bankupGift')\n//方便编辑器识别的菜单项目\n@menu('bankupGift')\nexport class bankupGift extends BaseComponent {\n    //购买按钮节点\n    @property(Node)\n    buyBtnNode: Node = null!;\n\n    //领取按钮节点\n    @property(Node)\n    getMoneyBtnNode: Node = null!;\n\n    //背景节点\n    @property(Node)\n    BGNode: Node = null!;\n\n    //道具\n    @property(Node)\n    item_1: Node = null!;\n    //道具\n    @property(Node)\n    item_2: Node = null!;\n    //道具\n    @property(Node)\n    item_3: Node = null!;\n\n    //破产数据缓存\n    _bankrupFeedbackData = null;\n\n\n    //当前选中的商品节点\n    _currowChooseIndex = -1;\n\n    //道具节点\n    _goodsGiftArray = [];\n\n    onLoad() {\n        this._goodsGiftArray = [\n            this.item_1,\n            this.item_2,\n            this.item_3\n        ]\n        this.updataBankUpData();\n        this.updateView()\n    };\n\n    start() {\n\n    };\n\n    //初始化模块事件\n    onInitModuleEvent() {\n        //请求破产礼包数据返回\n        this.addModelListener(AppEvent.NET_RESP_BANKRUPT_GIFT_CONF, this.respBankUpGiftConf)\n        //领取补助结果返回\n        this.addModelListener(AppEvent.ACTIVITY_BANKUP_BACK, this.getOnGetMoneyCallBack)\n\n    }\n\n    //更新破产配置\n    updataBankUpData() {\n        if (GCache.Activity && GCache.BankrupData.getNewBankUpGiftConf()) {\n            this._bankrupFeedbackData = GCache.BankrupData.getNewBankUpGiftConf();\n            console.log(GCache.BankrupData.getNewBankUpGiftConf(), GCache.BankrupData.getBankUpFeedbackData(), \"破产配置\")\n        } else {\n            console.log(GCache.BankrupData.getNewBankUpGiftConf(), GCache.BankrupData.getBankUpFeedbackData(), \"无破产配置\")\n        }\n    }\n\n    //更新界面\n    updateView() {\n        let self = this;\n        let giftPack = null;\n        if (this._bankrupFeedbackData) {\n            giftPack = this._bankrupFeedbackData[\"giftPack\"];\n        }\n        // 更新商品信息\n        for (let index = 0; index < this._goodsGiftArray.length; index++) {\n            // 默认关闭所有未选中\n            let checkImg = this._goodsGiftArray[index].getChildByName('check')\n            checkImg.active = false\n            if (this._currowChooseIndex == null || this._currowChooseIndex < 0) {\n                this._currowChooseIndex = -1\n            }\n        }\n        //商品显示\n        if (giftPack && giftPack.length != 0) {\n            let len = giftPack.length;\n            for (let index = 0; index < len; index++) {\n                // 当前节点\n                let itemNode = this._goodsGiftArray[index]\n                // 商品图片\n                let goodBg = itemNode.getChildByName('bg')\n\n\n                let icon = giftPack[index]['icon'];\n                if (icon) {\n                    //加载远端资源图\n                    if (icon && icon != \"\") {\n                        resLoader.loadRemote(icon, { ext: `.jpg` }, (err, imageAsset) => {\n                            if (!imageAsset) { //资源可能还在加载中\n                                return\n                            }\n                            if (!self.node || self.node.isValid == false) {\n                                return;\n                            }\n                            let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n                            if (spriteFrame) {\n                                goodBg.getComponent(Sprite).spriteFrame = spriteFrame;\n\n                            }\n                        })\n                    }\n                }\n            }\n            //更新第一个支付按钮\n            this.upGoodsBuyBtn(giftPack[0])\n            //默认选中第0个商品\n            this.openPageChoseGood(0)\n\n        }\n\n    }\n    // 打开页面时候默认选中第几个\n    openPageChoseGood(index) {\n        let checkImg = this._goodsGiftArray[index].getChildByName('check')\n        checkImg.active = true\n        this._currowChooseIndex = index\n    }\n    //购买商品\n    onClickBuyGoods(event: EventTouch, custom: string) {\n        if (this._currowChooseIndex == -1 || this._currowChooseIndex == null) {\n            EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: \"请选择要购买的礼包\" });\n            return;\n        }\n        if (Utils.isNotNull(this._currowChooseIndex, this._bankrupFeedbackData[\"giftPack\"][this._currowChooseIndex])) {\n            //支付场景赋值\n            GCache.CurrowPaySceneType = GConstants.UBPaySceneConfig.KRoomBrokenRecharge;\n            let gid = this._bankrupFeedbackData[\"giftPack\"][this._currowChooseIndex][\"id\"];\n            //查找支付类型\n            let payData = GCache.ShopInfo.getPriceByGoodsSceneId(GConstants.GoodsListID.Bankruptcy, gid);\n            console.log('当前支付信息', payData)\n            this.checkBuyWay(payData['payID'], gid)\n        }\n    }\n    //根据支付信息做不同的处理\n    checkBuyWay(payID, goodsId) {\n        switch (payID) {\n            case GConstants.PayType.RMB: //rmb 1\n                GCache.CurrowPaySceneType = GConstants.GoodsListID.Bankruptcy;\n                EventManager.dispatch(AppEvent.OTHER_PAY_WILL, GConstants.GoodsListID.Bankruptcy, goodsId);\n                //支付完成 关闭自身\n                this.node.destroy();\n                break;\n            case GConstants.PayType.SHARE://分享支付\n                let self = this\n                let _allowShareMsg = GCache.ShareInfo.shareTimeAllowed(goodsId, GConstants.ShareSceneConf.shopshare);\n                if (_allowShareMsg['allowShare']) {\n                    Platform.shareWXFriends(_allowShareMsg['shareParams'], Utils.handler(self, self.__doCallBackShare), _allowShareMsg);\n                } else {\n                    EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: `请勿在短时间内重复分享` });\n                }\n                break;\n            case GConstants.PayType.VIDEO://看视频\n                Platform.playerAdVideo(Utils.handler(this, this.__doCallBackWatchADs), goodsId)\n                break;\n            default:\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: \"err:不支持的支付方式 code=\" + payID });\n                break;\n        }\n    }\n    /** 分享完商品发放奖励发奖励 */\n    __doCallBackShare(data) {\n        if (Platform.isWXPlatform()) {\n            if (data['shareUseTime'] < GConstants.shareSucConditions.shareUseTime) {\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.shareFailMsg });\n            } else {\n                EventManager.dispatch(AppEvent.NET_REQ_SHARE_AWARD, data['gid'], GConstants.ReqUrl.shareType.shop, true)\n            }\n        } else {\n            EventManager.dispatch(AppEvent.NET_REQ_SHARE_AWARD, data['gid'], GConstants.ReqUrl.shareType.shop, true)\n        }\n\n    }\n    /** 看完视频广告发奖励 */\n    __doCallBackWatchADs(status, goodsID) {\n        if (status != true) {\n            EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: \"err:看广告失败\" });\n            return;\n        }\n        EventManager.dispatch(AppEvent.NET_REQ_ADS_AWARD, goodsID, GConstants.ReqUrl.shareType.shop, true)\n    }\n    //商品的点击\n    onClickGoods(event: EventTouch) {\n        // 点击的节点\n        let Checkmark = event.getCurrentTarget()\n        for (let index = 0; index < this._goodsGiftArray.length; index++) {\n            let checkImg = this._goodsGiftArray[index].getChildByName('check')\n            if (Checkmark.name == this._goodsGiftArray[index].name) {\n                this._currowChooseIndex = index\n                if (this._bankrupFeedbackData && this._bankrupFeedbackData[\"giftPack\"]) {\n                    let currentGood = this._bankrupFeedbackData[\"giftPack\"][index]\n                    // 选中状态  \n                    checkImg.active = true\n                    // 更新按钮\n                    this.upGoodsBuyBtn(currentGood)\n                }\n            } else {\n                checkImg.active = false\n            }\n        }\n    }\n    // 更新购买按钮\n    upGoodsBuyBtn(currentgoods) {\n        let self = this;\n        let buyBtn = currentgoods['buyBtnIcon'];\n        if (buyBtn) {\n            //加载远端资源图 支付按钮\n            if (buyBtn && buyBtn != \"\") {\n                resLoader.loadRemote(buyBtn, { ext: `.jpg` }, (err, imageAsset) => {\n                    if (!imageAsset) { //资源可能还在加载中\n                        return\n                    }\n                    if (!self.node || self.node.isValid == false) {\n                        return;\n                    }\n                    let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n                    if (spriteFrame) {\n                        this.buyBtnNode.getComponent(Sprite).spriteFrame = spriteFrame;\n                    }\n                })\n            }\n        }\n    }\n    //关闭\n    onClickReturn() {\n        EventManager.dispatch(AppEvent.GAME_GOTO_EXIT);\n        this.node.destroy();\n\n    }\n\n    //领取补助\n    onClickGetMoney() {\n        //领取救济金\n        EventManager.dispatch(AppEvent.NET_REQ_BANKRUPT);\n    }\n\n    //领取补助返回\n    getOnGetMoneyCallBack(event, isSuccess, packetInfo) {\n        if (isSuccess) {\n            this.getMoneyBtnNode.getComponent(Button).interactable = false;\n        }\n\n    }\n\n    onMaskClick() {\n        this.node.destroy();\n    }\n\n    //销毁\n    onDestroy() {\n\n    };\n    /**\n     * 请求破产礼包数据返回\n    */\n    respBankUpGiftConf(event, isSuccess, respData, reqData) {\n        if (!isSuccess) {\n            return;\n        }\n        this.updataBankUpData();\n        this.updateView()\n    }\n}"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/scripts/NodeUserPrefabCtr.ts"],"names":["Label","Node","SpriteAtlas","UITransform","Vec3","_decorator","GCache","Utils","SpriteLoad","EventManager","BaseComponent","PlayerMgr","RoomMgr","FXJConfig","FXJConstant","FXJEvent","FXJRes","FXJUIID","FXJSound","GameEvent","CardUtil","ccclass","property","menu","NodeUserPrefabCtr","tooltip","type","_handlerChatTextAutoHide","_isReload","_uid","_posID","onInitModuleEvent","addModelListener","VIEW_BROADCAST_PLAYER_EXIT","palyerExit","VIEW_PLAYER_UPDATE_PROPERTY","updateCoin","VIEW_PLAYER_CHAT_SHOW","showChatMsg","VIEW_PLAYER_EMOJ_SHOW","showEmojMsg","VIEW_PLAYER_AI_SHOW","modifyPlayerDeposit","VIEW_BROADCAST_DING_ZHUANG","palyerDingZhuang","onLoad","console","log","preloadRes","initUI","infoBgPlayer","active","nodeBtnMask","nodeChat","nodeEmoji","node","nodeDeposit","nodeZhuang","palyerRefresh","getPreLoaderRes","Atlas_Game_CardNum","bundle","path","Atlas_Player_Common","start","UID","PosID","posID","initData","data","uid","isValid","player","getInstance","findPlayerWithUserId","destroy","event","calculatePlayerSeat","mySeatId","seatId","updatePos","updateUserHead","gameUserInfo","sex","avatar_s","updateUserHeadBox","headBox","userId","url","spriteLoad","headNode","getComponent","string_isHttp","setRemoteUrl","setLocalLoad","Picture_UserBigHead_girl","Picture_UserBigHead_boy","headBoxNode","palyer","coinLabel","string","string_moneyToShortNumber","money","uiTransform","getParent","position","width","height","respData","mid","ai","cleanDepositStatus","body","faceValue","mojiIndex","Math","pow","aniName","ChatEmojiAniConf","movex","emojiAni","parentNode","resConf","Spine_Emoji","trackIndex","isLoop","skin","toPos","dispatch","SYS_ANI_PLAY","warn","PosId","isNotNull","msg","audioType","audioIndex","key","ChatText","Object","prototype","hasOwnProperty","call","arr","isArray","tmpIndex","indexOf","string_isEmpty","audioName","gender","User","getUserSex","SYS_PLAY_EFFECT","QuickChatXiaoBo","QuickChatXiaoYa","stopSchedulerOnce","childNameList","currowName","forEach","nodeName","pNode","getChildByName","bg","label","String","addSchedulerOnce","ChatTextAutoHide","handler","hideChatText","onClickUserInfo","CommClick","Desk","PlayType","MATCH","SYS_TOAST_TIP","content","getUserMid","VIEW_UI_OPEN","PlayerInfoCenter","GAME_OPEN_POPUP","GameHeadInfoPrefab","onDestroy"],"mappings":"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","sourcesContent":["\nimport { Label, Node, SpriteAtlas, UITransform, Vec3, _decorator } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { inf_SpineAniCreate } from '../../../framework/InterfaceDefines';\nimport { Utils } from '../../../framework/Utils';\nimport SpriteLoad from '../../../framework/gui/sprite/SpriteLoad';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { PlayerMgr } from '../cache/PlayerMgr';\nimport { RoomMgr } from '../cache/RoomMgr';\nimport { FXJConfig } from '../common/FXJConfig';\nimport { FXJConstant } from '../common/FXJConstant';\nimport { FXJEvent } from '../common/FXJEvent';\nimport { FXJRes, FXJUIID } from '../common/FXJRes';\nimport { FXJSound } from '../common/FXJSound';\nimport { GameEvent } from '../common/GameEvent';\nimport { Common } from '../common/idl/Common';\nimport { FaceType, MsgType } from '../common/server/ChatServer';\nimport { CardUtil } from '../util/CardUtil';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = NodeUserPrefabCtr\n * URL = db://assets/package/game/scripts/NodeUserPrefabCtr.ts\n * Time = Fri Sep 16 2022 11:06:58 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * 玩家节点\n */\n\n@ccclass('NodeUserPrefabCtr')\n//方便编辑器识别的菜单项目\n@menu('prefab/game/NodeUserPrefabCtr')\nexport class NodeUserPrefabCtr extends BaseComponent {\n\n\t//玩家信息背景\n\t@property({ tooltip: \"玩家信息背景\", type: Node })\n\tprivate infoBgPlayer: Node | null = null;\n\n\t//玩家点击遮罩\n\t@property({ tooltip: \"玩家点击遮罩\", type: Node })\n\tprivate nodeBtnMask: Node | null = null;\n\n\t/** 玩家托管 */\n\t@property({ tooltip: \"玩家显示托管状态\", type: Node })\n\tprivate nodeDeposit: Node | null = null;\n\n\t//用户头像\n\t@property({ tooltip: \"用户头像\", type: Node })\n\theadNode: Node = null!;\n\t//用户头像框\n\t@property({ tooltip: \"用户头像框\", type: Node })\n\tpublic headBoxNode: Node | null = null;\n\t//银币\n\t@property({ tooltip: \"银币\", type: Label })\n\tprivate coinLabel: Label | null = null;\n\n\t//聊天气泡节点\n\t@property({ tooltip: \"聊天气泡节点\", type: Node })\n\tprivate nodeChat: Node | null = null;\n\n\t//表情动画节点\n\t@property({ tooltip: \"表情动画节点\", type: Node })\n\tprivate nodeEmoji: Node | null = null;\n\n\t//庄家节点\n\t@property({ tooltip: \"庄家节点\", type: Node })\n\tprivate nodeZhuang: Node = null!;\n\n\t/** 自动隐藏快捷聊天的句柄 */\n\tprivate _handlerChatTextAutoHide = null;\n\t//是否已经加载了\n\tprivate _isReload: boolean = false;\n\t//玩家id\n\tprivate _uid: number = null;\n\t//玩家座位号\n\tprivate _posID: number = null;\n\t/**初始化添加事件绑定 */\n\tprotected onInitModuleEvent(): void {\n\t\t//玩家退出\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_PLAYER_EXIT, this.palyerExit);\n\t\t//玩家资产有更新\n\t\tthis.addModelListener(FXJEvent.VIEW_PLAYER_UPDATE_PROPERTY, this.updateCoin);\n\t\t//玩家表情聊天通知\n\t\tthis.addModelListener(FXJEvent.VIEW_PLAYER_CHAT_SHOW, this.showChatMsg);\n\t\tthis.addModelListener(GameEvent.VIEW_PLAYER_EMOJ_SHOW, this.showEmojMsg);\n\n\t\t// 通知托管\n\t\tthis.addModelListener(GameEvent.VIEW_PLAYER_AI_SHOW, this.modifyPlayerDeposit);\n\n\t\t// 定庄\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_DING_ZHUANG, this.palyerDingZhuang);\n\t}\n\n\tonLoad() {\n\t\tthis._isReload = true;\n\t\tconsole.log(\"NodeUser: onload==>\", this._uid);\n\t\tthis.preloadRes();\n\t\tthis.initUI();\n\t}\n\tinitUI() {\n\t\tthis.infoBgPlayer.active = true;\n\t\tthis.nodeBtnMask.active = true;\n\t\tthis.nodeChat.active = false;\n\t\tthis.nodeEmoji.active = true;\n\t\tthis.node.active = true;\n\t\tthis.nodeDeposit.active = false;\n\t\tthis.nodeZhuang.active = false;\n\t\tthis.palyerRefresh(null, this._uid);\n\t}\n\t/** 预加载 */\n\tpreloadRes() {\n\t\tthis.getPreLoaderRes(FXJRes.Atlas_Game_CardNum.bundle, FXJRes.Atlas_Game_CardNum.path, SpriteAtlas);\n\t\tthis.getPreLoaderRes(FXJRes.Atlas_Player_Common.bundle, FXJRes.Atlas_Player_Common.path, SpriteAtlas);\n\n\t}\n\tstart() {\n\n\t};\n\t/** get uid */\n\tget UID() {\n\t\treturn this._uid;\n\t}\n\t/** set PosID */\n\tset PosID(posID) {\n\t\tthis._posID = posID;\n\t}\n\t/** get PosID */\n\tget PosID() {\n\t\treturn this._posID;\n\t}\n\n\tpublic initData(data) {\n\t\tif (data) {\n\t\t\tthis._posID = data.posID;\n\t\t\tthis._uid = data.uid;\n\t\t}\n\t\tif (!this.node || this.node.isValid == false) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._uid) {\n\t\t\tlet player = PlayerMgr.getInstance().findPlayerWithUserId(this._uid);\n\t\t\tif (player != null) {\n\t\t\t\tthis.palyerRefresh(null, this._uid);\n\t\t\t} else {\n\t\t\t\tthis.node.destroy();\n\t\t\t}\n\t\t}\n\t}\n\t/** 用户刷新 */\n\tpalyerRefresh(event, uid: number) {\n\t\tif (!uid || uid != this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tlet player = PlayerMgr.getInstance().findPlayerWithUserId(uid);\n\t\tif (player) {\n\t\t\tthis._posID = CardUtil.calculatePlayerSeat(RoomMgr.getInstance().mySeatId, player.seatId);\n\n\t\t\tthis.infoBgPlayer.active = true;\n\t\t\tthis.nodeBtnMask.active = true;\n\t\t\tthis.updatePos();\n\t\t\tthis.updateUserHead(player.gameUserInfo.sex, player.gameUserInfo.avatar_s);\n\t\t\tthis.updateUserHeadBox(player.gameUserInfo.headBox);\n\t\t\tthis.updateCoin(null, player.userId);\n\t\t}\n\t}\n\n\t//更新用户头像\n\tupdateUserHead(sex: number, url: string) {\n\t\tlet spriteLoad = this.headNode.getComponent(SpriteLoad);\n\t\tif (Utils.string_isHttp(url)) {\n\t\t\tspriteLoad.setRemoteUrl(url, () => {\n\t\t\t\tif (sex == 2) {\n\t\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_girl.bundle, FXJRes.Picture_UserBigHead_girl.path);\n\t\t\t\t} else {\n\t\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_boy.bundle, FXJRes.Picture_UserBigHead_boy.path);\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\tif (sex == 2) {\n\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_girl.bundle, FXJRes.Picture_UserBigHead_girl.path);\n\t\t\t} else {\n\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_boy.bundle, FXJRes.Picture_UserBigHead_boy.path);\n\t\t\t}\n\t\t}\n\t}\n\t//更新用户头像框\n\tupdateUserHeadBox(headBox) {\n\t\tlet spriteLoad = this.headBoxNode.getComponent(SpriteLoad);\n\t\tif (Utils.string_isHttp(headBox)) {\n\t\t\tspriteLoad.setRemoteUrl(headBox);\n\t\t}\n\t}\n\n\t/**更新玩家银币*/\n\tupdateCoin(event = null, uid: number = null) {\n\t\tif (uid && uid == this._uid) {\n\t\t\tlet palyer = PlayerMgr.getInstance().findPlayerWithUserId(uid);\n\t\t\tthis.coinLabel.string = Utils.string_moneyToShortNumber(palyer ? palyer.money : 0, true);\n\t\t}\n\t}\n\n\t/** 更新当前位置 */\n\tupdatePos() {\n\t\tlet uiTransform = this.node.getParent().getComponent(UITransform)\n\t\tswitch (this._posID) {\n\t\t\tcase 0:\n\t\t\t\tthis.node.position = new Vec3(- (uiTransform.width / 2 - 90), -(uiTransform.height / 2 - 100), 0);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.node.position = new Vec3((uiTransform.width / 2 - 130), 5, 0);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.node.position = new Vec3((uiTransform.width / 2 - 390), (uiTransform.height / 2 - 90), 0);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.node.position = new Vec3(-(uiTransform.width / 2 - 130), 5, 0);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tmodifyPlayerDeposit(event, respData) {\n\t\t// 自己托管不用显示托管标志\n\t\tif (respData.mid != null) {\n\t\t\tif (respData.mid == this._uid) {\n\t\t\t\tthis.nodeDeposit.active = respData.ai;\n\t\t\t}\n\t\t}\n\t}\n\n\tcleanDepositStatus(){\n\t\tthis.nodeDeposit.active = false;\n\t}\n\n\tshowEmojMsg(event, body: FaceType) {\n\t\t/*\n\t\tnodeUserPrefabCtr.ts:238 显示聊天气泡或表情 \n\t\t{mid: 9465533, faceValue: 65549, vipType: -1}\n\t\t*/\n\t\tif (this._uid !== body.mid) {\n\t\t\tthis.nodeEmoji.active = false;\n\t\t\treturn;\n\t\t}\n\t\tif (body.faceValue == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet mojiIndex = body.faceValue - Math.pow(2, 16)\n\n\t\tlet aniName = FXJConstant.ChatEmojiAniConf[mojiIndex]\n\t\tif (aniName) {\n\t\t\t//表情\n\t\t\tthis.nodeEmoji.active = true;\n\t\t\tlet movex = 0;\n\t\t\t//表情动画\n\t\t\tlet emojiAni: inf_SpineAniCreate = {\n\t\t\t\tparentNode: this.nodeEmoji,\n\t\t\t\tresConf: FXJRes.Spine_Emoji,\n\t\t\t\taniName: aniName,\n\t\t\t\ttrackIndex: 0,\n\t\t\t\tisLoop: false,\n\t\t\t\tskin: null,\n\t\t\t\ttoPos: new Vec3(movex, 0, 0)\n\t\t\t}\n\t\t\tEventManager.dispatch(FXJEvent.SYS_ANI_PLAY, emojiAni);\n\t\t} else {\n\t\t\tconsole.warn(\"Err:不支持的快捷表情\", body)\n\t\t}\n\t}\n\n\n\t/** 显示聊天气泡或表情 */\n\tshowChatMsg(event, body: MsgType) {\n\t\t/*\n\t\t显示聊天气泡或表情 \n\t\tnodeUserPrefabCtr.ts:238 显示聊天气泡或表情 \n\t\t{mid: 2503717, msg: '退退退', index: 2}\n\t\t*/\n\t\tconsole.log(\"聊天接收到的是:\", body)\n\t\tlet player: Common.IPlayerInfo = PlayerMgr.getInstance().findPlayerWithUserId(body.mid);\n\t\tif (this._uid !== body.mid) {\n\t\t\tthis.nodeChat.active = false;\n\t\t\treturn;\n\t\t}\n\t\tlet PosId: number = CardUtil.calculatePlayerSeat(RoomMgr.getInstance().mySeatId, player.seatId);\n\t\t//快捷聊天\n\t\tif (Utils.isNotNull(PosId, body.msg)) {\n\t\t\tlet msg = body.msg;\n\t\t\t//根据msg 去索引得到音效名\n\t\t\tlet audioType = '';\n\t\t\tlet audioIndex = -1;\n\t\t\tfor (const key in FXJConstant.ChatText) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(FXJConstant.ChatText, key)) {\n\t\t\t\t\tconst arr = FXJConstant.ChatText[key];\n\t\t\t\t\tif (Utils.isArray(arr)) {\n\t\t\t\t\t\tlet tmpIndex = arr.indexOf(msg);\n\t\t\t\t\t\tif (tmpIndex != -1) {\n\t\t\t\t\t\t\taudioType = key;\n\t\t\t\t\t\t\taudioIndex = tmpIndex;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Utils.string_isEmpty(audioType) || audioIndex == -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet audioName = audioType + '_' + audioIndex;\n\t\t\tlet gender = GCache.User.getUserSex();\n\t\t\tif (gender == 2) {\n\t\t\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, { bundle: FXJSound.QuickChatXiaoBo.bundle, path: FXJSound.QuickChatXiaoYa.path + audioName });\n\t\t\t} else {\n\t\t\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, { bundle: FXJSound.QuickChatXiaoBo.bundle, path: FXJSound.QuickChatXiaoBo.path + audioName });\n\t\t\t}\n\n\t\t\tthis.stopSchedulerOnce(this._handlerChatTextAutoHide);\n\t\t\tthis._handlerChatTextAutoHide = null;\n\t\t\tthis.nodeChat.active = true;\n\t\t\tlet childNameList = [\"right\", \"left\", \"bottom\"];\n\t\t\tlet currowName = childNameList[0];\n\t\t\tif (PosId === 1 || PosId === 2) {\n\t\t\t\tcurrowName = childNameList[PosId];\n\t\t\t}\n\t\t\tlet parentNode = null;\n\t\t\tchildNameList.forEach((nodeName, key) => {\n\t\t\t\tlet pNode = this.nodeChat.getChildByName(nodeName);\n\t\t\t\tif (nodeName == currowName) {\n\t\t\t\t\tpNode.active = true;\n\t\t\t\t\tparentNode = pNode;\n\t\t\t\t} else {\n\t\t\t\t\tpNode.active = false;\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (!parentNode) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet bg = parentNode.getChildByName(\"bg\");\n\t\t\tlet label = bg?.getChildByName(\"Label\");\n\t\t\tif (label) {\n\t\t\t\tlabel.getComponent(Label).string = String(body.msg);\n\t\t\t}\n\t\t\tthis._handlerChatTextAutoHide = this.addSchedulerOnce(FXJConfig.ChatTextAutoHide, Utils.handler(this, this.hideChatText))\n\t\t}\n\n\t};\n\t/** 隐藏快捷聊天 */\n\thideChatText() {\n\t\tif (this.nodeChat && this.nodeChat.isValid == true) {\n\t\t\tthis.nodeChat.active = false;\n\t\t}\n\t\tthis._handlerChatTextAutoHide = null;\n\t}\n\n\t//点击个人信息\n\tonClickUserInfo(event) {\n\t\tlet palyer = PlayerMgr.getInstance().findPlayerWithUserId(this._uid);\n\t\tif (!palyer) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tif (GCache.Desk.PlayType == FXJConstant.PlayType.MATCH) {\n\t\t\tEventManager.dispatch(FXJEvent.SYS_TOAST_TIP, { content: \"比赛中无法查看玩家信息\" });\n\t\t\treturn;\n\t\t}\n\t\tif (palyer.userId == GCache.User.getUserMid()) {\n\t\t\tEventManager.dispatch(FXJEvent.VIEW_UI_OPEN, FXJUIID.PlayerInfoCenter, null, null, null, true);\n\t\t} else {\n\t\t\tlet data = {\n\t\t\t\tuid: palyer.userId,\n\t\t\t\tposID: palyer.seatId,\n\t\t\t}\n\t\t\tEventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameHeadInfoPrefab, data, {});\n\t\t}\n\t}\n\n\t//玩家退出房间\n\tpalyerExit(event, uid: number = null) {\n\t\tif (Utils.isNotNull(uid)) {\n\t\t\tif (uid == this._uid) {\n\t\t\t\tthis.node.active = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tpalyerDingZhuang(event, seatId: number = null) {\n\t\tif (Utils.isNotNull(seatId)) {\n\t\t\tthis.nodeZhuang.active = CardUtil.calculatePlayerSeat(RoomMgr.getInstance().mySeatId, seatId) == this._posID;\n\t\t}\n\n\t}\n\n\t//销毁\n\tonDestroy() {\n\n\t};\n\n}\n\n"]}
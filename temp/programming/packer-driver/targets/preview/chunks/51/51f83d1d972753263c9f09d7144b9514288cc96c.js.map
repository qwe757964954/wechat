{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/common/FXJController.ts"],"names":["FXJController","GCache","Encrypt","EventManager","Utils","RoomController","PlayerMgr","Room","RoomMgr","SettleMgr","FXJCMDHead","FXJWriteAndRead","OPCode","FXJConstant","FXJEvent","FXJObserver","FXJUIID","GameEvent","ChatServer","RoundServer","SettleServer","getInstance","_instance","init","clear","print","__clearServerClass","constructor","name","GameSceneCtr","GameDeskCtr","fxjObserver","onInit","initPB","initCMDMapping","onViewLoad","event","setDesk","_deskCache","Desk","addObserver","__initModuleEvent","__initServerClass","IsReconn","_intoGameData","isReconn","addModelListener","BROADCAST_DING_ZHUANG","broadcastDingZhuang","SERVER_BROADCAST_PLAYER_LOGIN","serverBroadcastPlayerLogin","BROADCAST_GRAB_CARD","broadcastGrabCard","BROADCAST_DINGQUE_OPTIONS","broadcastDingQueOptions","BROADCAST_USER_PIAO_GANG","broadcastUserPiaoGang","BROADCAST_PAOQIAN_OPTIONS","broadcastPaoQianOptions","BROADCAST_ONE_DINGQUE_RESULT","broadcastOneDingqueResult","BROADCAST_ALL_DINGQUE_RESULT","broadcastAllDingqueResult","BROADCAST_SHUAIQIANG_RESULT","broadcastAllShuaiQiangResult","BROADCAST_CHAQUE_RESULT","broadcastChaqueResult","BROADCAST_MAIDUANMEN_USER","broadcastMaiDuanMenUser","BROADCAST_MAIDUANMEN_RESULT","broadcastMaiDuanMenResult","BROADCAST_FEN_ZHANG","broadcastFenZhang","BROADCAST_UPDATE_FAN_GANG_PAI","broadcastUpdateFanGangPai","BROADCAST_SELECT_FAN_GANG_PAI","broadcastSelectFanGangPai","BROADCAST_DEAL_CARD","broadcastDealCard","BROADCAST_USER_OPERATION_RESULT","broadcastUserOperationResult","BROADCAST_USER_OPERATION","broadcastUserOperation","BROADCAST_DING_FENG","broadcastDingFeng","BROADCAST_ZHI_TOU","broadcastZhiTou","BROADCAST_DOUBLE_CARDS","broadcastDoubleCards","BROADCAST_REWARD_CARDS","broadcastRewardCards","BROADCAST_PLAYING_JI_TYPE","broadcastPlayingJiType","BROADCAST_ZHUO_JI","broadcastZhuoJi","BROADCAST_SETTLE","broadcastSettleItem","BROADCAST_HANDCARDS","broadcastHandCards","BROADCAST_BANKER_FIRST_OPERATION","broadcastBankerFirstOperation","BROADCAST_UPDATE_PLAYER_MONEY","broadcastUpdatePlayerMoney","BROADCAST_GANG_OPERATION_RESULT","broadcastGameOperationResult","BROADCAST_DING_LAIZI","broadcastDingLaizi","BROADCAST_TO_WAIT_USER_GIVE_UP","broadcastToWaitUserGiveUp","BROADCAST_XIAZHU_OPTIONS","broadcastXiazhuOptions","BROADCAST_XIAZHU_RESULT","broadcastXiazhuResult","BROADCAST_GEN_ZHUANG_SUCC","broadcastGenZhuangSucc","BROADCAST_GAME_OVER","broadcastGameOver","BROADCAST_GAME_START","broadcastGameStart","BROADCAST_FAN_GANG_PAI","broadcastFanGangPai","SEND_PLAYER_OPERATION","sendPlayerOpration","NEXT_GAME_OPERATION","onNextGameOperation","resp","dump","gameOverResult","roomInfo","getRoomInfoData","GameID","console","log","User","getUserSilver","isNull","getMyPlayerInfo","dispatch","NET_REQ_ROOM_LOGIN","SHOW_HIDEN_MATCH_VIEW","info","sendMsg","cmd","C2S","USER_OPERATION_RESULT","body","turnMe","opCode","OPE_PASS","NET_SEND_MSG","VIEW_BROADCAST_GAME_START","reqEnterGameLogin","receiveReConnectSuccess","respData","reconnectionRoomUpdate","ENTER_ROOM_UPDATE_PLAYER","VIEW_UPDATE_FAN_GANG_PAI","isReady","receiveLoginRoomSuccess","enterRoomUpdate","addPlayerList","VIEW_BROADCAST_PLAYER_ENTER","userId","receivePlayerReady","updatePlayerReadyStatus","VIEW_UPDATE_BU_GANG_PAI","receiveGamePlayerAI","updatePlayerAiStatus","mid","ai","VIEW_PLAYER_AI_SHOW","receivePlayerLogOut","VIEW_BROADCAST_PLAYER_EXIT","deletePlayerLeave","receiveExitRoomSuccess","getUserMid","rollDice","VIEW_BROADCAST_ZHI_TOU","laiziInfo","VIEW_BROADCAST_DING_ZHUANG","bankSeatId","gameGrabCard","VIEW_BROADCAST_GRAB_CARD","updateFanGangCards","updateSelectFanGangCards","dealCardUpdate","VIEW_BROADCAST_DEAL_CARD","userOperationResult","UPDATE_OPERATION_RESULT","userOperation","VIEW_USER_OPERATION","DRAW_MY_CARD","updateSettleResult","settleType","GAME_OPEN_POPUP","GameSettlePrefab","updateHandCards","VIEW_BROADCAST_GAME_OVER","bankerFirstOperation","VIEW_BROADCAST_OPERATION_START","updatePlayerMoney","moneys","playerList","forEach","player","VIEW_PLAYER_UPDATE_PROPERTY","receiveGameUserFace","VIEW_PLAYER_EMOJ_SHOW","receiveGameUserChat","msg","JsonDecode","index","fromUid","number_valueOf","toUid","minPorpID","EmojiProp","propID","maxPorpID","length","warn","uid","prop_id","to_uid","VIEW_DESK_ANI_PLAY","AnimNormal","HudongProp","VIEW_PLAYER_CHAT_SHOW"],"mappings":";;;6PAiCaA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAzBJC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,S,kBAAAA,S;;AACAC,MAAAA,U,kBAAAA,U;;AACAC,MAAAA,e,kBAAAA,e;;AAGAC,MAAAA,M,kBAAAA,M;;AACAC,MAAAA,W,kBAAAA,W;;AACAC,MAAAA,Q,kBAAAA,Q;;AACAC,MAAAA,W,kBAAAA,W;;AACAC,MAAAA,O,kBAAAA,O;;AACAC,MAAAA,S,kBAAAA,S;;AAGAC,MAAAA,U,kBAAAA,U;;AACAC,MAAAA,W,kBAAAA,W;;AACAC,MAAAA,Y,kBAAAA,Y;;;;;;;+BAEIpB,a,GAAN,MAAMA,aAAN;AAAA;AAAA,4CAA2C;AAExB,eAAXqB,WAAW,GAAkB;AAC1C,cAAI,CAAC,KAAKC,SAAN,IAAmB,KAAKA,SAAL,IAAkB,IAAzC,EAA+C;AAC9C,iBAAKA,SAAL,GAAiB,IAAItB,aAAJ,CAAkB,eAAlB,CAAjB;AACA;;AACD,iBAAO,KAAKsB,SAAZ;AACA;;AACiB,eAAJC,IAAI,GAAkB;AACnC,cAAI,KAAKD,SAAT,EAAoB;AACnB,iBAAKA,SAAL,CAAeE,KAAf;AACA;;AACD,eAAKF,SAAL,GAAiB,IAAjB;AACAtB,UAAAA,aAAa,CAACqB,WAAd;AACA;AACA;;AAEMG,QAAAA,KAAK,GAAG;AACd,eAAKC,KAAL,CAAW,mCAAX;;AACA,eAAKC,kBAAL;;AACA,gBAAMF,KAAN;AACAxB,UAAAA,aAAa,CAACsB,SAAd,GAA0B,IAA1B;AACA;AAED;;;AAYA;AACAK,QAAAA,WAAW,CAACC,IAAD,EAAe;AACzB,gBAAMA,IAAN;AADyB,eAZnBC,YAYmB,GAZgB,IAYhB;AAAA,eAVnBC,WAUmB,GAVc,IAUd;AAAA,eARnBX,WAQmB,GARQ,IAQR;AAAA,eANnBC,YAMmB,GANU,IAMV;AAAA,eAJnBF,UAImB,GAJM,IAIN;AAAA,eAFnBa,WAEmB,GAFQ,IAER;AAEzB;;AAED;AACUC,QAAAA,MAAM,GAAS;AACxB,gBAAMA,MAAN,GADwB,CAExB;;AAEA;AAAA;AAAA,kDAAgBX,WAAhB,GAA8BY,MAA9B;AACA;AAAA;AAAA,kDAAgBZ,WAAhB,GAA8Ba,cAA9B;AACA;AACD;;;AACOC,QAAAA,UAAU,CAACC,KAAD,EAAqB;AAAA,cAApBA,KAAoB;AAApBA,YAAAA,KAAoB,GAAZ,IAAY;AAAA;;AACrC;AAAA;AAAA,gCAAOC,OAAP;AAAA;AAAA;AACA,eAAKC,UAAL,GAAkB;AAAA;AAAA,gCAAOC,IAAzB;AACA,eAAKR,WAAL,GAAmB;AAAA;AAAA,2CAAnB;AACA;AAAA;AAAA,sCAAUV,WAAV,GAAwBmB,WAAxB,CAAoC,KAAKT,WAAzC;AACA;AAAA;AAAA,kCAAQV,WAAR,GAAsBmB,WAAtB,CAAkC,KAAKT,WAAvC;;AACA,eAAKU,iBAAL;;AACA,eAAKC,iBAAL;;AACA,gBAAMP,UAAN,CAAiBC,KAAjB;AAEA,SA5DgD,CA8DjD;AACA;AACA;AACA;AAEA;;AAEA;;;AACQM,QAAAA,iBAAiB,GAAG;AAC3B,eAAKhB,kBAAL;;AACA,eAAKP,WAAL,GAAmB;AAAA;AAAA,2CAAnB;AACA,eAAKC,YAAL,GAAoB;AAAA;AAAA,6CAApB;AACA,eAAKF,UAAL,GAAkB;AAAA;AAAA,yCAAlB;AACA;AAED;;;AACOQ,QAAAA,kBAAkB,GAAG;AAC3B,cAAI,KAAKP,WAAT,EAAsB;AACrB,iBAAKA,WAAL,CAAiBK,KAAjB;AACA;;AACD,cAAI,KAAKJ,YAAT,EAAuB;AACtB,iBAAKA,YAAL,CAAkBI,KAAlB;AACA;;AACD,cAAI,KAAKN,UAAT,EAAqB;AACpB,iBAAKA,UAAL,CAAgBM,KAAhB;AACA;AACD;AACD;;;AACY,YAARmB,QAAQ,GAAG;AAAA;;AACd,wCAAO,KAAKC,aAAZ,qBAAO,oBAAoBC,QAA3B;AACA;;AACD;AACQJ,QAAAA,iBAAiB,GAAS;AACjC,eAAKK,gBAAL,CAAsB;AAAA;AAAA,oCAASC,qBAA/B,EAAsD,KAAKC,mBAA3D;AACA,eAAKF,gBAAL,CAAsB;AAAA;AAAA,oCAASG,6BAA/B,EAA8D,KAAKC,0BAAnE,EAFiC,CAGjC;;AAEA,eAAKJ,gBAAL,CAAsB;AAAA;AAAA,oCAASK,mBAA/B,EAAoD,KAAKC,iBAAzD;AACA,eAAKN,gBAAL,CAAsB;AAAA;AAAA,oCAASO,yBAA/B,EAA0D,KAAKC,uBAA/D;AACA,eAAKR,gBAAL,CAAsB;AAAA;AAAA,oCAASS,wBAA/B,EAAyD,KAAKC,qBAA9D;AACA,eAAKV,gBAAL,CAAsB;AAAA;AAAA,oCAASW,yBAA/B,EAA0D,KAAKC,uBAA/D;AACA,eAAKZ,gBAAL,CAAsB;AAAA;AAAA,oCAASa,4BAA/B,EAA6D,KAAKC,yBAAlE;AACA,eAAKd,gBAAL,CAAsB;AAAA;AAAA,oCAASe,4BAA/B,EAA6D,KAAKC,yBAAlE;AACA,eAAKhB,gBAAL,CAAsB;AAAA;AAAA,oCAASiB,2BAA/B,EAA4D,KAAKC,4BAAjE;AACA,eAAKlB,gBAAL,CAAsB;AAAA;AAAA,oCAASmB,uBAA/B,EAAwD,KAAKC,qBAA7D;AACA,eAAKpB,gBAAL,CAAsB;AAAA;AAAA,oCAASqB,yBAA/B,EAA0D,KAAKC,uBAA/D;AACA,eAAKtB,gBAAL,CAAsB;AAAA;AAAA,oCAASuB,2BAA/B,EAA4D,KAAKC,yBAAjE;AACA,eAAKxB,gBAAL,CAAsB;AAAA;AAAA,oCAASyB,mBAA/B,EAAoD,KAAKC,iBAAzD;AACA,eAAK1B,gBAAL,CAAsB;AAAA;AAAA,oCAAS2B,6BAA/B,EAA8D,KAAKC,yBAAnE;AACA,eAAK5B,gBAAL,CAAsB;AAAA;AAAA,oCAAS6B,6BAA/B,EAA8D,KAAKC,yBAAnE;AACA,eAAK9B,gBAAL,CAAsB;AAAA;AAAA,oCAAS+B,mBAA/B,EAAoD,KAAKC,iBAAzD;AACA,eAAKhC,gBAAL,CAAsB;AAAA;AAAA,oCAASiC,+BAA/B,EAAgE,KAAKC,4BAArE;AACA,eAAKlC,gBAAL,CAAsB;AAAA;AAAA,oCAASmC,wBAA/B,EAAyD,KAAKC,sBAA9D;AACA,eAAKpC,gBAAL,CAAsB;AAAA;AAAA,oCAASqC,mBAA/B,EAAoD,KAAKC,iBAAzD;AACA,eAAKtC,gBAAL,CAAsB;AAAA;AAAA,oCAASuC,iBAA/B,EAAkD,KAAKC,eAAvD;AAEA,eAAKxC,gBAAL,CAAsB;AAAA;AAAA,oCAASyC,sBAA/B,EAAuD,KAAKC,oBAA5D;AACA,eAAK1C,gBAAL,CAAsB;AAAA;AAAA,oCAAS2C,sBAA/B,EAAuD,KAAKC,oBAA5D;AAEA,eAAK5C,gBAAL,CAAsB;AAAA;AAAA,oCAAS6C,yBAA/B,EAA0D,KAAKC,sBAA/D;AACA,eAAK9C,gBAAL,CAAsB;AAAA;AAAA,oCAAS+C,iBAA/B,EAAkD,KAAKC,eAAvD;AAEA,eAAKhD,gBAAL,CAAsB;AAAA;AAAA,oCAASiD,gBAA/B,EAAiD,KAAKC,mBAAtD;AACA,eAAKlD,gBAAL,CAAsB;AAAA;AAAA,oCAASmD,mBAA/B,EAAoD,KAAKC,kBAAzD;AACA,eAAKpD,gBAAL,CAAsB;AAAA;AAAA,oCAASqD,gCAA/B,EAAiE,KAAKC,6BAAtE;AACA,eAAKtD,gBAAL,CAAsB;AAAA;AAAA,oCAASuD,6BAA/B,EAA8D,KAAKC,0BAAnE;AAEA,eAAKxD,gBAAL,CAAsB;AAAA;AAAA,oCAASyD,+BAA/B,EAAgE,KAAKC,4BAArE;AACA,eAAK1D,gBAAL,CAAsB;AAAA;AAAA,oCAAS2D,oBAA/B,EAAqD,KAAKC,kBAA1D;AACA,eAAK5D,gBAAL,CAAsB;AAAA;AAAA,oCAAS6D,8BAA/B,EAA+D,KAAKC,yBAApE;AACA,eAAK9D,gBAAL,CAAsB;AAAA;AAAA,oCAAS+D,wBAA/B,EAAyD,KAAKC,sBAA9D;AACA,eAAKhE,gBAAL,CAAsB;AAAA;AAAA,oCAASiE,uBAA/B,EAAwD,KAAKC,qBAA7D;AACA,eAAKlE,gBAAL,CAAsB;AAAA;AAAA,oCAASmE,yBAA/B,EAA0D,KAAKC,sBAA/D;AAEA,eAAKpE,gBAAL,CAAsB;AAAA;AAAA,oCAASqE,mBAA/B,EAAoD,KAAKC,iBAAzD;AACA,eAAKtE,gBAAL,CAAsB;AAAA;AAAA,oCAASuE,oBAA/B,EAAqD,KAAKC,kBAA1D;AACA,eAAKxE,gBAAL,CAAsB;AAAA;AAAA,oCAASyE,sBAA/B,EAAuD,KAAKC,mBAA5D,EA5CiC,CA6CjC;AACA;;AAEA,eAAK1E,gBAAL,CAAsB;AAAA;AAAA,sCAAU2E,qBAAhC,EAAuD,KAAKC,kBAA5D;AACA,eAAK5E,gBAAL,CAAsB;AAAA;AAAA,sCAAU6E,mBAAhC,EAAqD,KAAKC,mBAA1D;AAGA;;AAESR,QAAAA,iBAAiB,CAAChF,KAAD,EAAeyF,IAAf,EAAqD;AAAA,cAApDzF,KAAoD;AAApDA,YAAAA,KAAoD,GAA5C,IAA4C;AAAA;;AAAA,cAAtCyF,IAAsC;AAAtCA,YAAAA,IAAsC,GAAZ,IAAY;AAAA;;AAC/E,eAAKC,IAAL,CAAUD,IAAV,EAAgB,YAAhB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAYwF,cAAZ,GAF+E,CAG/E;AACA;;AAESH,QAAAA,mBAAmB,CAACxF,KAAD,EAAe;AAAA,cAAdA,KAAc;AAAdA,YAAAA,KAAc,GAAN,IAAM;AAAA;;AAC3C,cAAI4F,QAAQ,GAAG;AAAA;AAAA,kCAAQ3G,WAAR,GAAsB4G,eAAtB,CAAsC,KAAKrF,aAAL,CAAmBsF,MAAzD,CAAf;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA6C;AAAA;AAAA,gCAAOC,IAAP,CAAYC,aAAZ,EAA7C,EAAyEN,QAAzE;;AACA,cAAG;AAAA;AAAA,gCAAOK,IAAP,CAAYC,aAAZ,KAA8B,IAAjC,EAAsC;AACrCH,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA;AACA;;AAED,cAAI;AAAA;AAAA,8BAAMG,MAAN,CAAa;AAAA;AAAA,sCAAUlH,WAAV,GAAwBmH,eAAxB,EAAb,CAAJ,EAA6D;AAC5D;AAAA;AAAA,8CAAaC,QAAb,CAAsB;AAAA;AAAA,sCAASC,kBAA/B;AACA,WAFD,MAEO;AACN;AAAA;AAAA,8CAAaD,QAAb,CAAsB;AAAA;AAAA,wCAAUE,qBAAhC,EAAuD,IAAvD;AACA,WAZ0C,CAa3C;;AACA,SAxKgD,CAyKjD;;;AACUjB,QAAAA,kBAAkB,CAACtF,KAAD,EAAewG,IAAf,EAAgD;AAAA,cAA/CxG,KAA+C;AAA/CA,YAAAA,KAA+C,GAAvC,IAAuC;AAAA;;AAC3E,cAAIyG,OAAO,GAAG;AACbC,YAAAA,GAAG,EAAE;AAAA;AAAA,0CAAWC,GAAX,CAAeC,qBADP;AAEbC,YAAAA,IAAI,EAAEL;AAFO,WAAd;AAIA;AAAA;AAAA,gCAAOrG,IAAP,CAAY2G,MAAZ,GAAqBN,IAAI,CAACO,MAAL,KAAgB;AAAA;AAAA,gCAAOC,QAA5C;AACA;AAAA;AAAA,4CAAaX,QAAb,CAAsB;AAAA;AAAA,oCAASY,YAA/B,EAA6CR,OAA7C;AACA;;AACSvB,QAAAA,kBAAkB,CAAClF,KAAD,EAAeyF,IAAf,EAAqD;AAAA,cAApDzF,KAAoD;AAApDA,YAAAA,KAAoD,GAA5C,IAA4C;AAAA;;AAAA,cAAtCyF,IAAsC;AAAtCA,YAAAA,IAAsC,GAAZ,IAAY;AAAA;;AAChFM,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,YAAlB,EADgF,CAEhF;;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUE,qBAAhC,EAAuD,KAAvD;AACA;AAAA;AAAA,4CAAaF,QAAb,CAAsB;AAAA;AAAA,sCAAUa,yBAAhC;AACA;;AACSC,QAAAA,iBAAiB,CAACnH,KAAD,EAAe;AAAA,cAAdA,KAAc;AAAdA,YAAAA,KAAc,GAAN,IAAM;AAAA;;AACzC,gBAAMmH,iBAAN,CAAwBnH,KAAxB;AACA;AACD;;;AACUoH,QAAAA,uBAAuB,CAACpH,KAAD,EAAeqH,QAAf,EAAqD;AAAA,cAApDrH,KAAoD;AAApDA,YAAAA,KAAoD,GAA5C,IAA4C;AAAA;;AAAA,cAAtCqH,QAAsC;AAAtCA,YAAAA,QAAsC,GAAN,IAAM;AAAA;;AACrF,gBAAMD,uBAAN,CAA8BpH,KAA9B,EAAqCqH,QAArC;AACAtB,UAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CqB,QAA/C;AACA;AAAA;AAAA,gCAAOlH,IAAP,CAAYmH,sBAAZ,CAAmCD,QAAnC;AACA;AAAA;AAAA,4CAAahB,QAAb,CAAsB;AAAA;AAAA,sCAAUkB,wBAAhC;AACA;AAAA;AAAA,4CAAalB,QAAb,CAAsB;AAAA;AAAA,sCAAUa,yBAAhC;AACA;AAAA;AAAA,4CAAab,QAAb,CAAsB;AAAA;AAAA,sCAAUmB,wBAAhC;;AACA,cAAI,CAAC;AAAA;AAAA,sCAAUvI,WAAV,GAAwBmH,eAAxB,GAA0CqB,OAA/C,EAAwD;AACvD;AAAA;AAAA,8CAAapB,QAAb,CAAsB;AAAA;AAAA,wCAAUE,qBAAhC,EAAuD,IAAvD,EADuD,CAEvD;AACA;AAED;AAED;;;AACUmB,QAAAA,uBAAuB,CAAC1H,KAAD,EAAeqH,QAAf,EAAqD;AAAA,cAApDrH,KAAoD;AAApDA,YAAAA,KAAoD,GAA5C,IAA4C;AAAA;;AAAA,cAAtCqH,QAAsC;AAAtCA,YAAAA,QAAsC,GAAN,IAAM;AAAA;;AACrF,gBAAMK,uBAAN,CAA8B1H,KAA9B,EAAqCqH,QAArC;AACAtB,UAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ,EAAiDqB,QAAjD;AACA;AAAA;AAAA,gCAAOlH,IAAP,CAAYwH,eAAZ,CAA4BN,QAA5B;AACA;AAAA;AAAA,4CAAahB,QAAb,CAAsB;AAAA;AAAA,sCAAUkB,wBAAhC;;AACA,cAAI,CAAC;AAAA;AAAA,sCAAUtI,WAAV,GAAwBmH,eAAxB,GAA0CqB,OAA/C,EAAwD;AACvD;AAAA;AAAA,8CAAapB,QAAb,CAAsB;AAAA;AAAA,wCAAUE,qBAAhC,EAAuD,IAAvD,EADuD,CAEvD;AACA;AACD;AAED;;;AACUzF,QAAAA,0BAA0B,CAACd,KAAD,EAAeyF,IAAf,EAAsD;AAAA,cAArDzF,KAAqD;AAArDA,YAAAA,KAAqD,GAA7C,IAA6C;AAAA;;AAAA,cAAvCyF,IAAuC;AAAvCA,YAAAA,IAAuC,GAAZ,IAAY;AAAA;;AACzFM,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,+BAAlB;AACA;AAAA;AAAA,sCAAUxG,WAAV,GAAwB2I,aAAxB,CAAsCnC,IAAtC;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUwB,2BAAhC,EAA6DpC,IAAI,CAACqC,MAAlE;AACA;;AAESC,QAAAA,kBAAkB,CAAC/H,KAAD,EAAeqH,QAAf,EAAgC;AAAA,cAA/BrH,KAA+B;AAA/BA,YAAAA,KAA+B,GAAvB,IAAuB;AAAA;;AAAA,cAAjBqH,QAAiB;AAAjBA,YAAAA,QAAiB,GAAN,IAAM;AAAA;;AAC3D,gBAAMU,kBAAN,CAAyB/H,KAAzB,EAAgCqH,QAAhC;AACAtB,UAAAA,OAAO,CAACC,GAAR,CAAYqB,QAAZ,EAAsB,YAAtB;AACA;AAAA;AAAA,sCAAUpI,WAAV,GAAwB+I,uBAAxB,CAAgDX,QAAQ,CAACS,MAAzD;AAEA;;AAES1C,QAAAA,mBAAmB,CAACpF,KAAD,EAAeqH,QAAf,EAAkD;AAAA,cAAjDrH,KAAiD;AAAjDA,YAAAA,KAAiD,GAAzC,IAAyC;AAAA;;AAAA,cAAnCqH,QAAmC;AAAnCA,YAAAA,QAAmC,GAAN,IAAM;AAAA;;AAC9EtB,UAAAA,OAAO,CAACC,GAAR,CAAYqB,QAAZ,EAAsB,0BAAtB;AACA;AAAA;AAAA,4CAAahB,QAAb,CAAsB;AAAA;AAAA,sCAAU4B,uBAAhC,EAAyDZ,QAAzD;AACA;;AAESa,QAAAA,mBAAmB,CAAClI,KAAD,EAAeqH,QAAf,EAAgC;AAAA,cAA/BrH,KAA+B;AAA/BA,YAAAA,KAA+B,GAAvB,IAAuB;AAAA;;AAAA,cAAjBqH,QAAiB;AAAjBA,YAAAA,QAAiB,GAAN,IAAM;AAAA;;AAC5D,gBAAMa,mBAAN,CAA0BlI,KAA1B,EAAiCqH,QAAjC;AACAtB,UAAAA,OAAO,CAACC,GAAR,CAAYqB,QAAZ,EAAsB,WAAtB;AACA;AAAA;AAAA,sCAAUpI,WAAV,GAAwBkJ,oBAAxB,CAA6Cd,QAAQ,CAACe,GAAtD,EAA2Df,QAAQ,CAACgB,EAApE;AACA;AAAA;AAAA,4CAAahC,QAAb,CAAsB;AAAA;AAAA,sCAAUiC,mBAAhC,EAAqDjB,QAArD;AACA;AAED;;;AACUkB,QAAAA,mBAAmB,CAACvI,KAAD,EAAeqH,QAAf,EAAgC;AAAA,cAA/BrH,KAA+B;AAA/BA,YAAAA,KAA+B,GAAvB,IAAuB;AAAA;;AAAA,cAAjBqH,QAAiB;AAAjBA,YAAAA,QAAiB,GAAN,IAAM;AAAA;;AAC5D,gBAAMkB,mBAAN,CAA0BvI,KAA1B,EAAiCqH,QAAjC;AACAtB,UAAAA,OAAO,CAACC,GAAR,CAAYqB,QAAZ,EAAsB,YAAtB;AACA;AAAA;AAAA,4CAAahB,QAAb,CAAsB;AAAA;AAAA,sCAAUmC,0BAAhC,EAA4DnB,QAAQ,CAACe,GAArE;AACA;AAAA;AAAA,sCAAUnJ,WAAV,GAAwBwJ,iBAAxB,CAA0CpB,QAAQ,CAACe,GAAnD;AACA;AACD;;;AACUM,QAAAA,sBAAsB,CAAC1I,KAAD,EAAeqH,QAAf,EAAgC;AAAA,cAA/BrH,KAA+B;AAA/BA,YAAAA,KAA+B,GAAvB,IAAuB;AAAA;;AAAA,cAAjBqH,QAAiB;AAAjBA,YAAAA,QAAiB,GAAN,IAAM;AAAA;;AAC/D,gBAAMqB,sBAAN,CAA6B1I,KAA7B,EAAoCqH,QAApC;AACA;AAAA;AAAA,sCAAUpI,WAAV,GAAwBwJ,iBAAxB,CAA0C;AAAA;AAAA,gCAAOxC,IAAP,CAAY0C,UAAZ,EAA1C;AACA,SA3PgD,CA4PjD;AACA;AACA;AACA;AACA;;;AACUzF,QAAAA,eAAe,CAAClD,KAAD,EAAeyF,IAAf,EAAkD;AAAA,cAAjDzF,KAAiD;AAAjDA,YAAAA,KAAiD,GAAzC,IAAyC;AAAA;;AAAA,cAAnCyF,IAAmC;AAAnCA,YAAAA,IAAmC,GAAZ,IAAY;AAAA;;AAC1E,eAAKC,IAAL,CAAUD,IAAV,EAAgB,UAAhB;AACA;AAAA;AAAA,kCAAQxG,WAAR,GAAsB2J,QAAtB,GAAiCnD,IAAjC;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUwC,sBAAhC,EAAwDpD,IAAxD;AACA;;AAES7E,QAAAA,mBAAmB,CAACZ,KAAD,EAAeyF,IAAf,EAA4C;AAAA,cAA3CzF,KAA2C;AAA3CA,YAAAA,KAA2C,GAAnC,IAAmC;AAAA;;AACxE,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,UAAhB;AACA;AAAA;AAAA,kCAAQxG,WAAR,GAAsB6J,SAAtB,GAAkCrD,IAAlC;AAEA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAU0C,0BAAhC,EAA4DtD,IAAI,CAACuD,UAAjE;AACA;;AAEShI,QAAAA,iBAAiB,CAAChB,KAAD,EAAeyF,IAAf,EAA2C;AAAA,cAA1CzF,KAA0C;AAA1CA,YAAAA,KAA0C,GAAlC,IAAkC;AAAA;;AACrE+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,UAAlB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAY8I,YAAZ,CAAyBxD,IAAzB;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAU6C,wBAAhC,EAA0DzD,IAA1D;AACA;;AAESvE,QAAAA,uBAAuB,CAAClB,KAAD,EAAeyF,IAAf,EAAgD;AAAA,cAA/CzF,KAA+C;AAA/CA,YAAAA,KAA+C,GAAvC,IAAuC;AAAA;;AAChF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,UAAhB;AACAM,UAAAA,OAAO,CAACC,GAAR,CAAY,wCAAwCP,IAApD;AACA;;AAESrE,QAAAA,qBAAqB,CAACpB,KAAD,EAAeyF,IAAf,EAAuC;AAAA,cAAtCzF,KAAsC;AAAtCA,YAAAA,KAAsC,GAA9B,IAA8B;AAAA;;AACrE,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,UAAhB;AACAM,UAAAA,OAAO,CAACC,GAAR,CAAY,sCAAsCP,IAAlD;AACA;;AAESnE,QAAAA,uBAAuB,CAACtB,KAAD,EAAeyF,IAAf,EAAgD;AAAA,cAA/CzF,KAA+C;AAA/CA,YAAAA,KAA+C,GAAvC,IAAuC;AAAA;;AAChF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,YAAhB;AACAM,UAAAA,OAAO,CAACC,GAAR,CAAY,wCAAwCP,IAApD;AACA;;AAESjE,QAAAA,yBAAyB,CAACxB,KAAD,EAAeyF,IAAf,EAA8C;AAAA,cAA7CzF,KAA6C;AAA7CA,YAAAA,KAA6C,GAArC,IAAqC;AAAA;;AAChF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,iCAAhB;AACA;;AACS7D,QAAAA,4BAA4B,CAAC5B,KAAD,EAAeyF,IAAf,EAA6C;AAAA,cAA5CzF,KAA4C;AAA5CA,YAAAA,KAA4C,GAApC,IAAoC;AAAA;;AAClF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,oCAAhB;AACA;;AAES/D,QAAAA,yBAAyB,CAAC1B,KAAD,EAAeyF,IAAf,EAAgD;AAAA,cAA/CzF,KAA+C;AAA/CA,YAAAA,KAA+C,GAAvC,IAAuC;AAAA;;AAClF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,iCAAhB;AACA;;AAES3D,QAAAA,qBAAqB,CAAC9B,KAAD,EAAeyF,IAAf,EAA6C;AAAA,cAA5CzF,KAA4C;AAA5CA,YAAAA,KAA4C,GAApC,IAAoC;AAAA;;AAC3E,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,6BAAhB;AACAM,UAAAA,OAAO,CAACC,GAAR,CAAY,sCAAsCP,IAAlD;AACA;;AAESzD,QAAAA,uBAAuB,CAAChC,KAAD,EAAeyF,IAAf,EAAiD;AAAA,cAAhDzF,KAAgD;AAAhDA,YAAAA,KAAgD,GAAxC,IAAwC;AAAA;;AACjF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,+BAAhB;AACAM,UAAAA,OAAO,CAACC,GAAR,CAAY,wCAAwCP,IAApD;AACA;;AAESvD,QAAAA,yBAAyB,CAAClC,KAAD,EAAeyF,IAAf,EAAmD;AAAA,cAAlDzF,KAAkD;AAAlDA,YAAAA,KAAkD,GAA1C,IAA0C;AAAA;;AACrF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,iCAAhB;AACA;;AAESrD,QAAAA,iBAAiB,CAACpC,KAAD,EAAeyF,IAAf,EAA2C;AAAA,cAA1CzF,KAA0C;AAA1CA,YAAAA,KAA0C,GAAlC,IAAkC;AAAA;;AACrE,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,yBAAhB;AACA;;AAESnD,QAAAA,yBAAyB,CAACtC,KAAD,EAAeyF,IAAf,EAAmD;AAAA,cAAlDzF,KAAkD;AAAlDA,YAAAA,KAAkD,GAA1C,IAA0C;AAAA;;AACrF+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,iCAAlB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAYgJ,kBAAZ,CAA+B1D,IAA/B;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUmB,wBAAhC;AACA;;AAEShF,QAAAA,yBAAyB,CAACxC,KAAD,EAAeyF,IAAf,EAAmD;AAAA,cAAlDzF,KAAkD;AAAlDA,YAAAA,KAAkD,GAA1C,IAA0C;AAAA;;AACrF+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,iCAAlB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAYiJ,wBAAZ,CAAqC3D,IAArC;AACA;;AAES/C,QAAAA,iBAAiB,CAAC1C,KAAD,EAAeyF,IAAf,EAA2C;AAAA,cAA1CzF,KAA0C;AAA1CA,YAAAA,KAA0C,GAAlC,IAAkC;AAAA;;AACrE+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,UAAlB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAYkJ,cAAZ,CAA2B5D,IAA3B;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUiD,wBAAhC,EAA0D7D,IAA1D;AAEA;;AAES7C,QAAAA,4BAA4B,CAAC5C,KAAD,EAAeyF,IAAf,EAAkD;AAAA,cAAjDzF,KAAiD;AAAjDA,YAAAA,KAAiD,GAAzC,IAAyC;AAAA;;AACvF+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,oCAAlB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAYoJ,mBAAZ,CAAgC9D,IAAhC;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUmD,uBAAhC,EAAyD/D,IAAzD;AAEA;;AAES3C,QAAAA,sBAAsB,CAAC9C,KAAD,EAAeyF,IAAf,EAA4C;AAAA,cAA3CzF,KAA2C;AAA3CA,YAAAA,KAA2C,GAAnC,IAAmC;AAAA;;AAC3E+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,8BAAlB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAYsJ,aAAZ,CAA0BhE,IAA1B;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUqD,mBAAhC,EAAqDjE,IAArD;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAUsD,YAAhC;AACA;;AAES3G,QAAAA,iBAAiB,CAAChD,KAAD,EAAeyF,IAAf,EAA+C;AAAA,cAA9CzF,KAA8C;AAA9CA,YAAAA,KAA8C,GAAtC,IAAsC;AAAA;;AACzE,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,yBAAhB;AACA;;AAESrC,QAAAA,oBAAoB,CAACpD,KAAD,EAAeyF,IAAf,EAA4C;AAAA,cAA3CzF,KAA2C;AAA3CA,YAAAA,KAA2C,GAAnC,IAAmC;AAAA;;AACzE,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,4BAAhB;AACA;;AAESnC,QAAAA,oBAAoB,CAACtD,KAAD,EAAeyF,IAAf,EAAiD;AAAA,cAAhDzF,KAAgD;AAAhDA,YAAAA,KAAgD,GAAxC,IAAwC;AAAA;;AAC9E,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,4BAAhB;AACA;;AAESjC,QAAAA,sBAAsB,CAACxD,KAAD,EAAeyF,IAAf,EAAgD;AAAA,cAA/CzF,KAA+C;AAA/CA,YAAAA,KAA+C,GAAvC,IAAuC;AAAA;;AAC/E,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,8BAAhB;AACA;;AAES/B,QAAAA,eAAe,CAAC1D,KAAD,EAAeyF,IAAf,EAAyC;AAAA,cAAxCzF,KAAwC;AAAxCA,YAAAA,KAAwC,GAAhC,IAAgC;AAAA;;AACjE;AACA+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,8BAAlB;AACA;;AAES7B,QAAAA,mBAAmB,CAAC5D,KAAD,EAAeyF,IAAf,EAA6C;AAAA,cAA5CzF,KAA4C;AAA5CA,YAAAA,KAA4C,GAApC,IAAoC;AAAA;;AACzE;AACA+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,2BAAlB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAYyJ,kBAAZ,CAA+BnE,IAA/B;;AACA,cAAI;AAAA;AAAA,sCAAUxG,WAAV,GAAwB4K,UAAxB,KAAuC,cAA3C,EAA2D;AAC1D;AAAA;AAAA,8CAAaxD,QAAb,CAAsB;AAAA;AAAA,sCAASyD,eAA/B,EAAgD;AAAA;AAAA,oCAAQC,gBAAxD;AACA;AACD;;AAESjG,QAAAA,kBAAkB,CAAC9D,KAAD,EAAeyF,IAAf,EAA4C;AAAA,cAA3CzF,KAA2C;AAA3CA,YAAAA,KAA2C,GAAnC,IAAmC;AAAA;;AACvE+F,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAAkB,UAAlB;AACA;AAAA;AAAA,sCAAUxG,WAAV,GAAwB+K,eAAxB,CAAwCvE,IAAxC;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAU4D,wBAAhC,EAA0DxE,IAA1D;AACA;;AAESzB,QAAAA,6BAA6B,CAAChE,KAAD,EAAeyF,IAAf,EAA4C;AAAA,cAA3CzF,KAA2C;AAA3CA,YAAAA,KAA2C,GAAnC,IAAmC;AAAA;;AAClF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,qCAAhB;AACA;AAAA;AAAA,gCAAOtF,IAAP,CAAY+J,oBAAZ,CAAiCzE,IAAjC;AACA;AAAA;AAAA,4CAAaY,QAAb,CAAsB;AAAA;AAAA,sCAAU8D,8BAAhC,EAAgE1E,IAAhE;AACA;;AAESvB,QAAAA,0BAA0B,CAAClE,KAAD,EAAeyF,IAAf,EAAoD;AAAA,cAAnDzF,KAAmD;AAAnDA,YAAAA,KAAmD,GAA3C,IAA2C;AAAA;;AACvF;AACA;AAAA;AAAA,sCAAUf,WAAV,GAAwBmL,iBAAxB,CAA0C3E,IAAI,CAAC4E,MAA/C;AACA;AAAA;AAAA,sCAAUpL,WAAV,GAAwBqL,UAAxB,CAAmCC,OAAnC,CAA2CC,MAAM,IAAI;AACpD;AAAA;AAAA,8CAAanE,QAAb,CAAsB;AAAA;AAAA,sCAASoE,2BAA/B,EAA4DD,MAAM,CAAC1C,MAAnE;AACA,WAFD;AAGA;;AAES1D,QAAAA,4BAA4B,CAACpE,KAAD,EAAeyF,IAAf,EAAsD;AAAA,cAArDzF,KAAqD;AAArDA,YAAAA,KAAqD,GAA7C,IAA6C;AAAA;;AAC3F+F,UAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ,EAAwDP,IAAxD;AACA;;AAESnB,QAAAA,kBAAkB,CAACtE,KAAD,EAAeyF,IAAf,EAA2C;AAAA,cAA1CzF,KAA0C;AAA1CA,YAAAA,KAA0C,GAAlC,IAAkC;AAAA;;AACtE,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,WAAhB;AACA;AAAA;AAAA,kCAAQxG,WAAR,GAAsB6J,SAAtB,GAAkCrD,IAAlC;AACA;;AAESjB,QAAAA,yBAAyB,CAACxE,KAAD,EAAeyF,IAAf,EAA+C;AAAA,cAA9CzF,KAA8C;AAA9CA,YAAAA,KAA8C,GAAtC,IAAsC;AAAA;;AACjF,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,iCAAhB;AACA;;AAESf,QAAAA,sBAAsB,CAAC1E,KAAD,EAAeyF,IAAf,EAA+C;AAAA,cAA9CzF,KAA8C;AAA9CA,YAAAA,KAA8C,GAAtC,IAAsC;AAAA;;AAC9E,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,8BAAhB;AACA;;AAESb,QAAAA,qBAAqB,CAAC5E,KAAD,EAAeyF,IAAf,EAA6C;AAAA,cAA5CzF,KAA4C;AAA5CA,YAAAA,KAA4C,GAApC,IAAoC;AAAA;;AAC3E,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,6BAAhB;AAEA;;AACSX,QAAAA,sBAAsB,CAAC9E,KAAD,EAAeyF,IAAf,EAA4C;AAAA,cAA3CzF,KAA2C;AAA3CA,YAAAA,KAA2C,GAAnC,IAAmC;AAAA;;AAC3E,eAAK0F,IAAL,CAAUD,IAAV,EAAgB,8BAAhB;AACA;AACD;;;AACUiF,QAAAA,mBAAmB,CAAC1K,KAAD,EAAeqH,QAAf,EAAgC;AAAA,cAA/BrH,KAA+B;AAA/BA,YAAAA,KAA+B,GAAvB,IAAuB;AAAA;;AAAA,cAAjBqH,QAAiB;AAAjBA,YAAAA,QAAiB,GAAN,IAAM;AAAA;;AAC5D,gBAAMqD,mBAAN;AACA3E,UAAAA,OAAO,CAACC,GAAR,CAAYqB,QAAZ,EAAsB,YAAtB;AACA;AAAA;AAAA,4CAAahB,QAAb,CAAsB;AAAA;AAAA,sCAAUsE,qBAAhC,EAAuDtD,QAAvD;AACA;AAED;;;AACUuD,QAAAA,mBAAmB,CAAC5K,KAAD,EAAeqH,QAAf,EAAgC;AAAA,cAA/BrH,KAA+B;AAA/BA,YAAAA,KAA+B,GAAvB,IAAuB;AAAA;;AAAA,cAAjBqH,QAAiB;AAAjBA,YAAAA,QAAiB,GAAN,IAAM;AAAA;;AAC5D,gBAAMuD,mBAAN;AACA7E,UAAAA,OAAO,CAACC,GAAR,CAAYqB,QAAZ,EAAsB,iBAAtB;;AACA,cAAIA,QAAJ,EAAc;AACb,gBAAIwD,GAAG,GAAG;AAAA;AAAA,oCAAQC,UAAR,CAAmBzD,QAAQ,CAAC,KAAD,CAA3B,CAAV;;AACA,gBAAIwD,GAAG,IAAIA,GAAG,CAAC,MAAD,CAAV,IAAsBA,GAAG,CAAC,IAAD,CAA7B,EAAqC;AACpC,kBAAIE,KAAK,GAAG1D,QAAQ,CAAC,OAAD,CAApB;AACA,kBAAIe,GAAG,GAAGf,QAAQ,CAAC,KAAD,CAAlB;AACA,kBAAI2D,OAAO,GAAG;AAAA;AAAA,kCAAMC,cAAN,CAAqBJ,GAAG,CAAC,MAAD,CAAxB,EAAkC,CAAlC,CAAd;AACA,kBAAIK,KAAK,GAAG;AAAA;AAAA,kCAAMD,cAAN,CAAqBJ,GAAG,CAAC,IAAD,CAAxB,EAAgC,CAAhC,CAAZ;;AACA,kBAAIG,OAAO,GAAG,CAAV,IAAeE,KAAK,GAAG,CAAvB,IAA4BH,KAAK,GAAG,CAAxC,EAA2C;AAC1C,oBAAII,SAAS,GAAG;AAAA;AAAA,gDAAYC,SAAZ,CAAsB,CAAtB,EAAyBC,MAAzC;AACA,oBAAIC,SAAS,GAAG;AAAA;AAAA,gDAAYF,SAAZ,CAAsB;AAAA;AAAA,gDAAYA,SAAZ,CAAsBG,MAAtB,GAA+B,CAArD,EAAwDF,MAAxE;;AACA,oBAAIN,KAAK,GAAGI,SAAR,IAAqBJ,KAAK,GAAGO,SAAjC,EAA4C;AAC3CvF,kBAAAA,OAAO,CAACyF,IAAR,CAAa,qBAAb,EAAoCnE,QAApC;AACA;AACA,iBANyC,CAO1C;;;AACA,oBAAIb,IAAI,GAAG;AAAEiF,kBAAAA,GAAG,EAAET,OAAP;AAAgBU,kBAAAA,OAAO,EAAEX,KAAzB;AAAgCY,kBAAAA,MAAM,EAAET;AAAxC,iBAAX;AACAnF,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BqB,QAA/B,EAAyCb,IAAzC;AACA;AAAA;AAAA,kDAAaH,QAAb,CAAsB;AAAA;AAAA,0CAASuF,kBAA/B,EAAmD;AAAA;AAAA,gDAAYC,UAAZ,CAAuBC,UAA1E,EAAsFtF,IAAtF;AACA;AACD,aAjBD,MAiBO;AACN;AAAA;AAAA,gDAAaH,QAAb,CAAsB;AAAA;AAAA,wCAAS0F,qBAA/B,EAAsD1E,QAAtD;AACA;AAKD;AACD;;AAhdgD,O","sourcesContent":["/** \n * Name = FXJController\n * URL = db://assets/package/game/common/FXJController.ts\n * Time = Mon Jul 24 2023 18:46:09 GMT+0800 (中国标准时间)\n * Author = xueya\n * 游戏主控制器\n */\n\nimport { GCache } from \"../../../cache/GCache\";\nimport { Encrypt } from \"../../../framework/crypto/Encrypto\";\nimport { EventManager } from \"../../../framework/manager/EventManager\";\nimport { Utils } from \"../../../framework/Utils\";\nimport { RoomController } from \"../../../proj/RoomController\";\nimport { PlayerMgr } from \"../cache/PlayerMgr\";\nimport { Room } from \"../cache/Room\";\nimport { RoomMgr } from \"../cache/RoomMgr\";\nimport { SettleMgr } from \"../cache/SettleMgr\";\nimport { FXJCMDHead } from \"../net/FXJCmd\";\nimport { FXJWriteAndRead } from \"../net/FXJWriteAndRead\";\nimport { GameDeskPrefabCtr } from \"../scripts/GameDeskPrefabCtr\";\nimport { GameScenePrefabCtr } from \"../scripts/GameScenePrefabCtr\";\nimport { OPCode } from \"./FXJConfig\";\nimport { FXJConstant } from \"./FXJConstant\";\nimport { FXJEvent } from \"./FXJEvent\";\nimport { FXJObserver } from \"./FXJObserver\";\nimport { FXJUIID } from \"./FXJRes\";\nimport { GameEvent } from \"./GameEvent\";\nimport { Common } from \"./idl/Common\";\nimport { Game } from \"./idl/Game\";\nimport { ChatServer } from \"./server/ChatServer\";\nimport { RoundServer } from \"./server/RoundServer\";\nimport { SettleServer } from \"./server/SettleServer\";\n\nexport class FXJController extends RoomController {\n\n\tpublic static getInstance(): FXJController {\n\t\tif (!this._instance || this._instance == null) {\n\t\t\tthis._instance = new FXJController(\"FXJController\");\n\t\t}\n\t\treturn this._instance;\n\t}\n\tpublic static init(): FXJController {\n\t\tif (this._instance) {\n\t\t\tthis._instance.clear();\n\t\t}\n\t\tthis._instance = null\n\t\tFXJController.getInstance();\n\t\treturn\n\t}\n\n\tpublic clear() {\n\t\tthis.print(\"[ FXJController ]clear 清理 重置所有定时器\");\n\t\tthis.__clearServerClass();\n\t\tsuper.clear()\n\t\tFXJController._instance = null;\n\t}\n\n\t/** 场景组件 */\n\tpublic GameSceneCtr: GameScenePrefabCtr = null;\n\t/** 桌子组件 */\n\tpublic GameDeskCtr: GameDeskPrefabCtr = null;\n\t/** 局服务 */\n\tpublic RoundServer: RoundServer = null;\n\t/** 结算服务 */\n\tpublic SettleServer: SettleServer = null;\n\t/** 聊天服务 */\n\tpublic ChatServer: ChatServer = null;\n\t/** 结算服务 */\n\tpublic fxjObserver: FXJObserver = null;\n\t//实例化\n\tconstructor(name: string) {\n\t\tsuper(name)\n\t};\n\n\t/** override:加载模块 */\n\tprotected onInit(): void {\n\t\tsuper.onInit();\n\t\t// 设置GameMgr中 GameDelegate的代理\n\n\t\tFXJWriteAndRead.getInstance().initPB();\n\t\tFXJWriteAndRead.getInstance().initCMDMapping();\n\t}\n\t/** override:场景加载/界面强制重新刷新 */\n\tpublic onViewLoad(event = null): void {\n\t\tGCache.setDesk(Room);\n\t\tthis._deskCache = GCache.Desk;\n\t\tthis.fxjObserver = new FXJObserver();\n\t\tPlayerMgr.getInstance().addObserver(this.fxjObserver);\n\t\tRoomMgr.getInstance().addObserver(this.fxjObserver);\n\t\tthis.__initModuleEvent();\n\t\tthis.__initServerClass();\n\t\tsuper.onViewLoad(event);\n\n\t}\n\n\t// /** 预加载 */\n\t// preloadRes() {\n\t// \tthis.getPreLoaderRes(FXJRes.Atlas_Game_CardNum.bundle, FXJRes.Atlas_Game_CardNum.path, SpriteAtlas);\n\t// \tthis.getPreLoaderRes(FXJRes.Atlas_Player_Common.bundle, FXJRes.Atlas_Player_Common.path, SpriteAtlas);\n\n\t// }\n\n\t/** 初始化附属类 */\n\tprivate __initServerClass() {\n\t\tthis.__clearServerClass();\n\t\tthis.RoundServer = new RoundServer();\n\t\tthis.SettleServer = new SettleServer();\n\t\tthis.ChatServer = new ChatServer();\n\t}\n\n\t/** 清理附属类 */\n\tpublic __clearServerClass() {\n\t\tif (this.RoundServer) {\n\t\t\tthis.RoundServer.clear();\n\t\t}\n\t\tif (this.SettleServer) {\n\t\t\tthis.SettleServer.clear();\n\t\t}\n\t\tif (this.ChatServer) {\n\t\t\tthis.ChatServer.clear();\n\t\t}\n\t}\n\t/** 是否重连 */\n\tget IsReconn() {\n\t\treturn this._intoGameData?.isReconn;\n\t};\n\t/** 初始化添加事件绑定 */\n\tprivate __initModuleEvent(): void {\n\t\tthis.addModelListener(FXJEvent.BROADCAST_DING_ZHUANG, this.broadcastDingZhuang);\n\t\tthis.addModelListener(FXJEvent.SERVER_BROADCAST_PLAYER_LOGIN, this.serverBroadcastPlayerLogin);\n\t\t// this.addModelListener(FXJEvent.SERVER_BROADCAST_PLAYER_READY, this.serverBroadcastPlayerReady);\n\n\t\tthis.addModelListener(FXJEvent.BROADCAST_GRAB_CARD, this.broadcastGrabCard);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_DINGQUE_OPTIONS, this.broadcastDingQueOptions);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_USER_PIAO_GANG, this.broadcastUserPiaoGang);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_PAOQIAN_OPTIONS, this.broadcastPaoQianOptions);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_ONE_DINGQUE_RESULT, this.broadcastOneDingqueResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_ALL_DINGQUE_RESULT, this.broadcastAllDingqueResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_SHUAIQIANG_RESULT, this.broadcastAllShuaiQiangResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_CHAQUE_RESULT, this.broadcastChaqueResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_MAIDUANMEN_USER, this.broadcastMaiDuanMenUser);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_MAIDUANMEN_RESULT, this.broadcastMaiDuanMenResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_FEN_ZHANG, this.broadcastFenZhang);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_UPDATE_FAN_GANG_PAI, this.broadcastUpdateFanGangPai);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_SELECT_FAN_GANG_PAI, this.broadcastSelectFanGangPai);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_DEAL_CARD, this.broadcastDealCard);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_USER_OPERATION_RESULT, this.broadcastUserOperationResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_USER_OPERATION, this.broadcastUserOperation);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_DING_FENG, this.broadcastDingFeng);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_ZHI_TOU, this.broadcastZhiTou);\n\n\t\tthis.addModelListener(FXJEvent.BROADCAST_DOUBLE_CARDS, this.broadcastDoubleCards);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_REWARD_CARDS, this.broadcastRewardCards);\n\n\t\tthis.addModelListener(FXJEvent.BROADCAST_PLAYING_JI_TYPE, this.broadcastPlayingJiType);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_ZHUO_JI, this.broadcastZhuoJi);\n\n\t\tthis.addModelListener(FXJEvent.BROADCAST_SETTLE, this.broadcastSettleItem);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_HANDCARDS, this.broadcastHandCards);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_BANKER_FIRST_OPERATION, this.broadcastBankerFirstOperation);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_UPDATE_PLAYER_MONEY, this.broadcastUpdatePlayerMoney);\n\n\t\tthis.addModelListener(FXJEvent.BROADCAST_GANG_OPERATION_RESULT, this.broadcastGameOperationResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_DING_LAIZI, this.broadcastDingLaizi);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_TO_WAIT_USER_GIVE_UP, this.broadcastToWaitUserGiveUp);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_XIAZHU_OPTIONS, this.broadcastXiazhuOptions);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_XIAZHU_RESULT, this.broadcastXiazhuResult);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_GEN_ZHUANG_SUCC, this.broadcastGenZhuangSucc);\n\n\t\tthis.addModelListener(FXJEvent.BROADCAST_GAME_OVER, this.broadcastGameOver);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_GAME_START, this.broadcastGameStart);\n\t\tthis.addModelListener(FXJEvent.BROADCAST_FAN_GANG_PAI, this.broadcastFanGangPai);\n\t\t//游戏房间重连成功\n\t\t// this.addModelListener(FXJEvent.BROADCAST_ROOM_RECONNECT, this.broadcastRoomReconnect)\n\n\t\tthis.addModelListener(GameEvent.SEND_PLAYER_OPERATION, this.sendPlayerOpration);\n\t\tthis.addModelListener(GameEvent.NEXT_GAME_OPERATION, this.onNextGameOperation);\n\n\n\t}\n\n\tprotected broadcastGameOver(event = null, resp: Common.IGameState = null): void {\n\t\tthis.dump(resp, \"广播:游戏结束==>\")\n\t\tGCache.Desk.gameOverResult();\n\t\t// this.dump(resp);\n\t}\n\t\n\tprotected onNextGameOperation(event = null) {\n\t\tlet roomInfo = RoomMgr.getInstance().getRoomInfoData(this._intoGameData.GameID);\n\t\tconsole.log(\"onNextGameOperation___________\",GCache.User.getUserSilver(),roomInfo);\n\t\tif(GCache.User.getUserSilver() < 3000){\n\t\t\tconsole.log(\"金币不够了\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (Utils.isNull(PlayerMgr.getInstance().getMyPlayerInfo())) {\n\t\t\tEventManager.dispatch(FXJEvent.NET_REQ_ROOM_LOGIN);\n\t\t} else {\n\t\t\tEventManager.dispatch(GameEvent.SHOW_HIDEN_MATCH_VIEW, true);\n\t\t}\n\t\t// EventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameMatchPrefab,null,{});\n\t}\n\t//操作\n\tprotected sendPlayerOpration(event = null, info: Game.ISendOperation): void {\n\t\tlet sendMsg = {\n\t\t\tcmd: FXJCMDHead.C2S.USER_OPERATION_RESULT,\n\t\t\tbody: info,\n\t\t}\n\t\tGCache.Desk.turnMe = info.opCode === OPCode.OPE_PASS;\n\t\tEventManager.dispatch(FXJEvent.NET_SEND_MSG, sendMsg);\n\t}\n\tprotected broadcastGameStart(event = null, resp: Common.IGameState = null): void {\n\t\tconsole.log(resp, \"广播:游戏开始==>\")\n\t\t// EventManager.dispatch(FXJEvent.GAME_CLOSE_POPUP, FXJUIID.GameMatchPrefab,null,{});\n\t\tEventManager.dispatch(GameEvent.SHOW_HIDEN_MATCH_VIEW, false);\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_GAME_START);\n\t}\n\tprotected reqEnterGameLogin(event = null) {\n\t\tsuper.reqEnterGameLogin(event);\n\t}\n\t/** override:重连成功 */\n\tprotected receiveReConnectSuccess(event = null, respData: Game.IUserLoginRoom = null) {\n\t\tsuper.receiveReConnectSuccess(event, respData);\n\t\tconsole.log(\"重连成功___________________________\", respData);\n\t\tGCache.Desk.reconnectionRoomUpdate(respData);\n\t\tEventManager.dispatch(GameEvent.ENTER_ROOM_UPDATE_PLAYER);\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_GAME_START);\n\t\tEventManager.dispatch(GameEvent.VIEW_UPDATE_FAN_GANG_PAI);\n\t\tif (!PlayerMgr.getInstance().getMyPlayerInfo().isReady) {\n\t\t\tEventManager.dispatch(GameEvent.SHOW_HIDEN_MATCH_VIEW, true);\n\t\t\t// EventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameMatchPrefab,null,{});\n\t\t}\n\n\t}\n\n\t/** override:房间登录成功 */\n\tprotected receiveLoginRoomSuccess(event = null, respData: Game.IUserReconnect = null) {\n\t\tsuper.receiveLoginRoomSuccess(event, respData);\n\t\tconsole.log(\"房间登录成功___________________________\", respData);\n\t\tGCache.Desk.enterRoomUpdate(respData);\n\t\tEventManager.dispatch(GameEvent.ENTER_ROOM_UPDATE_PLAYER);\n\t\tif (!PlayerMgr.getInstance().getMyPlayerInfo().isReady) {\n\t\t\tEventManager.dispatch(GameEvent.SHOW_HIDEN_MATCH_VIEW, true);\n\t\t\t// EventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameMatchPrefab,null,{});\n\t\t}\n\t}\n\n\t/** override:广播玩家登录房间 */\n\tprotected serverBroadcastPlayerLogin(event = null, resp: Common.IPlayerInfo = null): void {\n\t\tconsole.log(resp, \"serverBroadcastPlayerLogin==>\");\n\t\tPlayerMgr.getInstance().addPlayerList(resp);\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_PLAYER_ENTER, resp.userId);\n\t}\n\n\tprotected receivePlayerReady(event = null, respData = null) {\n\t\tsuper.receivePlayerReady(event, respData);\n\t\tconsole.log(respData, \"广播:玩家准备==>\");\n\t\tPlayerMgr.getInstance().updatePlayerReadyStatus(respData.userId);\n\n\t}\n\n\tprotected broadcastFanGangPai(event = null, respData: Game.IFanGangPai = null) {\n\t\tconsole.log(respData, \"broadcastFanGangPai补杠==>\");\n\t\tEventManager.dispatch(GameEvent.VIEW_UPDATE_BU_GANG_PAI, respData);\n\t}\n\n\tprotected receiveGamePlayerAI(event = null, respData = null) {\n\t\tsuper.receiveGamePlayerAI(event, respData);\n\t\tconsole.log(respData, \"有玩家托管了==>\");\n\t\tPlayerMgr.getInstance().updatePlayerAiStatus(respData.mid, respData.ai);\n\t\tEventManager.dispatch(GameEvent.VIEW_PLAYER_AI_SHOW, respData);\n\t}\n\n\t/** override:广播玩家退出房间 */\n\tprotected receivePlayerLogOut(event = null, respData = null) {\n\t\tsuper.receivePlayerLogOut(event, respData);\n\t\tconsole.log(respData, \"广播:玩家退出==>\");\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_PLAYER_EXIT, respData.mid);\n\t\tPlayerMgr.getInstance().deletePlayerLeave(respData.mid);\n\t}\n\t/** 广播:退出游戏房间成功 */\n\tprotected receiveExitRoomSuccess(event = null, respData = null) {\n\t\tsuper.receiveExitRoomSuccess(event, respData);\n\t\tPlayerMgr.getInstance().deletePlayerLeave(GCache.User.getUserMid());\n\t}\n\t// protected serverBroadcastPlayerReady(event = null, resp = null ): void{\n\t// \tconsole.log(\"serverBroadcastPlayerReady::::::::::::\"+resp);\n\t// PlayerMgr.getInstance().addPlayerList(resp);\n\t// console.log(\"serverBroadcastPlayerReady::::::::::::\"+PlayerMgr.getInstance().playerList);\n\t// }\n\tprotected broadcastZhiTou(event = null, resp: Game.IRollDice = null): void {\n\t\tthis.dump(resp, \"广播:掷投==>\")\n\t\tRoomMgr.getInstance().rollDice = resp;\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_ZHI_TOU, resp);\n\t}\n\n\tprotected broadcastDingZhuang(event = null, resp: Game.IFixBanker): void {\n\t\tthis.dump(resp, \"广播:定庄==>\")\n\t\tRoomMgr.getInstance().laiziInfo = resp;\n\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_DING_ZHUANG, resp.bankSeatId);\n\t}\n\n\tprotected broadcastGrabCard(event = null, resp: Game.IGrabCard): void {\n\t\tconsole.log(resp, \"广播:出牌==>\")\n\t\tGCache.Desk.gameGrabCard(resp);\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_GRAB_CARD, resp);\n\t}\n\n\tprotected broadcastDingQueOptions(event = null, resp: Game.IDingQueOption): void {\n\t\tthis.dump(resp, \"广播:定缺==>\")\n\t\tconsole.log(\"broadcastDingQueOptions::::::::::::\" + resp)\n\t}\n\n\tprotected broadcastUserPiaoGang(event = null, resp: Game.IGang): void {\n\t\tthis.dump(resp, \"广播:飘杠==>\")\n\t\tconsole.log(\"broadcastUserPiaoGang::::::::::::\" + resp)\n\t}\n\n\tprotected broadcastPaoQianOptions(event = null, resp: Game.IPaoQianOption): void {\n\t\tthis.dump(resp, \"广播:飘缺选项==>\")\n\t\tconsole.log(\"broadcastPaoQianOptions::::::::::::\" + resp)\n\t}\n\n\tprotected broadcastOneDingqueResult(event = null, resp: Game.IUserDingQue): void {\n\t\tthis.dump(resp, \"广播:broadcastOneDingqueResult==>\")\n\t}\n\tprotected broadcastAllShuaiQiangResult(event = null, resp: Game.IShuaiQiang): void {\n\t\tthis.dump(resp, \"广播:broadcastAllShuaiQiangResult==>\")\n\t}\n\n\tprotected broadcastAllDingqueResult(event = null, resp: Game.IDingQueResult): void {\n\t\tthis.dump(resp, \"广播:broadcastAllDingqueResult==>\")\n\t}\n\n\tprotected broadcastChaqueResult(event = null, resp: Game.IUserChaQue): void {\n\t\tthis.dump(resp, \"广播:broadcastChaqueResult==>\")\n\t\tconsole.log(\"broadcastChaqueResult::::::::::::\" + resp)\n\t}\n\n\tprotected broadcastMaiDuanMenUser(event = null, resp: Game.IMaiDuanMenUser): void {\n\t\tthis.dump(resp, \"广播:broadcastMaiDuanMenUser==>\")\n\t\tconsole.log(\"broadcastMaiDuanMenUser::::::::::::\" + resp)\n\t}\n\n\tprotected broadcastMaiDuanMenResult(event = null, resp: Game.IMaiDuanMenResult): void {\n\t\tthis.dump(resp, \"广播:broadcastMaiDuanMenResult==>\")\n\t}\n\n\tprotected broadcastFenZhang(event = null, resp: Game.IFenZhang): void {\n\t\tthis.dump(resp, \"广播:broadcastFenZhang==>\")\n\t}\n\n\tprotected broadcastUpdateFanGangPai(event = null, resp: Game.IUpdateFanGangPai): void {\n\t\tconsole.log(resp, \"广播:broadcastUpdateFanGangPai==>\")\n\t\tGCache.Desk.updateFanGangCards(resp);\n\t\tEventManager.dispatch(GameEvent.VIEW_UPDATE_FAN_GANG_PAI);\n\t}\n\n\tprotected broadcastSelectFanGangPai(event = null, resp: Game.ISelectFanGangPai): void {\n\t\tconsole.log(resp, \"广播:broadcastSelectFanGangPai==>\")\n\t\tGCache.Desk.updateSelectFanGangCards(resp);\n\t}\n\n\tprotected broadcastDealCard(event = null, resp: Game.IDealCard): void {\n\t\tconsole.log(resp, \"广播:分牌==>\")\n\t\tGCache.Desk.dealCardUpdate(resp);\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_DEAL_CARD, resp);\n\n\t}\n\n\tprotected broadcastUserOperationResult(event = null, resp: Game.IOperationResult): void {\n\t\tconsole.log(resp, \"广播:broadcastUserOperationResult==>\")\n\t\tGCache.Desk.userOperationResult(resp);\n\t\tEventManager.dispatch(GameEvent.UPDATE_OPERATION_RESULT, resp);\n\n\t}\n\n\tprotected broadcastUserOperation(event = null, resp: Game.IOperation): void {\n\t\tconsole.log(resp, \"广播:broadcastUserOperation==>\")\n\t\tGCache.Desk.userOperation(resp);\n\t\tEventManager.dispatch(GameEvent.VIEW_USER_OPERATION, resp);\n\t\tEventManager.dispatch(GameEvent.DRAW_MY_CARD)\n\t}\n\n\tprotected broadcastDingFeng(event = null, resp: Game.IQuanfengInfo): void {\n\t\tthis.dump(resp, \"广播:broadcastDingFeng==>\")\n\t}\n\n\tprotected broadcastDoubleCards(event = null, resp: Game.IChouJiang): void {\n\t\tthis.dump(resp, \"广播:broadcastDoubleCards==>\")\n\t}\n\n\tprotected broadcastRewardCards(event = null, resp: Game.IChouJiangCards): void {\n\t\tthis.dump(resp, \"广播:broadcastRewardCards==>\")\n\t}\n\n\tprotected broadcastPlayingJiType(event = null, resp: Game.IPlayingJiType): void {\n\t\tthis.dump(resp, \"广播:broadcastPlayingJiType==>\")\n\t}\n\n\tprotected broadcastZhuoJi(event = null, resp: Game.IZhuoJi): void {\n\t\t// this.dump(resp, \"广播:broadcastZhuoJi==>\")\n\t\tconsole.log(resp, \"广播:broadcastUserOperation==>\")\n\t}\n\n\tprotected broadcastSettleItem(event = null, resp: Game.ISettleItem): void {\n\t\t// this.dump(resp, \"广播:broadcastSettleItem==>\")\n\t\tconsole.log(resp, \"广播:broadcastSettleItem==>\")\n\t\tGCache.Desk.updateSettleResult(resp);\n\t\tif (SettleMgr.getInstance().settleType === \"huang_zhuang\") {\n\t\t\tEventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameSettlePrefab);\n\t\t}\n\t}\n\n\tprotected broadcastHandCards(event = null, resp: Game.IHandCards): void {\n\t\tconsole.log(resp, \"广播:手牌==>\")\n\t\tPlayerMgr.getInstance().updateHandCards(resp);\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_GAME_OVER, resp);\n\t}\n\n\tprotected broadcastBankerFirstOperation(event = null, resp: Game.IFixBanker): void {\n\t\tthis.dump(resp, \"广播:broadcastBankerFirstOperation==>\")\n\t\tGCache.Desk.bankerFirstOperation(resp);\n\t\tEventManager.dispatch(GameEvent.VIEW_BROADCAST_OPERATION_START, resp);\n\t}\n\n\tprotected broadcastUpdatePlayerMoney(event = null, resp: Game.IUpdatePlayerMoney): void {\n\t\t// this.dump(resp, \"广播:更新玩家钱==>\")\n\t\tPlayerMgr.getInstance().updatePlayerMoney(resp.moneys);\n\t\tPlayerMgr.getInstance().playerList.forEach(player => {\n\t\t\tEventManager.dispatch(FXJEvent.VIEW_PLAYER_UPDATE_PROPERTY, player.userId);\n\t\t});\n\t}\n\n\tprotected broadcastGameOperationResult(event = null, resp: Game.IgangOperationResult): void {\n\t\tconsole.log(\"broadcastGameOperationResult::::::::::::\", resp)\n\t}\n\n\tprotected broadcastDingLaizi(event = null, resp: Game.IFixLaizi): void {\n\t\tthis.dump(resp, \"广播:定癞子==>\")\n\t\tRoomMgr.getInstance().laiziInfo = resp;\n\t}\n\n\tprotected broadcastToWaitUserGiveUp(event = null, resp: Game.IToWaitGiveup): void {\n\t\tthis.dump(resp, \"广播:broadcastToWaitUserGiveUp==>\")\n\t}\n\n\tprotected broadcastXiazhuOptions(event = null, resp: Game.IXiaZhuOption): void {\n\t\tthis.dump(resp, \"广播:broadcastXiazhuOptions==>\")\n\t}\n\n\tprotected broadcastXiazhuResult(event = null, resp: Game.IUserXiaZhu): void {\n\t\tthis.dump(resp, \"广播:broadcastXiazhuResult==>\")\n\n\t}\n\tprotected broadcastGenZhuangSucc(event = null, resp: Game.IFixBanker): void {\n\t\tthis.dump(resp, \"广播:broadcastGenZhuangSucc==>\")\n\t}\n\t/**广播: 表情 */\n\tprotected receiveGameUserFace(event = null, respData = null) {\n\t\tsuper.receiveGameUserFace();\n\t\tconsole.log(respData, \"有玩家发表情了==>\")\n\t\tEventManager.dispatch(GameEvent.VIEW_PLAYER_EMOJ_SHOW, respData);\n\t}\n\n\t/**广播: 聊天 */\n\tprotected receiveGameUserChat(event = null, respData = null) {\n\t\tsuper.receiveGameUserChat();\n\t\tconsole.log(respData, \"有玩家发聊天消息了==>FXJ\")\n\t\tif (respData) {\n\t\t\tlet msg = Encrypt.JsonDecode(respData['msg'])\n\t\t\tif (msg && msg['from'] && msg['to']) {\n\t\t\t\tlet index = respData['index'];\n\t\t\t\tlet mid = respData['mid'];\n\t\t\t\tlet fromUid = Utils.number_valueOf(msg['from'], 0);\n\t\t\t\tlet toUid = Utils.number_valueOf(msg['to'], 0);\n\t\t\t\tif (fromUid > 0 && toUid > 0 && index > 0) {\n\t\t\t\t\tlet minPorpID = FXJConstant.EmojiProp[0].propID;\n\t\t\t\t\tlet maxPorpID = FXJConstant.EmojiProp[FXJConstant.EmojiProp.length - 1].propID;\n\t\t\t\t\tif (index < minPorpID || index > maxPorpID) {\n\t\t\t\t\t\tconsole.warn(\"Err:收到道具消息，不支持的道具信息\", respData);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// 格式:uid: 10086089, prop_id: 3, to_uid: 10086845\n\t\t\t\t\tlet info = { uid: fromUid, prop_id: index, to_uid: toUid };\n\t\t\t\t\tconsole.log(\"有玩家发互动道具了==>FXJ\", respData, info);\n\t\t\t\t\tEventManager.dispatch(FXJEvent.VIEW_DESK_ANI_PLAY, FXJConstant.AnimNormal.HudongProp, info);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tEventManager.dispatch(FXJEvent.VIEW_PLAYER_CHAT_SHOW, respData);\n\t\t\t}\n\n\n\n\n\t\t}\n\t}\n}\n\n"]}
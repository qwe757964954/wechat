{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/proj/servers/RecommendPopServers.ts"],"names":["RecommendPopServers","GCache","AppEvent","GConstants","UIID","EventManager","Utils","BaseControll","GlobalCMD","PopupServers","getInstance","_instance","constructor","name","_popUpResult","_popUIDQueue","_currowPosID","_delayPosID","_checkPosData","_curCheckPosData","_curMainLayer","_allCloseCallback","_noResultTip","PopupID_UIIDMap","PopupIds","SIGNIN","SigninPrefab","ckFunc","FIRSTPAY_ACTIVITY","FirstPayPrefab","HOLIDAY_ACTIVITY","GiftDiscountPrefab","ACTIVITY_CENTER","AtyCenterPrefab","init","clear","onInitModuleEvent","addModelListener","RECOMMEND_POP_SET_CALLBACK","setCloseAllFunc","RECOMMEND_POP_SET_NO_TIP","setNoTip","RECOMMEND_POP_OPEN_VIEW","openViewQuene","RECOMMEND_POP_CLEAN_QUENE","cleanViewQuene","RECOMMEND_POP_GET","getRecommend","NET_CMD_RESP_POP_ADVERTISE","getRespcommend","reqPopAdvByPos","popupPos","params","popData","getPopData","table_isEmpty","console","log","getRecommendAllPopData","reqData","cmd","PHP_ACTIVITY_MODAL_POPUP","body","dispatch","NET_SEND_MSG","currentData","currowMax","PopupPos","POS_LOGIN","RecommendPop","getIntoHallPropData","getIntoHallPopTime","POS_INTO_ROOM","getIntoGamePropData","getIntoGamePopTime","event","id","data","isDelay","MainLayerCode","mainCode","noResultTip","allCloseCallFunc","isCheck","getDelayRecommend","callback","tips","isSuccess","respData","updatePopData","_cur_pos","print","String","checkPos","clone","checkRecommendPopup","pData","Array","length","maxLen","notKeepPopList","i","currowPopData","info","alrCheckInfo","m","checkPopDayCount","push","oldLength","splice","showRecommendPopup","SYS_CLOSE_NETLOADING","SYS_TOAST_TIP","content","self","showPopup","uiid","_checkRepeatUIID","toolid","mainlayer","uIID","finishCallback","curMainLayer","SYS_SHOW_NETLOADING","VIEW_UI_OPEN","onAdded","node","viewParams","updatePopDayCountData","onRemoved","checkSignin","isShow","RedDot","has_reddot_signin","checkHoliday","need_show_holiday","checkFirstPay","need_show_gift_firstpay","checkAcvitity","has_reddot_activityNormal"],"mappings":"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","sourcesContent":["/**\n * Name = RecommendPopServers\n * URL = db://assets/proj/servers/RecommendPopServers.ts\n * Time = Wed Jun 22 2022 19:03:18 GMT+0800 (中国标准时间)\n * Author = xueya\n * 推荐弹窗服务与管理\n */\n\nimport { GCache } from \"../../cache/GCache\";\nimport { AppEvent } from \"../../config/AppEvent\";\nimport { GConstants } from \"../../config/GameConstant\";\nimport { UIID } from \"../../config/UIConfig\";\nimport { EventManager } from \"../../framework/manager/EventManager\";\nimport { Utils } from \"../../framework/Utils\";\nimport { BaseControll } from \"../../framework/vc/BaseController\";\nimport { GlobalCMD } from \"../gnet/GlobalCMD\";\nimport { PopupServers } from \"./PopupServers\";\n\nexport class RecommendPopServers extends BaseControll {\n    private static _instance = null;\n    public static getInstance(): RecommendPopServers {\n        if (!this._instance || this._instance == null) {\n            this._instance = new RecommendPopServers(\"RecommendPopServers\");\n        }\n        return this._instance;\n    }\n    //实例化\n    constructor(name: string) {\n        super(name)\n    };\n    public static init(): RecommendPopServers {\n        if (this._instance) {\n            this._instance.clear()\n        }\n        this._instance = null\n        RecommendPopServers.getInstance();\n        return\n    }\n\n    //校验结果\n    _popUpResult = [];\n    /** 弹窗uid队列 { uid: uiid, toolid: id, data: info, mainlayer: self._curMainLayer }*/\n    _popUIDQueue: Array<any> = [];\n    // 当前场景id\n    _currowPosID = null;\n    // 延迟场景id\n    _delayPosID = null;\n    // 场景校验数据\n    _checkPosData = {};\n    //当前使用的校验数据\n    _curCheckPosData = null;\n    //当前主场景UID\n    _curMainLayer = null;\n    /** 推荐弹窗全部被关闭之后的回调 */\n    _allCloseCallback: Function = null;\n    /** 无推荐结果时的吐司 */\n    _noResultTip: string = null;\n    /** 弹窗ID-{UIID 检查函数}的映射 */\n    private PopupID_UIIDMap: { [key: number]: { UIID: any, ckFunc: string } } = {\n        /** 签到 */\n        [GConstants.PopupIds.SIGNIN]: { UIID: UIID.SigninPrefab, ckFunc: \"checkSignin\" },\n        /** 首充 */\n        [GConstants.PopupIds.FIRSTPAY_ACTIVITY]: { UIID: UIID.FirstPayPrefab, ckFunc: \"checkFirstPay\" },\n        /** 特价礼包 */\n        [GConstants.PopupIds.HOLIDAY_ACTIVITY]: { UIID: UIID.GiftDiscountPrefab, ckFunc: \"checkHoliday\" },\n        /** 活动中心 */\n        [GConstants.PopupIds.ACTIVITY_CENTER]: { UIID: UIID.AtyCenterPrefab, ckFunc: \"checkAcvitity\" },\n\n        /** 考虑添加桌面进入大厅领奖 */\n    }\n    /**初始化添加事件绑定 */\n    protected onInitModuleEvent(): void {\n        /** 设置关闭所有推荐弹窗的回调 */\n        this.addModelListener(AppEvent.RECOMMEND_POP_SET_CALLBACK, this.setCloseAllFunc);\n        /** 设置无推荐弹窗时的吐司 */\n        this.addModelListener(AppEvent.RECOMMEND_POP_SET_NO_TIP, this.setNoTip);\n        /** 打开队列弹窗界面 */\n        this.addModelListener(AppEvent.RECOMMEND_POP_OPEN_VIEW, this.openViewQuene);\n        /** 清除队列弹窗界面 */\n        this.addModelListener(AppEvent.RECOMMEND_POP_CLEAN_QUENE, this.cleanViewQuene);\n        /** 用户请求推荐弹窗 */\n        this.addModelListener(AppEvent.RECOMMEND_POP_GET, this.getRecommend);\n        /** 用户请求推荐弹窗数据返回 */\n        this.addModelListener(AppEvent.NET_CMD_RESP_POP_ADVERTISE, this.getRespcommend);\n    }\n    /**\n     * 请求推荐结果\n     * @param popupPos 场景ID\n     * @param params 附加参数\n     */\n    private reqPopAdvByPos(popupPos, params = null) {\n        this._currowPosID = popupPos;\n        let popData = this.getPopData();\n        if (Utils.table_isEmpty(popData) == false && Utils.table_isEmpty(popData[0]) == false) {\n            console.log(\"本地已存在弹窗数据：==>\", popupPos, popData)\n            this.getRecommendAllPopData(null, popData)\n        } else {\n            console.log(\"请求推荐弹窗数据：==>\", popupPos)\n            let reqData = {\n                cmd: GlobalCMD.PHP_ACTIVITY_MODAL_POPUP,\n                body: {},\n            }\n            EventManager.dispatch(AppEvent.NET_SEND_MSG, reqData);\n        }\n\n\n    }\n    /**\n     * 获取次数和当前弹出的场景\n     */\n    private getPopData() {\n        let currentData = [];\n        let currowMax = 0;\n        if (this._currowPosID == GConstants.PopupPos.POS_LOGIN) {\n            currentData = GCache.RecommendPop.getIntoHallPropData();\n            currowMax = GCache.RecommendPop.getIntoHallPopTime();\n        } else if (this._currowPosID == GConstants.PopupPos.POS_INTO_ROOM) {\n            currentData = GCache.RecommendPop.getIntoGamePropData();\n            currowMax = GCache.RecommendPop.getIntoGamePopTime();\n\n        } else {\n            return null;\n        }\n        return [currentData, currowMax]\n    }\n    /**\n     * 请求推荐弹窗数据（事件调用）\n     * @param id \n     * @param data \n     * @param isDelay \n     */\n    private getRecommend(event = null, id, data = null, isDelay: boolean = false) {\n        if (id == null) {\n            return;\n        }\n        if (this._curMainLayer != PopupServers.getInstance().MainLayerCode) {\n            this.cleanViewQuene();\n            this.setNoTip(null);\n            this.setCloseAllFunc(null);\n        }\n        this._checkPosData[id] = {\n            mainCode: PopupServers.getInstance().MainLayerCode,\n            noResultTip: this._noResultTip,\n            allCloseCallFunc: this._allCloseCallback,\n            isCheck: false\n        }\n\n        this._noResultTip = null;\n        this._allCloseCallback = null;\n\n        if (this._delayPosID != null && isDelay) {\n            this.getDelayRecommend();\n        } else {\n            this.reqPopAdvByPos(id, data);\n        }\n    };\n    /**\n     * 设置关闭所有推荐弹窗的回调\n     * @param event \n     * @param callback \n     */\n    private setCloseAllFunc(event = null, callback: Function = null) {\n        this._allCloseCallback = callback;\n    }\n    /**\n     * 设置无推荐弹窗时的吐司\n     * @param event \n     * @param tips \n     */\n    private setNoTip(event = null, tips = null) {\n        this._noResultTip = tips;\n    }\n    /** 请求延迟弹窗数据 */\n    private getDelayRecommend() {\n        this.reqPopAdvByPos(this._delayPosID);\n        this._delayPosID = null;\n    };\n\n    /**\n     * 推荐弹窗数据返回\n     */\n    getRespcommend(event, isSuccess, respData, reqData) {\n        console.log('获取获取强弹数据返回', isSuccess, respData)\n        if (!isSuccess) {\n            console.log('获取获取强弹数据失败', respData)\n            return\n        }\n        if (isSuccess && respData) {\n            // 解析弹窗数据\n            GCache.RecommendPop.updatePopData(respData);\n            //请求之后获取的弹窗数据\n            this.getRecommendAllPopData(event, this.getPopData())\n        }\n    }\n    /** 获取指定推荐弹窗配置数据 */\n    private getRecommendAllPopData(event = null, data: Array<any>) {\n        if (Utils.table_isEmpty(data)) {\n            return;\n        }\n        let popupPos = this._currowPosID;\n        // 当前主场景\n        let _cur_pos = PopupServers.getInstance().MainLayerCode;\n        this.print(`获取指定推荐弹窗配置数据popupPos=${popupPos},_cur_pos=${String(_cur_pos)},是否为空:${String(this._checkPosData[popupPos])}`)\n        if (this._checkPosData[popupPos] != null && !!this._checkPosData[popupPos][\"isCheck\"] != true) {\n            let checkPos = this._checkPosData[popupPos][\"mainCode\"];\n            this._checkPosData[popupPos][\"isCheck\"] = true\n            if (_cur_pos != checkPos) {\n                this.print(`推荐场景不一致 不做推荐 checkPos=${checkPos},_cur_pos=${String(_cur_pos)}`)\n                return;\n            }\n        }\n        this._curMainLayer = PopupServers.getInstance().MainLayerCode;\n        this._curCheckPosData = Utils.clone(this._checkPosData[popupPos]);\n\n        this.checkRecommendPopup(data)\n        this._allCloseCallback = null;\n    }\n    /** 校验推荐弹窗是否展示 */\n    private checkRecommendPopup(pData) {\n        if (pData && pData instanceof Array && pData.length > 0) {\n            //强弹队列\n            let data = pData[0];\n            //最大可弹\n            let maxLen = pData[1];\n\n            /** 不支持的弹窗类型 */\n            let notKeepPopList = [];\n            for (let i = 0; i < data.length; i++) {\n                let currowPopData = data[i];\n                let info = null;\n                if (currowPopData.length > 1) {//存在互斥\n                    info = currowPopData;\n                    let alrCheckInfo = [];\n                    this.print(\"checkRecommendPopup:检测到互斥数据:\", info);\n                    for (let m = 0; m < info.length; m++) {\n                        if (GCache.RecommendPop.checkPopDayCount(info[m]) == true) {\n                            alrCheckInfo.push(info[m]);\n                        } else {\n                            this.print(\"checkRecommendPopup:互斥数据 次数不满足:\", info[m]);\n                        }\n                    }\n                    if (alrCheckInfo.length > 0) {\n                        for (let m = 0; m < alrCheckInfo.length; m++) {\n                            if (this.PopupID_UIIDMap[alrCheckInfo[m][\"toolid\"]]) {\n                                if (this.PopupID_UIIDMap[alrCheckInfo[m][\"toolid\"]].ckFunc && this[this.PopupID_UIIDMap[alrCheckInfo[m][\"toolid\"]].ckFunc] != null) {\n                                    let oldLength = this._popUpResult.length;\n                                    this[this.PopupID_UIIDMap[alrCheckInfo[m][\"toolid\"]].ckFunc](alrCheckInfo[m]);\n                                    //满足了一个数据变动 就就终止\n                                    if (this._popUpResult.length > oldLength) {\n                                        break;\n                                    }\n                                }\n                            } else {\n                                notKeepPopList.push(info);\n                            }\n\n                        }\n\n                    }\n                } else {\n                    info = currowPopData[0];\n                    if (GCache.RecommendPop.checkPopDayCount(info) == true) {\n                        if (this.PopupID_UIIDMap[info[\"toolid\"]]) {\n                            if (this.PopupID_UIIDMap[info[\"toolid\"]].ckFunc && this[this.PopupID_UIIDMap[info[\"toolid\"]].ckFunc] != null) {\n                                this[this.PopupID_UIIDMap[info[\"toolid\"]].ckFunc](info);\n                            }\n                        } else {\n                            notKeepPopList.push(info);\n                        }\n                    }\n                }\n            }\n            this.print(\"checkRecommendPopup:要弹出的数据>>\", Utils.clone(this._popUpResult));\n            //处理最大上限\n            if (this._popUpResult.length > maxLen) {\n                this._popUpResult = this._popUpResult.splice(0, maxLen)\n                this.print(`checkRecommendPopup:超过最大弹窗次数${maxLen}>>`, Utils.clone(this._popUpResult));\n            }\n            if (this._curCheckPosData) {\n                this.showRecommendPopup(this._curCheckPosData[\"allCloseCallFunc\"], this._curCheckPosData[\"noResultTip\"]);\n            } else {\n                this.showRecommendPopup(null, null);\n            }\n\n        } else {\n            //关闭正在加载中\n            EventManager.dispatch(AppEvent.SYS_CLOSE_NETLOADING);\n            if (this._curCheckPosData) {\n                if (this._curCheckPosData[\"allCloseCallFunc\"]) {\n                    this._curCheckPosData[\"allCloseCallFunc\"]();\n                }\n                if (this._curCheckPosData[\"noResultTip\"]) {\n                    EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: this._curCheckPosData[\"noResultTip\"] });\n                }\n            }\n        }\n    }\n\n    /** 展示推荐弹窗(走到这一步 必须保证主场景标识是一致的) */\n    private showRecommendPopup(callback = null, noResultTip = null) {\n        this.print(\"showRecommendPopup\", this._popUpResult)\n        if (this._popUpResult && this._popUpResult.length > 0) {\n            this._popUIDQueue = [];\n            let self = this;\n            let showPopup = function (id, info) {\n                let uiid = null;\n\n                if (self.PopupID_UIIDMap[info[\"toolid\"]].UIID != null) {\n                    uiid = self.PopupID_UIIDMap[info[\"toolid\"]].UIID;\n                }\n                if (uiid != null) {\n                    self._checkRepeatUIID(uiid);\n                    //支付场景\n                    // info[\"pay_scene\"] = GConstants.PayScene[info[\"scene_id\"]];\n                    //保存的数据格式\n                    self._popUIDQueue.push({ uiid: uiid, toolid: id, data: info, mainlayer: self._curMainLayer });\n                }\n            }\n            for (let i = 0; i < this._popUpResult.length; i++) {\n                let info = this._popUpResult[i];\n                showPopup(info[\"toolid\"], info);\n            }\n            this._popUpResult = [];\n            this.openViewQuene(null, callback);\n        } else {\n            //关闭正在加载中\n            EventManager.dispatch(AppEvent.SYS_CLOSE_NETLOADING);\n            if (callback) {\n                callback();\n            }\n            if (noResultTip) {\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: noResultTip });\n            }\n        }\n    }\n    /** 去除重复的uiid */\n    private _checkRepeatUIID(uIID) {\n        if (this._popUIDQueue.length == 0) {\n            return;\n        }\n        for (let i = this._popUIDQueue.length - 1; i >= 0; i--) {\n            if (this._popUIDQueue[i][\"uiid\"] == uIID) {\n                this._popUIDQueue.splice(i, 1);\n            };\n        }\n    }\n    /** 打开弹窗队列 */\n    private openViewQuene(event = null, finishCallback) {\n        if (this._popUIDQueue.length <= 0) {\n            this.print(\"openViewQuene 1\")\n            if (event != null && finishCallback) {\n                //最后的回调\n                finishCallback();\n            } else {\n                //关闭正在加载中\n                EventManager.dispatch(AppEvent.SYS_CLOSE_NETLOADING);\n            }\n            return;\n        }\n        let curMainLayer = PopupServers.getInstance().MainLayerCode;\n        let info = null;\n        for (let i = 0; i < this._popUIDQueue.length; i++) {\n            if (this._popUIDQueue[i][\"mainlayer\"] == curMainLayer) {\n                info = this._popUIDQueue[i];\n                this._popUIDQueue.splice(i, 1);\n                break;\n            }\n        }\n        if (info) {\n            let self = this;\n            //正在加载中\n            EventManager.dispatch(AppEvent.SYS_SHOW_NETLOADING, 60);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, info[\"uiid\"], info[\"data\"], {\n                onAdded: function (node, viewParams) {\n                    //关闭正在加载中\n                    EventManager.dispatch(AppEvent.SYS_CLOSE_NETLOADING);\n                    self.print(\"弹窗队列 添加完成===>更新次数\", info)\n                    GCache.RecommendPop.updatePopDayCountData(info[\"data\"]);\n                },\n                onRemoved: function () {\n                    self.print(\"弹窗队列 移除完成===>\", info)\n                    EventManager.dispatch(AppEvent.RECOMMEND_POP_OPEN_VIEW, finishCallback);\n                }\n            })\n        } else {\n            this.print(\"openViewQuene 场景不一致\", this._popUIDQueue, curMainLayer)\n        }\n    }\n    /** 清除队列 */\n    private cleanViewQuene(event = null) {\n        this._popUIDQueue = [];\n    }\n\n    /** 检查每日签到\n     * alrCheckInfo[m], other, scene\n     */\n    private checkSignin(info) {\n        let isShow = GCache.RedDot.has_reddot_signin();\n\n        if (isShow) {\n            this._popUpResult.push(info);\n        }\n    }\n    /** 检查特价礼包 */\n    private checkHoliday(info) {\n        let isShow = GCache.RedDot.need_show_holiday()\n        if (isShow) {\n            this._popUpResult.push(info);\n        }\n    }\n\n    /** 检查首充礼包\n     * \n     */\n    private checkFirstPay(info) {\n        let isShow = GCache.RedDot.need_show_gift_firstpay()\n        if (isShow) {\n            this._popUpResult.push(info);\n        }\n    }\n    /** 检查活动中心 \n     * 有数据就弹\n    */\n    private checkAcvitity(info) {\n        let isShow = GCache.RedDot.has_reddot_activityNormal()\n        if (isShow) {\n            this._popUpResult.push(info);\n        }\n    }\n\n}\n"]}
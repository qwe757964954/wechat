{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/hall/scripts/hallPrefabCtr.ts"],"names":["Label","Node","Prefab","ScrollView","Sprite","UITransform","Vec3","_decorator","GCache","AppEvent","AppSound","GConstants","GameRes","GameTxt","UIID","Utils","SpriteLoad","resLoader","EventManager","BaseComponent","Platform","ccclass","property","menu","hallSceneCtr","tooltip","type","constructor","_currowGameID","GameID","FXJ","_currowLeaveTabID","_roleSex","_rightMenuList","MenuIDConf","ZKLB","_redDotView","_headRedDotView","_activityRedDotView","_handlerForeverQuickStart","_quickHandlerClickSpine","_initScrollRightHeight","onLoad","dispatch","SYS_PLAY_MUSIC","BgHall","initData","initView","RedDotConf","Sign","nodeSignin","Shop","nodeShop","Friend","nodeFriend","FirstPay","nodeFirstPayGift","Holiday","nodeLimitGift","UserHead","headRedDotNode","ActivityNormal","nodeActivity","ActivityNotice","updateUserInfo","updateMenu","updateGiftBtn","updateSpineAni","updateQuickStartBtn","getPreLoaderRes","Prefab_HallTopUI","bundle","path","res","node","addChild","active","isCanPay","nodeScrollViewRightContent","scrollViewRight","getComponent","height","scrollToTop","onInitModuleEvent","addModelListener","USER_UPDATE_INFO","USER_UPDATE_PROPERTY","updateGameLevelView","ACTIVITY_UPDATE_HOLIDAYSGIFTPACKAGE","updateGiftBtnLimitGift","ACTIVITY_UPDATE_SIGNIN_CONF","updateMenuSignin","HALL_UPDATE_GAME_LEVEL_TAB","NOTIFY_UPDATE_RED_DOT","refreshRedDot","ACTIVITY_UPDATE_FIRSTPAY_CONF","updateGiftBtnFirstPayGift","onEnable","maskNode","addScheduler","Activity","checkHaveSignin","event","flag","RedDot","need_show_holiday","data","getHolidaysGiftPackage","console","log","limitPackIcon","firstIcon","self","loadRemote","ext","err","imageAsset","isValid","spriteFrame","image_ImageAssetToSpriteFrame","need_show_gift_firstpay","getFirstPayPackage","firstPackIcon","start","reqQueneList","NET_REQ_GAME_LEVEL_ROOM_TAB","onClickMenu","custom","clickEffect","print","SelectGame","checkQuickGame","VIEW_UI_OPEN","PlayerInfoCenter","SettingPrefab","MallPrefab","id","ShopBigTabType","SILVER_COIN","SigninPrefab","SYS_PLAY_EFFECT","CommClick","FriendPrefab","AtyCenterPrefab","onClickGift","SYS_TOAST_TIP","content","activity_outtime","GiftDiscountPrefab","pay_scene","PayScene","hall","FirstPayPrefab","onClickRoom","gotoGameLeave","getGameConfigByGameID","hall_game_not_have","getGameLevelRule","hall_leave_not_have","param","game_id","tab_id","SelectLevelPrefab","timeout","stopScheduler","updateUserHead","userSex","User","getUserSex","spriteLoad","headNode","headArray","getUserHeadArray","s","setRemoteUrl","setLocalLoad","Picture_UserBigHead_girl","Picture_UserBigHead_boy","maxLen","name","getUserName","string_isAllOneBytes","userName","string","string_subString","updateRoleShow","isNotNull","spineRoleNode","removeAllChildren","roleAnimConf","GoodsData","getRoleAnimConfigById","standbyActIndex","nextStandbyAct","length","act","setStatus","actName","isloop","roleAni","parentNode","resConf","aniName","trackIndex","isLoop","callStartFunc","oneLoopEndcallFunc","processCallFunc","trackEntry","ev","animation","SYS_STOP_PLAY_EFFECT","role","SYS_ANI_PLAY","keChiAni","nodeItemKeChi","Spine_Rukou_Kechi","buKeChiAni","nodeItemBuKeChi","Spine_Rukou_Bukechi","getClickRecord","nodeQuickStart","Spine_Guide_Hander_Click","toPos","SYS_ANI_STOP","addSchedulerOnce","gameName","checkQuickGameName","string_isEmpty","labelQuickStart","keyType","updateGiftBagShow","nodeOrList","imgRedDot","Array","forEach","index","getChildByName","hasRedDot","atyActive","updateRightScrollView","reddotType","setTimeout","currowScrollContentHeight","enabled","onDestroy"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Label, Node, Prefab, ScrollView, Sprite, UITransform, Vec3, _decorator, sp } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { AppSound } from '../../../config/AppSound';\nimport { GConstants } from '../../../config/GameConstant';\nimport { GameRes } from '../../../config/GameRes';\nimport { GameTxt } from '../../../config/GameTxt';\nimport { UIID } from '../../../config/UIConfig';\nimport { inf_SpineAniCreate } from '../../../framework/InterfaceDefines';\nimport { Utils } from '../../../framework/Utils';\nimport SpriteLoad from '../../../framework/gui/sprite/SpriteLoad';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { Platform } from '../../../platform/Platform';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = hallSceneCtr\n * URL = db://assets/model/hall/hallSceneCtr.ts\n * Time = Sat Apr 02 2022 17:35:04 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\t\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('hallSceneCtr_prefab')\n\n//方便编辑器识别的菜单项目\n@menu('prefab/hall/hallScene')\n\nexport class hallSceneCtr extends BaseComponent {\n\n    //背景动画根节点\n    @property({ tooltip: \"背景动画根节点\", type: Node })\n    private spineBgNode: Node | null = null;\n\n    //大厅人物动画根节点\n    @property({ tooltip: \"大厅人物动画根节点\", type: Node })\n    private spineRoleNode: Node | null = null;\n\n    //经典场条框动画根节点\n    @property({ tooltip: \"可吃场条框动画根节点\", type: Node })\n    private nodeItemKeChi: Node | null = null;\n\n    //不洗牌场条框动画根节点\n    @property({ tooltip: \"不可吃场条框动画根节点\", type: Node })\n    private nodeItemBuKeChi: Node | null = null;\n\n    //用户昵称\n    @property({ tooltip: \"用户昵称\", type: Label })\n    userName: Label = null!;\n\n    //用户头像\n    @property({ tooltip: \"用户头像\", type: Node })\n    headNode: Node = null!;\n\n    //用户头像框\n    @property({ tooltip: \"用户头像框\", type: Node })\n    private headBoxNode: Node | null = null;\n\n    //用户头像红点\n    @property({ tooltip: \"用户头像红点\", type: Node })\n    private headRedDotNode: Node | null = null;\n\n    //商城按钮节点\n    @property({ tooltip: \"商城按钮节点\", type: Node })\n    private nodeShop: Node = null!;\n\n    //签到按钮节点\n    @property({ tooltip: \"签到按钮节点\", type: Node })\n    private nodeSignin: Node = null!;\n\n    //好友按钮节点\n    @property({ tooltip: \"好友按钮节点\", type: Node })\n    private nodeFriend: Node = null!;\n\n    //活动按钮节点\n    @property({ tooltip: \"活动按钮节点\", type: Node })\n    private nodeActivity: Node = null!;\n\n    //首充礼包按钮节点\n    @property({ tooltip: \"首充礼包按钮节点\", type: Node })\n    private nodeFirstPayGift: Node = null!;\n\n    //折扣礼包按钮节点\n    @property({ tooltip: \"折扣礼包按钮节点\", type: Node })\n    private nodeLimitGift: Node = null!;\n\n    //快速开始按钮节点\n    @property({ tooltip: \"快速开始按钮节点\", type: Node })\n    private nodeQuickStart: Node | null = null;\n\n    //快速开始按钮节点\n    @property({ tooltip: \"快速开始按钮文字\", type: Label })\n    private labelQuickStart: Label | null = null;\n\n    //右边滚动容器\n    @property({ tooltip: \"右边滚动容器\", type: ScrollView })\n    private scrollViewRight: ScrollView | null = null;\n\n    //右边滚动容器内容节点\n    @property({ tooltip: \"右边滚动容器内容节点\", type: Node })\n    private nodeScrollViewRightContent: Node | null = null;\n\n    // 遮挡节点\n    @property({ tooltip: \"遮挡节点\", type: Node })\n    private maskNode: Node = null!;\n\n    //当前游戏ID\n    private _currowGameID = GConstants.GameID.FXJ\n    //当前选中场次(tabid 当前写死)\n    private _currowLeaveTabID = null;\n\n    private _roleSex = null;\n\n    /** 右侧所有功能菜单 */\n    private _rightMenuList: Array<Number> = [\n        /** 折扣礼包 */\n        GConstants.MenuIDConf.ZKLB,\n    ];\n\n    /** 红点UI队列 */\n    private _redDotView: { [key: string]: Node | Array<Node> } = {};\n\n    /** 头像红点UI队列 */\n    private _headRedDotView: { [key: string]: Node | Array<Node> } = {};\n    /** 活动中心红点UI队列 */\n    private _activityRedDotView: { [key: string]: Node | Array<Node> } = {};\n    /** 快速开始手势动画循环播放的句柄 */\n    private _handlerForeverQuickStart = null;\n\n    /** 快速开始按钮的手势动画 */\n    private _quickHandlerClickSpine: inf_SpineAniCreate = null;\n\n    /** 初始的滚动容器大小 */\n    private _initScrollRightHeight = 0;\n\n    constructor() {\n        super();\n    }\n    onLoad() {\n        super.onLoad();\n        EventManager.dispatch(AppEvent.SYS_PLAY_MUSIC, AppSound.BgHall);\n\n        this.initData();\n        this.initView();\n    }\n\n    initData() {\n        this._redDotView = {\n            /** 七日签到 */\n            [GConstants.RedDotConf.Sign]: this.nodeSignin,\n            /** 商城 */\n            [GConstants.RedDotConf.Shop]: this.nodeShop,\n            /** 好友 */\n            [GConstants.RedDotConf.Friend]: this.nodeFriend,\n            /** 首充礼包 */\n            [GConstants.RedDotConf.FirstPay]: this.nodeFirstPayGift,\n            /** 付费礼包 */\n            [GConstants.RedDotConf.Holiday]: this.nodeLimitGift,\n        }\n\n        this._headRedDotView = {\n            // [GConstants.RedDotConf.DressChatFrame]: this.headRedDotNode,\n            // [GConstants.RedDotConf.DressClock]: this.headRedDotNode,\n            // [GConstants.RedDotConf.DressHeadFrame]: this.headRedDotNode,\n            [GConstants.RedDotConf.UserHead]: this.headRedDotNode,\n        }\n        this._activityRedDotView = {\n            /** 活动中心 */\n            [GConstants.RedDotConf.ActivityNormal]: this.nodeActivity,\n            /** 活动中心 */\n            [GConstants.RedDotConf.ActivityNotice]: this.nodeActivity,\n        }\n    }\n\n    initView() {\n        this.updateUserInfo();\n\n        this.updateMenu();\n        this.updateGiftBtn()\n\n        this.updateSpineAni();\n        this.updateQuickStartBtn();\n\n        this.getPreLoaderRes(GameRes.Prefab_HallTopUI.bundle, GameRes.Prefab_HallTopUI.path, Prefab, (res) => {\n            this.node.addChild(res);\n        })\n\n        this.nodeShop.active = Platform.isCanPay();\n        this.nodeScrollViewRightContent.active = false;\n\n        this._initScrollRightHeight = this.scrollViewRight.node.getComponent(UITransform).height;\n        this.scrollViewRight.scrollToTop(0.01, false);\n    }\n\n\n\n    /** override */\n    protected onInitModuleEvent() {\n        //用户信息更新\n        this.addModelListener(AppEvent.USER_UPDATE_INFO, this.updateUserInfo)\n        //用户资产更新\n        this.addModelListener(AppEvent.USER_UPDATE_PROPERTY, this.updateGameLevelView)\n        //限时礼包活动更新\n        this.addModelListener(AppEvent.ACTIVITY_UPDATE_HOLIDAYSGIFTPACKAGE, this.updateGiftBtnLimitGift)\n        //更新签到配置\n        this.addModelListener(AppEvent.ACTIVITY_UPDATE_SIGNIN_CONF, this.updateMenuSignin)\n        // 更新房间配置\n        this.addModelListener(AppEvent.HALL_UPDATE_GAME_LEVEL_TAB, this.updateGameLevelView);\n        /** 红点更新 */\n        this.addModelListener(AppEvent.NOTIFY_UPDATE_RED_DOT, this.refreshRedDot);\n        //首充礼包活动更新\n        this.addModelListener(AppEvent.ACTIVITY_UPDATE_FIRSTPAY_CONF, this.updateGiftBtnFirstPayGift)\n    }\n\n    onEnable() {\n        this.maskNode.active = true;\n        this.addScheduler(1, () => {\n            this.maskNode.active = false\n        })\n    }\n\n    //更新房间信息\n    updateGameLevelView() {\n        this.updateQuickStartBtn();\n    }\n\n    //更新菜单状态\n    updateMenu() {\n        this.updateMenuSignin()\n    }\n\n    //更新菜单状态——签到\n    updateMenuSignin() {\n        this.nodeSignin.active = GCache.Activity.checkHaveSignin()\n    }\n\n    //更新礼包按钮状态\n    updateGiftBtn(event: string = null) {\n        this.updateGiftBtnFirstPayGift()\n        this.updateGiftBtnLimitGift()\n    }\n\n    //更新礼包按钮状态——折扣礼包\n    updateGiftBtnLimitGift() {\n        let flag = GCache.RedDot.need_show_holiday();\n        this.nodeLimitGift.active = flag;\n        if (flag) {\n            let data = GCache.Activity.getHolidaysGiftPackage()\n            console.log(\"holiday:\", data)\n            let limitPackIcon = data.firstIcon\n            let self = this;\n            resLoader.loadRemote(limitPackIcon, { ext: '.jpg' }, (err, imageAsset) => {\n                if (!imageAsset) { //资源可能还在加载中\n                    return\n                }\n                if (!self.node || self.node.isValid == false) {\n                    return;\n                }\n                let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n                if (spriteFrame) {\n                    this.nodeLimitGift.getComponent(Sprite).spriteFrame = spriteFrame;\n                }\n            })\n        }\n    }\n\n\n    /**\n     * 更新首充按钮状态——首充礼包,当数据为空时,首充按钮不显示\n     */\n    updateGiftBtnFirstPayGift() {\n        let flag = GCache.RedDot.need_show_gift_firstpay();\n        this.nodeFirstPayGift.active = flag;\n        if (flag) {\n            let data = GCache.Activity.getFirstPayPackage();\n            console.log(\"firstpay:\", data)\n            let firstPackIcon = data.firstIcon\n            let self = this;\n            resLoader.loadRemote(firstPackIcon, { ext: '.jpg' }, (err, imageAsset) => {\n                if (!imageAsset) { //资源可能还在加载中\n                    return\n                }\n                if (!self.node || self.node.isValid == false) {\n                    return;\n                }\n                let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset);\n                if (spriteFrame) {\n                    this.nodeFirstPayGift.getComponent(Sprite).spriteFrame = spriteFrame;\n                }\n            })\n        }\n\n\n\n\n    }\n\n    start() {\n        this.refreshRedDot();\n        this.nodeScrollViewRightContent.active = true;\n        this.reqQueneList()\n    };\n\n    reqQueneList() {\n        //请求游戏房间信息\n        EventManager.dispatch(AppEvent.NET_REQ_GAME_LEVEL_ROOM_TAB, this._currowGameID)\n        // //请求游戏场次房间人数\n        // EventManager.dispatch(AppEvent.NET_REQ_GAME_LEVEL_PERSON_COUNT, this._currowGameID)\n        // //请求在线人数\n        // EventManager.dispatch(AppEvent.NET_REQ_ONLINE_PERSON)\n    }\n\n\n\n    onClickMenu(event: EventTouch, custom: string) {\n        this.clickEffect();\n        this.print(\"hallSceneCtr\", \"onClickMenu\", custom);\n        if (custom == \"quickStart\") {   // 快速开始\n            GCache.SelectGame.checkQuickGame(this._currowGameID);\n        } else if (custom == \"quickPay\") { // 快捷充值\n\n        } else if (custom == \"personalCenter\") {  // 打开个人中心\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.PlayerInfoCenter);\n        } else if (custom == \"setting\") {\t// 设置\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SettingPrefab);\n        } else if (custom == \"shop\") { // 打开商城界面\n            if (Platform.isCanPay()) {\n                // EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_20 });\n                // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.SpecialClick);\n                EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.MallPrefab, { id: GConstants.ShopBigTabType.SILVER_COIN }, {});\n            }\n        } else if (custom == \"signin\") { // 打开签到界面\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SigninPrefab);\n        } else if (custom == \"friend\") { // 打开客服界面\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.FriendPrefab, null, null, null, true);\n            // EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_16 });\n        } else if (custom == \"setting\") { // 打开设置界面\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SettingPrefab);\n        } else if (custom == 'activity') {//点击活动按钮bankruptcy\n            console.log('打开了活动中心')\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.AtyCenterPrefab, null, null, null, true);\n        }\n    }\n\n    onClickGift(event: EventTouch, custom: string) {\n        this.clickEffect();\n        this.print(\"hallSceneCtr\", \"onClickGift\", custom);\n\n        if (custom == \"limitGift\") { // 打开限时折扣界面\n            if (Platform.isCanPay() == false) {\n                return false;\n            }\n            if (GCache.RedDot.need_show_holiday() == false) {\n                this.nodeLimitGift.active = false\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.activity_outtime })\n                return\n            }\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.GiftDiscountPrefab, { pay_scene: GConstants.PayScene.hall }, null, null, true);\n        } else if (custom == \"firstPay\") { // 打开首充界面\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.FirstPayPrefab);\n        }\n    }\n    onClickRoom(event: EventTouch, custom: string) {\n        this.clickEffect();\n        if (custom == \"kechi\") {  //可吃场\n            this._currowLeaveTabID = 0\n            this.gotoGameLeave()\n        } else if (custom == \"bukechi\") {//不可吃场\n            this._currowLeaveTabID = 1\n            this.gotoGameLeave()\n        }\n    }\n\n    clickEffect() {\n        EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n    }\n\n    //前往单个场次\n    gotoGameLeave() {\n        if (GCache.SelectGame.getGameConfigByGameID(this._currowGameID) == null) {\n            EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.hall_game_not_have })\n            return\n        }\n        if (GCache.SelectGame.getGameLevelRule(this._currowGameID, this._currowLeaveTabID) == null) {\n            EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.hall_leave_not_have })\n            return\n        }\n\n        let param = {\n            game_id: this._currowGameID,\n            tab_id: this._currowLeaveTabID\n        }\n        EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SelectLevelPrefab, param);\n        this.maskNode.active = true;\n        let timeout = this.addScheduler(1, () => {\n            this.stopScheduler(timeout);\n            if (this.node && this.node.isValid == true) {\n                this.maskNode.active = false;\n            }\n        })\n    }\n\n    //更新用户头像\n    updateUserHead() {\n        let userSex = GCache.User.getUserSex();\n        let spriteLoad = this.headNode.getComponent(SpriteLoad);\n        let headArray = GCache.User.getUserHeadArray();\n\n        if (headArray && headArray.s != \"\") {\n            let self = this;\n            spriteLoad.setRemoteUrl(headArray.s)\n        } else {\n            if (userSex == 2) {\n                spriteLoad.setLocalLoad(GameRes.Picture_UserBigHead_girl.bundle, GameRes.Picture_UserBigHead_girl.path);\n            } else {\n                spriteLoad.setLocalLoad(GameRes.Picture_UserBigHead_boy.bundle, GameRes.Picture_UserBigHead_boy.path);\n            }\n        }\n    }\n\n\n    //更新用户信息\n    updateUserInfo() {\n        let maxLen = 6;\n        let name = GCache.User.getUserName();\n        if (Utils.string_isAllOneBytes(name)) {\n            maxLen = 10;\n        }\n        this.userName.string = Utils.string_subString(name, maxLen, false, \"\");\n        this.updateUserHead();\n\n        this.updateRoleShow();\n\n    }\n\n    //更新角色信息\n    updateRoleShow() {\n        this.print(\"updateRoleShow\", GCache.User.getUserSex(), this._roleSex)\n        // mark 临时配置，上角色版本再处理\n        let userSex = GCache.User.getUserSex();\n\n        if (Utils.isNotNull(this._roleSex) && this._roleSex == userSex) {\n            return;\n        }\n        this._roleSex == userSex\n\n        this.spineRoleNode.removeAllChildren();\n\n        let roleAnimConf = GCache.GoodsData.getRoleAnimConfigById(null)\n\n        let self = this;\n        let standbyActIndex = 1;\n        let nextStandbyAct = function () {\n            if (standbyActIndex > roleAnimConf[\"standby\"].length) {\n                standbyActIndex = 1;\n            }\n            let act = roleAnimConf[\"standby\"][standbyActIndex - 1];\n            standbyActIndex = standbyActIndex + 1;\n            return act;\n        }\n\n        let setStatus = function (actName, isloop = false) {\n            if (!self.spineRoleNode || self.spineRoleNode.isValid == false) {\n                return;\n            }\n            self.spineRoleNode.active = true;\n            let roleAni: inf_SpineAniCreate = {\n                parentNode: self.spineRoleNode,\n                resConf: roleAnimConf.path,\n                aniName: actName,\n                trackIndex: 0,\n                isLoop: isloop,\n                callStartFunc: () => {\n                    if (actName == roleAnimConf.hall) {\n                        // initTouchEvent();\n                        standbyActIndex = 1;\n                    }\n                },\n                oneLoopEndcallFunc: () => {\n                    setStatus(nextStandbyAct())\n                },\n                processCallFunc: (trackEntry: sp.spine.TrackEntry, ev) => {\n                    if (trackEntry.animation.name == roleAnimConf.hall) {\n                        EventManager.dispatch(AppEvent.SYS_STOP_PLAY_EFFECT);\n                        // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound[\"RoleInHall_\" + self._showRoleID]);\n                        standbyActIndex = 1;\n                    } else if (trackEntry.animation.name == roleAnimConf.role) {\n                        if (ev.data.name == \"juese\") {\n                            EventManager.dispatch(AppEvent.SYS_STOP_PLAY_EFFECT);\n                            // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound[\"Role_\" + self._showRoleID]);\n                            standbyActIndex = 1;\n                        } else if (ev.data.name == \"shanzi_kai\") {\n                            // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.RoleOpenFan);\n                        } else if (ev.data.name == \"music\") {\n                            // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.Role_30_1);\n                        }\n                    }\n                }\n\n            }\n            self.spineRoleNode.removeAllChildren();\n            EventManager.dispatch(AppEvent.SYS_ANI_PLAY, roleAni);\n        }\n        setStatus(roleAnimConf.hall, false)\n    }\n\n    // 播放动画\n    updateSpineAni() {\n        let keChiAni: inf_SpineAniCreate = {\n            parentNode: this.nodeItemKeChi,\n            resConf: GameRes.Spine_Rukou_Kechi,\n            aniName: \"animation\",\n            trackIndex: 0,\n            isLoop: true,\n        }\n        EventManager.dispatch(AppEvent.SYS_ANI_PLAY, keChiAni);\n\n        let buKeChiAni: inf_SpineAniCreate = {\n            parentNode: this.nodeItemBuKeChi,\n            resConf: GameRes.Spine_Rukou_Bukechi,\n            aniName: \"animation\",\n            trackIndex: 0,\n            isLoop: true,\n        }\n        EventManager.dispatch(AppEvent.SYS_ANI_PLAY, buKeChiAni);\n    }\n\n    // 更新快速开始\n    updateQuickStartBtn() {\n        this.stopScheduler(this._handlerForeverQuickStart);\n        if (GCache.User.getClickRecord(\"快速开始\") == 0) {\n            //快速开始点击手势\n            this._quickHandlerClickSpine = {\n                parentNode: this.nodeQuickStart,\n                resConf: GameRes.Spine_Guide_Hander_Click,\n                aniName: \"hand_dianji_loop\",\n                trackIndex: 0,\n                isLoop: false,\n                toPos: new Vec3(-10, 10, 0)\n            }\n            this._handlerForeverQuickStart = this.addScheduler(30, () => {\n                EventManager.dispatch(AppEvent.SYS_ANI_STOP, this._quickHandlerClickSpine);\n                EventManager.dispatch(AppEvent.SYS_ANI_PLAY, this._quickHandlerClickSpine);\n            })\n            this.addSchedulerOnce(1, () => {\n                EventManager.dispatch(AppEvent.SYS_ANI_STOP, this._quickHandlerClickSpine);\n                EventManager.dispatch(AppEvent.SYS_ANI_PLAY, this._quickHandlerClickSpine);\n            })\n        }\n\n        let gameName = GCache.SelectGame.checkQuickGameName(this._currowGameID);\n        if (!Utils.string_isEmpty(gameName)) {\n            this.labelQuickStart.string = gameName;\n        }\n\n    }\n\n    /** 红点更新 */\n    refreshRedDot(event = null, keyType = null) {\n        this.updateGiftBagShow();\n        if (keyType == null) {\n            for (let keyType in this._redDotView) {\n                let nodeOrList = this._redDotView[keyType];\n                let imgRedDot = null;\n                if (nodeOrList instanceof Array) {\n                    nodeOrList.forEach((node, index) => {\n                        if (node.active == true) {\n                            imgRedDot = node.getChildByName(\"img_dot\");\n                            if (imgRedDot) {\n                                imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                            }\n                        } else {\n\n                            console.log(\"入口已经隐藏===>\", keyType)\n                        }\n\n                    })\n                } else {\n                    if (nodeOrList.active == true) {\n                        imgRedDot = nodeOrList.getChildByName(\"img_dot\");\n                        if (imgRedDot) {\n                            imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                            console.log(keyType, \"=====\", imgRedDot.active)\n                        }\n                    } else {\n\n                        console.log(\"入口已经隐藏===>\", keyType)\n\n                    }\n                }\n            }\n            //头像红点\n            let active = false;\n            for (let keyType in this._headRedDotView) {\n                if (active == false) {\n                    active = GCache.RedDot.hasRedDot(keyType);\n                }\n            }\n            this.headRedDotNode.active = active;\n            //活动红点\n            let atyActive = false;\n            for (let keyType in this._activityRedDotView) {\n                if (atyActive == false) {\n                    atyActive = GCache.RedDot.hasRedDot(keyType);\n                }\n            }\n            let imgRedDot = this.nodeActivity.getChildByName(\"img_dot\");\n            if (imgRedDot) {\n                imgRedDot.active = atyActive;\n            }\n\n        } else {\n            if (this._redDotView[keyType] != null) {\n                let nodeOrList = this._redDotView[keyType];\n                let imgRedDot = null;\n                if (nodeOrList instanceof Array) {\n                    nodeOrList.forEach((node, index) => {\n                        if (node.active == true) {\n                            imgRedDot = node.getChildByName(\"img_dot\");\n                            if (imgRedDot) {\n                                imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                                console.log(keyType, \"=====\", imgRedDot.active)\n                            }\n                        }\n                    })\n                } else {\n                    if (nodeOrList.active == true) {\n                        imgRedDot = nodeOrList.getChildByName(\"img_dot\");\n                        if (imgRedDot) {\n                            imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                        }\n                    }\n                }\n            }\n            //头像红点\n            if (this._headRedDotView[keyType] != null) {\n                let active = false;\n                for (let keyType in this._headRedDotView) {\n                    if (active == false) {\n                        active = GCache.RedDot.hasRedDot(keyType);\n                    }\n                }\n                this.headRedDotNode.active = active;\n            }\n            //活动红点\n            if (this._activityRedDotView[keyType] != null) {\n                let atyActive = false;\n                for (let keyType in this._activityRedDotView) {\n                    if (atyActive == false) {\n                        atyActive = GCache.RedDot.hasRedDot(keyType);\n                    }\n                }\n                let imgRedDot = this.nodeActivity.getChildByName(\"img_dot\");\n                if (imgRedDot) {\n                    imgRedDot.active = atyActive;\n                }\n            }\n            this.updateGiftBagShow(keyType);\n        }\n        this.updateRightScrollView();\n    }\n\n    /** 更新礼包入口的显示 */\n    updateGiftBagShow(reddotType = null) {\n        if (reddotType == null) {\n            // this.btn_newUser7Day.active = GCache.RedDot.need_show_newuser7day();\n            // this.btn_GiftDiscount.active = GCache.RedDot.need_show_gift_discount();\n            // this.btn_GiftNewUser.active = GCache.RedDot.need_show_gift_newuser();\n            // this.btn_GiftLimit.active = GCache.RedDot.need_show_gift_limit();\n            // this.btn_GiftBuyLimit.active = GCache.RedDot.need_show_gift_buyLimit();\n            // this.btn_MuchGold.active = GCache.RedDot.need_show_Advice_MuchGold();\n            // this.btn_FreeGold.active = GCache.RedDot.need_show_Advice_FreeGold();\n            return;\n        }\n        // if (reddotType == GConstants.RedDotConf.NewUserServenDay) {\n        // \tthis.btn_newUser7Day.active = GCache.RedDot.need_show_newuser7day();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_Discount) {\n        // \tthis.btn_GiftDiscount.active = GCache.RedDot.need_show_gift_discount();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_NewUser) {\n        // \tthis.btn_GiftNewUser.active = GCache.RedDot.need_show_gift_newuser();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_Limit) {\n        // \tthis.btn_GiftLimit.active = GCache.RedDot.need_show_gift_limit();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_BuyLimit) {\n        // \tthis.btn_GiftBuyLimit.active = GCache.RedDot.need_show_gift_buyLimit();\n        // } else if (reddotType == GConstants.RedDotConf.AdMuchGold) {\n        // \tthis.btn_MuchGold.active = GCache.RedDot.need_show_Advice_MuchGold();\n        // } else if (reddotType == GConstants.RedDotConf.AdFreeGold) {\n        // \tthis.btn_FreeGold.active = GCache.RedDot.need_show_Advice_FreeGold();\n        // }\n    }\n    /** 更新右边的Scrollview */\n    updateRightScrollView() {\n        let self = this;\n        setTimeout(() => {\n            let currowScrollContentHeight = self.nodeScrollViewRightContent.getComponent(UITransform).height;\n            if (currowScrollContentHeight > self._initScrollRightHeight) {\n                self.scrollViewRight.enabled = true;\n            } else {\n                self.scrollViewRight.scrollToTop(0.01, false);\n                self.scrollViewRight.enabled = false;\n            }\n        }, 0)\n    }\n\n\n    //销毁\n    onDestroy() {\n        super.onDestroy();\n    };\n}"]}
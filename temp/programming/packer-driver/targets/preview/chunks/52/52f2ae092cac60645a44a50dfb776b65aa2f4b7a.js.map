{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/scripts/NodeCardCtr.ts"],"names":["instantiate","MeshRenderer","Node","Texture2D","Vec3","_decorator","Utils","BaseComponent","FXJRes","CardUtil","ccclass","property","NodeCardCtr","tooltip","type","albedo","nodeCardTab","byte","onInitModuleEvent","onLoad","setCardByte","cardStr","getCardValue","path","string_format","Picture_Game_Card","getPreLoaderRes","bundle","tex","console","log","nodeCardMesh","getComponent","material","setProperty","isNotNull","nodeCardTabTemplate","isLaizi","active","node","addChild","setCardAlbedo","value","setBlack","vlaue"],"mappings":"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","sourcesContent":["\nimport { instantiate, MeshRenderer, Node, Texture2D, Vec3, _decorator } from 'cc';\nimport { Utils } from '../../../framework/Utils';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { FXJRes } from '../common/FXJRes';\nimport { CardUtil } from '../util/CardUtil';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = NodeCardCtr\n * URL = db://assets/package/game/scripts/NodeCardCtr.ts\n * Time = Tue Aug 08 2023 15:30:03 GMT+0800 (中国标准时间)\n * Author = harvyson\n *\n * Life: onLoad-->onInitModuleEvent-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * \n */\n\n@ccclass('NodeCardCtr')\nexport class NodeCardCtr extends BaseComponent {\n    // 手牌模型节点\n    @property({ tooltip: \"手牌模型节点\", type: Node })\n    private nodeCardMesh: Node | null = null;\n\n    // 手牌标签模板节点\n    @property({ tooltip: \"手牌标签模板节点\", type: Node })\n    private nodeCardTabTemplate: Node | null = null;\n\n    // 固有色\n    private albedo: Vec3 = new Vec3(1, 1, 1);\n\n    // 手牌标签节点\n    private nodeCardTab: Node = null;\n\n    public byte: number = 0;\n\n    /** override 初始化模块事件 */\n    protected onInitModuleEvent() {\n\n    };\n\n    onLoad(): void {\n\n    }\n\n    /** 设置手牌数值 */\n    public setCardByte(byte: number) {\n        this.byte = byte;\n        let cardStr = CardUtil.getCardValue(byte);\n\n        let path = Utils.string_format(FXJRes.Picture_Game_Card.path, cardStr)\n        // console.log(\"NodeCardCtr\", \"setCardByte\", \"path\", path)\n        this.getPreLoaderRes(FXJRes.Picture_Game_Card.bundle, path, Texture2D, (tex) => {\n            if (!tex) {\n                console.log(\"NodeCardCtr\", \"setCardByte\")\n                return;\n            }\n            this.nodeCardMesh.getComponent(MeshRenderer)!.material!.setProperty('albedoMap', tex);\n        })\n\n        if (Utils.isNotNull(this.nodeCardTabTemplate)) {\n            let isLaizi = CardUtil.getCardValue(this.byte) === \"0x21\";\n            if (Utils.isNotNull(this.nodeCardTab)) {\n                this.nodeCardTab.active = isLaizi;\n            } else {\n                if (isLaizi) {\n                    this.nodeCardTab = instantiate(this.nodeCardTabTemplate);\n                    this.node.addChild(this.nodeCardTab);\n                    this.nodeCardTab.active = true;\n                }\n            }\n        }\n    }\n\n    /** 设置手牌固有色 */\n    public setCardAlbedo(value: Vec3) {\n        this.albedo = value;\n        this.nodeCardMesh.getComponent(MeshRenderer)!.material!.setProperty('albedo', this.albedo);\n    }\n\n    /** 设置是否变黑 */\n    public setBlack(vlaue: boolean) {\n        if (vlaue) {\n            this.nodeCardMesh.getComponent(MeshRenderer)!.material!.setProperty('albedo', new Vec3(0.2, 0.2, 0.2));\n        } else {\n            this.nodeCardMesh.getComponent(MeshRenderer)!.material!.setProperty('albedo', this.albedo);\n        }\n    }\n\n\n\n}\n\n"]}
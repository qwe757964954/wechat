{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/scripts/GameHeadInfoPrefabCtr.ts"],"names":["Label","Node","Sprite","SpriteAtlas","SpriteFrame","_decorator","instantiate","GCache","Utils","Encrypt","SpriteLoad","DelegateComponent","resLoader","EventManager","BaseComponent","Platform","PlayerMgr","FXJConstant","FXJEvent","FXJRes","FXJSound","GameEvent","ccclass","property","menu","GameHeadInfoPrefabCtr","tooltip","type","_uid","_posID","_player","onInitModuleEvent","addModelListener","VIEW_PLAYER_UPDATE_BASEINFO","updateUserInfo","VIEW_PLAYER_UPDATE_PROPERTY","updateCoin","VIEW_BROADCAST_PLAYER_EXIT","receiveUserExitRoom","onLoad","getComp","checkBaseData","initView","updateListProps","start","updateUserPlayer","getInstance","findPlayerWithUserId","seatId","cloneProp","active","propList","comp","node","getComponent","param","getParams","isNull","uid","event","updateHead","gameUserInfo","spriteLoad","headNode","headPic","avatar_b","isSetAvatar","length","setRemoteUrl","sex","number_valueOf","sexNode","spriteFrame","manPic","womanPic","setLocalLoad","Picture_UserBigHead_boy","bundle","path","Picture_UserBigHead_girl","nameLabel","string","nickName","playIdLabel","userId","moneyLabel","string_matchStr","money","dataList","EmojiProp","maxLen","children","i","info","itemNode","addChild","img_item","getChildByName","load","Atlas_Game_EmojiProp","err","atlas","isValid","getSpriteFrame","icon","spriteComponent","sizeMode","node_price","money_icon","label_name","name","destroy","onClickClose","dispatch","SYS_PLAY_EFFECT","CommClick","onClickProp","currentTarget","console","log","propsId","propID","fromId","User","getUserMid","obj","from","to","text","JsonEncode","GAME_REQ_EMOJI_PROPS_MSG","hdInfo","prop_id","to_uid","VIEW_DESK_ANI_PLAY","AnimNormal","HudongProp","posID","onClickCopy","e","String","copyClipboard","onDestroy"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Label, Node, Sprite, SpriteAtlas, SpriteFrame, _decorator, instantiate } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { Utils } from '../../../framework/Utils';\nimport { Encrypt } from '../../../framework/crypto/Encrypto';\nimport SpriteLoad from '../../../framework/gui/sprite/SpriteLoad';\nimport { DelegateComponent } from '../../../framework/layer/DelegateComponent';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { Platform } from '../../../platform/Platform';\nimport { PlayerMgr } from '../cache/PlayerMgr';\nimport { FXJConstant } from '../common/FXJConstant';\nimport { FXJEvent } from '../common/FXJEvent';\nimport { FXJRes } from '../common/FXJRes';\nimport { FXJSound } from '../common/FXJSound';\nimport { GameEvent } from '../common/GameEvent';\nconst { ccclass, property, menu } = _decorator;\n\n\n/**\n * Name = GameHeadInfoPrefabCtr\n * URL = db://assets/package/game/scripts/GameHeadInfoPrefabCtr.ts\n * Time = Fri Sep 09 2022 11:45:37 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('GameHeadInfoPrefabCtr')\n//方便编辑器识别的菜单项目\n@menu('prefab/game/GameHeadInfoPrefabCtr')\nexport class GameHeadInfoPrefabCtr extends BaseComponent {\n\n\t//头像节点\n\t@property({ tooltip: \"头像节点\", type: Node })\n\tprivate headNode: Node | null = null;\n\n\t//头像框节点\n\t@property({ tooltip: \"头像框节点\", type: Node })\n\tprivate headFrameNode: Node | null = null;\n\n\t//性别节点\n\t@property({ tooltip: \"性别\", type: Node })\n\tprivate sexNode: Node | null = null;\n\n\t//昵称\n\t@property({ tooltip: \"昵称\", type: Label })\n\tprivate nameLabel: Label | null = null;\n\n\t//用户ID\n\t@property({ tooltip: \"用户ID\", type: Label })\n\tprivate playIdLabel: Label | null = null;\n\n\n\t//钱币类型\n\t@property({ tooltip: \"钱币类型\", type: Sprite })\n\tprivate moneyCoin: Sprite | null = null;\n\n\t//钱币数量\n\t@property({ tooltip: \"钱币数量\", type: Label })\n\tprivate moneyLabel: Label | null = null;\n\n\t//道具父节点\n\t@property({ tooltip: \"道具父节点\", type: Node })\n\tprivate propList: Node | null = null;\n\n\t//克隆道具\n\t@property({ tooltip: \"克隆道具\", type: Node })\n\tprivate cloneProp: Node | null = null;\n\n\t//性别男\n\t@property({ tooltip: \"性别男\", type: SpriteFrame })\n\tprivate manPic: SpriteFrame | null = null;\n\n\t//性别女\n\t@property({ tooltip: \"性别女\", type: SpriteFrame })\n\tprivate womanPic: SpriteFrame | null = null;\n\n\t//玩家id\n\tprivate _uid: number;\n\t//玩家座位号\n\tprivate _posID: number;\n\n\t//玩家缓存\n\tprivate _player = null;\n\n\t/**初始化添加事件绑定 */\n\tprotected onInitModuleEvent(): void {\n\t\t//玩家基本信息有更新\n\t\tthis.addModelListener(FXJEvent.VIEW_PLAYER_UPDATE_BASEINFO, this.updateUserInfo);\n\t\t//玩家资产有更新\n\t\tthis.addModelListener(FXJEvent.VIEW_PLAYER_UPDATE_PROPERTY, this.updateCoin);\n\t\t//玩家退出\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_PLAYER_EXIT, this.receiveUserExitRoom);\n\t}\n\n\n\tonLoad() {\n\t\tthis.getComp();\n\t\tthis.checkBaseData();\n\t\tthis.initView();\n\t\tthis.updateUserInfo();\n\t\tthis.updateListProps();\n\t};\n\n\tstart() {\n\n\t};\n\t/** 更新玩家数据 */\n\tupdateUserPlayer() {\n\t\tthis._player = PlayerMgr.getInstance().findPlayerWithUserId(this._uid)\n\t\tif (this._player) {\n\t\t\tthis._posID = this._player.seatId;\n\t\t} else {\n\t\t\tthis._posID = null;\n\t\t}\n\t}\n\tinitView() {\n\t\tthis.cloneProp.active = false;\n\t\tthis.propList.active = true;\n\t}\n\tgetComp() {\n\t\tlet comp = this.node.getComponent(DelegateComponent)\n\t\tif (comp) {\n\t\t\tlet param = comp.getParams();\n\t\t\tif (Utils.isNull(param) == false) {\n\t\t\t\tthis._uid = param.uid;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t * 检验用户基础信息\n\t * @returns \n\t */\n\tcheckBaseData() {\n\t\tif (!this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUserPlayer();\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t}\n\t/** 更新玩家信息 */\n\tupdateUserInfo(event = null, uid = null) {\n\t\tif (event != null && uid != this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUserPlayer();\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateHead();\n\t\tthis.updateCoin();\n\t}\n\n\n\t/**\n\t * 更新玩家界面信息\n\t * @returns \n\t */\n\tupdateHead() {\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t\tlet gameUserInfo = this._player.gameUserInfo;\n\t\tlet spriteLoad = this.headNode.getComponent(SpriteLoad);\n\t\tlet headPic = gameUserInfo.avatar_b;\n\t\tlet isSetAvatar = 0;\n\t\tif (headPic.length > 0) {\n\t\t\tisSetAvatar = 1;\n\t\t\tspriteLoad.setRemoteUrl(headPic)\n\t\t} \n\t\tlet sex =Utils.number_valueOf(gameUserInfo.sex);\n\t\tif (sex == 1) {//男\n\t\t\tthis.sexNode.getComponent(Sprite).spriteFrame = this.manPic;\n\t\t\tthis.sexNode.active = true;\n\t\t} else if (sex == 2) {//女\n\t\t\tthis.sexNode.getComponent(Sprite).spriteFrame = this.womanPic;\n\t\t\tthis.sexNode.active = true;\n\t\t} else {\n\t\t\tthis.sexNode.active = false;\n\t\t}\n\t\t//设置默认头像\n\t\tif (isSetAvatar<=0) {\n\t\t\tif (sex == 1) {\t\t\t\n\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_boy.bundle, FXJRes.Picture_UserBigHead_boy.path);\n\t\t\t} else {\n\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_girl.bundle, FXJRes.Picture_UserBigHead_girl.path);\n\t\t\t}\n\t\t}\n\t\t//昵称\n\t\tthis.nameLabel.string = gameUserInfo.nickName;\t\n\t\tthis.playIdLabel.string = this._player.userId;\n\t}\n\n\t/**\n\t * 更新玩家银币\n\t * @param event \n\t * @param uid \n\t * @returns \n\t */\n\tupdateCoin(event = null, uid = null) {\n\t\tif (event != null && uid != this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUserPlayer();\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t\tthis.moneyLabel.string = Utils.string_matchStr(this._player.money);\n\t}\n\n\t\n\tupdateListProps() {\n\t\tlet dataList = FXJConstant.EmojiProp;\n\t\tlet maxLen = this.propList.children.length;\n\t\tif (dataList.length > maxLen) {\n\t\t\tmaxLen = dataList.length;\n\t\t}\n\t\t// {\n\t\t// \tpropID: 100,\n\t\t// \ticon: \"jidan.png\",\n\t\t// \taudio: FXJSound.emojiProp100,\n\t\t// \taniConf: {bundle:\"\", path:\"\"}\n\t\t// },\n\t\tfor (let i = 0; i < maxLen; i++) {\n\t\t\tif (dataList[i]) {\n\t\t\t\tlet info = dataList[i];\n\t\t\t\tlet itemNode = this.propList.children[i];\n\t\t\t\tif (itemNode == null) {\n\t\t\t\t\titemNode = instantiate(this.cloneProp);\n\t\t\t\t\tthis.propList.addChild(itemNode);\n\t\t\t\t}\n\t\t\t\tlet img_item = itemNode.getChildByName(\"img_item\");\n\t\t\t\tresLoader.load(FXJRes.Atlas_Game_EmojiProp.bundle, FXJRes.Atlas_Game_EmojiProp.path, SpriteAtlas, (err: Error | null, atlas) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (!img_item || img_item .isValid == false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet spriteFrame = atlas.getSpriteFrame(info.icon)\n\t\t\t\t\tif (spriteFrame) {\n\t\t\t\t\t\tlet spriteComponent = img_item.getComponent(Sprite);\n\t\t\t\t\t\tspriteComponent.sizeMode = 0;\n\t\t\t\t\t\tspriteComponent.spriteFrame = spriteFrame;\n\t\t\t\t\t\timg_item.active = true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tlet node_price = itemNode.getChildByName(\"node_price\");\n\t\t\t\tlet money_icon = node_price.getChildByName(\"money_icon\");\n\t\t\t\tlet label_name = node_price.getChildByName(\"label_name\"); \n\t\t\t\tnode_price.active = true;\n\t\t\t\tmoney_icon.active = false;\n\t\t\t\tlabel_name.getComponent(Label).string = info.name;\n\t\t\t\titemNode[\"PropData\"] = info;\n\t\t\t\titemNode.active = true;\n\t\t\t} else {\n\t\t\t\tif (this.propList.children[i]) {\n\t\t\t\t\tthis.propList.children[i].destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\n\t/**\n\t * 点击关闭\n\t * @param event \n\t */\n\tonClickClose(event: EventTouch) {\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tthis.node.destroy();\n\t}\n\n\n\t/**\n\t * 点击互动道具\n\t * @param event \n\t * @returns \n\t */\n\tonClickProp(event: EventTouch) {\n\t\tlet node = event.currentTarget;\n\t\tif (node[\"PropData\"] == null) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tlet info = node[\"PropData\"];\n\t\tconsole.log(info)\n\t\tlet propsId = info.propID;\n\t\tlet fromId = GCache.User.getUserMid()\n\t\tfromId=Utils.number_valueOf(fromId)\n\t\tlet obj = {\n\t\t\tfrom:fromId,\n\t\t\tto:this._uid\n\t\t}\n\t\tlet text=Encrypt.JsonEncode(obj)\n\t\tEventManager.dispatch(FXJEvent.GAME_REQ_EMOJI_PROPS_MSG, propsId, text);\n\t\tconsole.log(\"点击发送道具:onClickProp\")\n\t\t//自己页面上展示动画\t\n\t\tlet hdInfo = {\n\t\t\tuid: fromId,\n\t\t\tprop_id: propsId,\n\t\t\tto_uid:this._uid\n\t\t}\n\t\tEventManager.dispatch(FXJEvent.VIEW_DESK_ANI_PLAY, FXJConstant.AnimNormal.HudongProp, hdInfo);\n\t\tthis.node.destroy();\n\n\t}\n\n\t\n\t/**\n\t * 玩家退出房间 关闭界面\n\t * @param event \n\t * @param posID \n\t */\n\treceiveUserExitRoom(event, posID) {\n\t\tif (posID != null && posID == this._posID) {\n\t\t\tthis.node.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * 复制ID\n\t * @param e \n\t */\n\tonClickCopy(e: any) {\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tlet uid=String(this._uid)\n\t\tPlatform.copyClipboard(uid);\n\t}\n\t\n\t//销毁\n\tonDestroy() {\n\n\t};\n\n}\n\n"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/proj/servers/SelectGameServers.ts"],"names":["SelectGameServers","GCache","AppEvent","EventManager","BaseControll","GlobalCMD","getInstance","_instance","constructor","name","init","clear","onInitModuleEvent","addModelListener","NET_REQ_HALL_QUICK_START_CONFIG","reqHallQuickStartConfig","NET_FORWARD_HALL_QUICK_START_CONFIG","respHallQuickStartConfig","event","sendMsg","cmd","PHP_GET_FAST_START_CONFIG","body","dispatch","NET_SEND_MSG","isSuccess","respData","reqData","dump","SelectGame","updateServerGameConfig","info"],"mappings":";;;uFAcaA,iB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAdJC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;mCAEaL,iB,GAAN,MAAMA,iBAAN;AAAA;AAAA,wCAA6C;AAEvB,eAAXM,WAAW,GAAsB;AAC3C,cAAI,CAAC,KAAKC,SAAN,IAAmB,KAAKA,SAAL,IAAkB,IAAzC,EAA+C;AAC3C,iBAAKA,SAAL,GAAiB,IAAIP,iBAAJ,CAAsB,mBAAtB,CAAjB;AACH;;AACD,iBAAO,KAAKO,SAAZ;AACH,SAP+C,CAShD;;;AACAC,QAAAA,WAAW,CAACC,IAAD,EAAe;AACtB,gBAAMA,IAAN;AACH;;AACiB,eAAJC,IAAI,GAAsB;AACpC,cAAI,KAAKH,SAAT,EAAoB;AAChB,iBAAKA,SAAL,CAAeI,KAAf;AACH;;AACD,eAAKJ,SAAL,GAAiB,IAAjB;AACAP,UAAAA,iBAAiB,CAACM,WAAlB;AACA;AACH;AAED;;;AACUM,QAAAA,iBAAiB,GAAS;AAChC;AACA;AACN,eAAKC,gBAAL,CAAsB;AAAA;AAAA,oCAASC,+BAA/B,EAAgE,KAAKC,uBAArE,EAHsC,CAItC;;AACA,eAAKF,gBAAL,CAAsB;AAAA;AAAA,oCAASG,mCAA/B,EAAoE,KAAKC,wBAAzE;AACG,SA7B+C,CA+BhD;;;AACHF,QAAAA,uBAAuB,CAACG,KAAD,EAAQ;AAC9B,cAAIC,OAAO,GAAG;AACbC,YAAAA,GAAG,EAAE;AAAA;AAAA,wCAAUC,yBADF;AAEbC,YAAAA,IAAI,EAAE;AAFO,WAAd;AAIA;AAAA;AAAA,4CAAaC,QAAb,CAAsB;AAAA;AAAA,oCAASC,YAA/B,EAA6CL,OAA7C;AACA,SAtCkD,CAwChD;;;AACHF,QAAAA,wBAAwB,CAACC,KAAD,EAAQO,SAAR,EAAmBC,QAAnB,EAA6BC,OAA7B,EAAsC;AAC7D,eAAKC,IAAL,CAAUF,QAAV,EAAoB,aAAaD,SAAjC;;AAEA,cAAIA,SAAJ,EAAe;AACd;AAAA;AAAA,kCAAOI,UAAP,CAAkBC,sBAAlB,CAAyCJ,QAAQ,CAACK,IAAlD,EADc,CAEd;AACA;AACD;;AAhDkD,O;;AAAvC/B,MAAAA,iB,CACMO,S,GAAY,I","sourcesContent":["import { GCache } from \"../../cache/GCache\";\nimport { AppEvent } from \"../../config/AppEvent\";\nimport { EventManager } from \"../../framework/manager/EventManager\";\nimport { BaseControll } from \"../../framework/vc/BaseController\";\nimport { GlobalCMD } from \"../gnet/GlobalCMD\";\n\n/**\n * Name = SelectGameServers\n * URL = db://assets/proj/servers/SelectGameServers.ts\n * Time = Wed 2023 07.25 19:03:18 GMT+0800 (中国标准时间)\n * Author = xueya\n * 选场相关服务\n */\n\nexport class SelectGameServers extends BaseControll {\n    private static _instance = null;\n    public static getInstance(): SelectGameServers {\n        if (!this._instance || this._instance == null) {\n            this._instance = new SelectGameServers(\"SelectGameServers\");\n        }\n        return this._instance;\n    }\n\n    //实例化\n    constructor(name: string) {\n        super(name)\n    };\n    public static init(): SelectGameServers {\n        if (this._instance) {\n            this._instance.clear()\n        }\n        this._instance = null\n        SelectGameServers.getInstance();\n        return\n    }\n\n    /**初始化添加事件绑定 */\n    protected onInitModuleEvent(): void {\n        // //请求获取游戏列表信息\n        //请求快速开始配置\n\t\tthis.addModelListener(AppEvent.NET_REQ_HALL_QUICK_START_CONFIG, this.reqHallQuickStartConfig)\n\t\t//快速开始配置返回\n\t\tthis.addModelListener(AppEvent.NET_FORWARD_HALL_QUICK_START_CONFIG, this.respHallQuickStartConfig)\n    }\n\n    //请求快速开始配置\n\treqHallQuickStartConfig(event) {\n\t\tlet sendMsg = {\n\t\t\tcmd: GlobalCMD.PHP_GET_FAST_START_CONFIG,\n\t\t\tbody: {},\n\t\t}\n\t\tEventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n\t}\n\n    //快速开始配置返回\n\trespHallQuickStartConfig(event, isSuccess, respData, reqData) {\n\t\tthis.dump(respData, \"快速开始配置返回\" + isSuccess)\n        \n\t\tif (isSuccess) {\n\t\t\tGCache.SelectGame.updateServerGameConfig(respData.info)\n\t\t\t// EventManager.dispatch(AppEvent.HALL_UPDATE_GAME_CONFIG)\n\t\t}\n\t}\n}"]}
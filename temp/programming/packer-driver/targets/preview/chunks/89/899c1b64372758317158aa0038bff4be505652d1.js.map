{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/cache/Room.ts"],"names":["Room","SettleMgr","Desk","EventManager","FXJEvent","FXJUIID","GameEvent","BankerMgr","OperationMgr","OperationResultMgr","PlayerMgr","RoomMgr","constructor","turnMe","bankerMgr","getInstance","enterRoomUpdate","resp","updateRoomInfo","setPlayerList","playerList","getMyPlayerInfo","reconnectionRoomUpdate","players","operation","userOperation","dispatch","VIEW_USER_OPERATION","DRAW_MY_CARD","settleItems","forEach","item","updateSettleResult","GAME_OPEN_POPUP","GameSettlePrefab","dealCardUpdate","updatePlayerCardsNum","cardsCount","updateMyhands","cards","updateRemainCardsCount","remainCardsCount","gameGrabCard","remainCardNum","updateOutCards","updateFanGangCards","remainCardCount","fangangCards","gangCount","updateSelectFanGangCards","selectFanGangCards","card","bankerFirstOperation","bankSeatId","updateMyselfOpration","userOperationResult","updateSelectInfo","gameOverResult","isReady"],"mappings":"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","sourcesContent":["import { SettleMgr } from './SettleMgr';\n/**\n * Name = Room\n * URL = db://assets/package/game/cache/Room.ts\n * Time = Mon Jul 24 2023 19:18:24 GMT+0800 (中国标准时间)\n * Author = xueya\n * 游戏房间缓存\n */\n\nimport { Desk } from \"../../../cache/Desk\";\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { FXJEvent } from '../common/FXJEvent';\nimport { FXJUIID } from '../common/FXJRes';\nimport { GameEvent } from '../common/GameEvent';\nimport { Game } from \"../common/idl/Game\";\nimport { BankerMgr } from \"./BankerMgr\";\nimport { OperationMgr } from \"./OperationMgr\";\nimport { OperationResultMgr } from \"./OperationResultMgr\";\nimport { PlayerMgr } from \"./PlayerMgr\";\nimport { RoomMgr } from \"./RoomMgr\";\nexport class Room extends Desk {\n\tprivate turnMe:boolean = false;\n\t//实例化\n\tconstructor() {\n\t\tsuper(\"Room\")\n\t};\n\t// fixLaizi: IFixLaizi;\n\t// RoomMgr.getInstance()\n\tbankerMgr?:BankerMgr = BankerMgr.getInstance();\n\tpublic enterRoomUpdate(resp:Game.IUserLoginRoom) :void{\n\t\tRoomMgr.getInstance().updateRoomInfo(resp);\n\t\tPlayerMgr.getInstance().setPlayerList(resp?.playerList);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo();\n\t}\n\t\n\tpublic reconnectionRoomUpdate(resp:Game.IUserReconnect) :void{\n\t\tRoomMgr.getInstance().updateRoomInfo(resp);\n\t\tPlayerMgr.getInstance().setPlayerList(resp?.players);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo();\n\t\tif(resp.operation){\n\t\t\tthis.userOperation(resp.operation);\n\t\t\tEventManager.dispatch(GameEvent.VIEW_USER_OPERATION,resp.operation);\n\t\t\tEventManager.dispatch(GameEvent.DRAW_MY_CARD);\n\t\t}\n\t\tif(resp.settleItems){\n\t\t\tresp.settleItems.forEach((item:Game.ISettleItem) => {\n\t\t\t\tthis.updateSettleResult(item);\n\t\t\t\tEventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameSettlePrefab);\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\n\tpublic dealCardUpdate(resp:Game.IDealCard) :void{\n\t\tPlayerMgr.getInstance().updatePlayerCardsNum(resp.cardsCount);\n\t\tPlayerMgr.getInstance().updateMyhands(resp.cards);\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardsCount);\n\t}\n\n\tpublic gameGrabCard(resp:Game.IGrabCard) :void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardNum);\n\t\tPlayerMgr.getInstance().updateOutCards(resp);\n\t}\n\n\tpublic updateFanGangCards(resp:Game.IUpdateFanGangPai) : void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardCount);\n\t\tRoomMgr.getInstance().fangangCards = resp.cards;\n\t\tPlayerMgr.getInstance().gangCount = resp.gangCount;\n\t}\n\n\tpublic updateSelectFanGangCards(resp:Game.ISelectFanGangPai) : void {\n\t\tRoomMgr.getInstance().selectFanGangCards = resp.card;\n\t}\n\t\n\tpublic bankerFirstOperation(resp:Game.IFixBanker) : void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardNum);\n\t\tRoomMgr.getInstance().bankSeatId = resp.bankSeatId;\n\t}\n\t\n\tpublic userOperation(resp:Game.IOperation) : void {\n\t\tOperationMgr.getInstance().updateMyselfOpration(resp);\n\t\tthis.turnMe = true;\n\t}\n\t\n\tpublic userOperationResult(resp:Game.IOperationResult) : void {\n\t\tOperationResultMgr.getInstance().userOperationResult(resp);\n    }\n\t\n\tpublic updateSettleResult(resp:Game.ISettleItem) : void {\n\t\tSettleMgr.getInstance().updateSelectInfo(resp);\n\t}\n\n\tpublic gameOverResult() : void {\n\t\t// SettleMgr.getInstance().updateSelectInfo(resp);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo().isReady = 0;\n\t}\n}"]}
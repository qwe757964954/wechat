{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/framework/vc/PictureTabDialogComponet.ts"],"names":["ImageAsset","Node","Sprite","Toggle","_decorator","instantiate","GCache","AppEvent","AppSound","GameRes","Utils","resLoader","EventManager","BaseComponent","ccclass","property","PictureTabDialogComponent","tooltip","type","constructor","_allResMapList","Picture_GameRule","_loadResMapList","Map","_curMaxResNum","_curResNum","_dialogType","_curSeletedTab","preLoad","firstRunLoadSuccess","self","set","resConf","i","get","oneResConf","j","conf","tab","load","bundle","path","err","imageAsset","print","updateView","length","content","onLoad","initData","initView","start","comp","node","getComponent","getParams","isNull","resLoad","menuListNode","children","size","oneResLoad","isNotNull","menuNode","menuTemplate","toggle","clickEvents","customEventData","String","spriteFrame","image_ImageAssetToSpriteFrame","checkmark","getChildByName","active","addChild","isChecked","updateViewContent","onClickItem","event","number_valueOf","resSelected","contentNode","removeAllChildren","nodeNoTips","imageAssert","creatorSpriteNode","onClickCancel","dispatch","SYS_PLAY_EFFECT","CommClick","destroy","create_2DSprite","onDestroy"],"mappings":"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","sourcesContent":["\nimport { ImageAsset, Node, Sprite, SpriteFrame, Toggle, _decorator, instantiate } from 'cc';\nimport { GCache } from '../../cache/GCache';\nimport { AppEvent } from '../../config/AppEvent';\nimport { AppSound } from '../../config/AppSound';\nimport { GameRes } from '../../config/GameRes';\nimport { Utils } from '../../framework/Utils';\nimport { resLoader } from '../../framework/loader/ResLoader';\nimport { EventManager } from '../../framework/manager/EventManager';\nimport { BaseComponent } from '../../framework/vc/BaseComponent';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = PictureTabDialogComponent\n * URL = db://assets/package/login/scripts/PictureTabDialogComponent.ts\n * Time = Thu Aug 04 2022 17:12:23 GMT+0800 (中国标准时间)\n * Author = xueya\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * \n * 用户协议和隐私政策\n */\n\n@ccclass('PictureTabDialogComponent')\nexport class PictureTabDialogComponent extends BaseComponent {\n\n\t//正文标题\n\t@property({ tooltip: \"标题内容\", type: Node })\n\ttitleNode: Node = null!;\n\n\t//正文节点\n\t@property({ tooltip: \"正文节点\", type: Node })\n\tcontentNode: Node = null!;\n\n\t//滚动条节点\n\t@property({ tooltip: \"滚动条节点\", type: Node })\n\tscrollowBarNode: Node = null!;\n\n\t//菜单模板\n\t@property({ tooltip: \"菜单列表节点\", type: Node })\n\tmenuListNode: Node = null!;\n\t\n\t//菜单模板\n\t@property({ tooltip: \"菜单模板\", type: Node })\n\tmenuTemplate: Node = null!;\n\n\t//无内容时的节点\n\t@property({ tooltip: \"无内容时的节点\", type: Node })\n\tnodeNoTips: Node = null!;\n\n\tprivate _allResMapList = {\n\t\t\"玩法规则\": GameRes.Picture_GameRule,\n\t}\n\n\tprivate _loadResMapList: Map<string, Map<number, Map<string, Map<number, ImageAsset>>>> = new Map();\n\t//当前最大资源加载数量\n\tprivate _curMaxResNum: Map<string, number> = new Map();\n\t//当前资源加载数量\n\tprivate _curResNum: Map<string, number> = new Map();\n\t//当前类型\n\tprivate _dialogType: string = null;\n\t//当前选择tab\n\tprivate _curSeletedTab: number = 0;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.preLoad();\n\t}\n\t//预加载\n\tpreLoad() {\n\t\tif (!GCache.firstRunLoadSuccess) {\n\t\t\treturn;\n\t\t}\n\t\tlet self = this;\n\t\tfor (let type in this._allResMapList) {\n\t\t\tself._loadResMapList.set(type, new Map());\n\t\t\tself._curMaxResNum.set(type, 0);\n\t\t\tself._curResNum.set(type, 0);\n\t\t\t\n\t\t\tlet resConf = self._allResMapList[type];\n\t\t\tfor (let i = 0; i < resConf.length; i++) {\n\t\t\t\tself._loadResMapList.get(type).set(i, new Map());\n\t\t\t\tself._loadResMapList.get(type).get(i).set(\"tab\", new Map());\n\t\t\t\tself._loadResMapList.get(type).get(i).set(\"content\", new Map());\n\t\t\t\t\n\t\t\t\tlet oneResConf = resConf[i];\n\t\t\t\tfor (let j = 0; j < oneResConf.tab.length; j++) {\n\t\t\t\t\tlet conf = oneResConf.tab[j];\n\t\t\t\t\tself._curMaxResNum.set(type, self._curMaxResNum.get(type) + 1);\n\t\t\t\t\tresLoader.load(conf.bundle, conf.path, ImageAsset, (err: Error | null, imageAsset) => {\n\t\t\t\t\t\tif (err || !self._loadResMapList) {\n\t\t\t\t\t\t\tself.print(\"error\", err)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._loadResMapList.get(type).get(i).get(\"tab\").set(j, imageAsset);\n\t\t\n\t\t\t\t\t\tself._curResNum.set(type, self._curResNum.get(type) + 1);\n\n\t\t\t\t\t\tif (self._dialogType == type) {\n\t\t\t\t\t\t\tself.updateView();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tfor (let j = 0; j < oneResConf.content.length; j++) {\n\t\t\t\t\tlet conf = oneResConf.content[j];\n\t\t\t\t\tself._curMaxResNum.set(type, self._curMaxResNum.get(type) + 1);\n\t\t\t\t\tresLoader.load(conf.bundle, conf.path, ImageAsset, (err: Error | null, imageAsset) => {\n\t\t\t\t\t\tif (err || !self._loadResMapList) {\n\t\t\t\t\t\t\tself.print(\"error\", err)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n \t\t\t\t\t\tself._loadResMapList.get(type).get(i).get(\"content\").set(j, imageAsset);\n\n\n\t\t\t\t\t\tself._curResNum.set(type, self._curResNum.get(type) + 1);\n\n\t\t\t\t\t\tif (self._dialogType == type) {\n\t\t\t\t\t\t\tself.updateView();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\tonLoad() {\n\t\tthis.initData();\n\t\tthis.initView();\n\t\tthis.updateView();\n\t};\n\tstart() {\n\t}\n\n\tinitData() {\n\t\tlet comp = null;\n\t\tcomp = this.node.getComponent(\"DelegateComponent\")\n\t\tif (comp) {\n\t\t\tthis._dialogType = comp.getParams()\n\t\t\tthis._curSeletedTab = 0;\n\t\t}\n\t}\n\n\tinitView() {\n\t}\n\t\n\t/** 更新界面 */\n\tupdateView() {\n\t\tif (Utils.isNull(this._dialogType)) {\n\t\t\tthis.print(\"PictureTabDialogComponent\", \"updateView\", \"参数错误\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (Utils.isNull(this._allResMapList[this._dialogType])) {\n\t\t\tthis.print(\"PictureTabDialogComponent\", \"updateView\", \"弹框类型错误\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._curResNum.get(this._dialogType) != this._curMaxResNum.get(this._dialogType)) {\n\t\t\tthis.print(\"PictureTabDialogComponent\", \"updateView\", \"资源加载中\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tlet resLoad = this._loadResMapList.get(this._dialogType)\n\t\tif (this.menuListNode.children.length <= 1) {\n\t\t\tfor (let i = 0; i < resLoad.size; i++) {\n\t\t\t\tlet oneResLoad = resLoad.get(i);\n\t\t\t\tif (Utils.isNotNull(oneResLoad.get(\"tab\"))) {\n\t\t\t\t\tlet menuNode = instantiate(this.menuTemplate);\n\t\t\t\t\tlet toggle = menuNode.getComponent(Toggle)\n\t\t\t\t\ttoggle.clickEvents[0].customEventData = String(i);\n\t\t\t\t\tmenuNode.getComponent(Sprite).spriteFrame = Utils.image_ImageAssetToSpriteFrame(oneResLoad.get(\"tab\").get(0));\n\t\t\t\t\t\n\t\t\t\t\tlet checkmark: Node = menuNode.getChildByName(\"Checkmark\");\n\t\t\t\t\tcheckmark.getComponent(Sprite).spriteFrame = Utils.image_ImageAssetToSpriteFrame(oneResLoad.get(\"tab\").get(1));\n\t\t\t\t\tmenuNode.active = true;\n\t\t\t\t\tthis.menuListNode.addChild(menuNode);\n\n\t\t\t\t\tif (this._curSeletedTab == i) {\n\t\t\t\t\t\ttoggle.isChecked = true;\n\t\t\t\t\t\tthis.updateViewContent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonClickItem(event: Event, customEventData: string){\n\t\tthis._curSeletedTab = Utils.number_valueOf(customEventData, 0)\n\t\tthis.updateViewContent();\n    }\n\n\t/** 更新内容 */\n\tupdateViewContent() {\n\t\tif (Utils.isNull(this._dialogType)) {\n\t\t\tthis.print(\"PictureTabDialogComponent\", \"updateView\", \"参数错误\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (Utils.isNull(this._allResMapList[this._dialogType])) {\n\t\t\tthis.print(\"PictureTabDialogComponent\", \"updateView\", \"弹框类型错误\");\n\t\t\treturn;\n\t\t}\n\n\t\tlet resLoad = this._loadResMapList.get(this._dialogType);\n\t\tlet resSelected = resLoad.get(this._curSeletedTab);\n\t\tif (Utils.isNull(resSelected)) {\n\t\t\tthis.print(\"PictureTabDialogComponent\", \"updateView\", \"tab索引错误\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (Utils.isNotNull(resSelected.get(\"content\"))) {\n\t\t\tthis.contentNode.removeAllChildren();\n\t\t\tthis.nodeNoTips.active = false;\n\t\t\tfor (let i = 0; i < resSelected.get(\"content\").size; i++) {\n\t\t\t\tlet imageAssert = resSelected.get(\"content\").get(i);\n\t\t\t\tif (imageAssert) {\n\t\t\t\t\tlet spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAssert);\n\t\t\t\t\tif (spriteFrame) {\n\t\t\t\t\t\tthis.contentNode.addChild(this.creatorSpriteNode(spriteFrame));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//点击了取消/关闭\n\tonClickCancel() {\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\tthis.node.destroy();\n\t}\n\n\tcreatorSpriteNode(spriteFrame: SpriteFrame): Node {\n\t\tlet node = Utils.create_2DSprite(spriteFrame, \"Sprite\");\n\t\treturn node;\n\t}\n\n\t//销毁\n\tonDestroy() {\n\n\t};\n\n}\n\n"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/framework/layer/LayerManager.ts"],"names":["_LayerManager","Camera","isValid","Layers","Node","Tween","tween","Vec3","warn","Widget","inf_LayerType","Logger","DelegateComponent","LayerDialog","LayerNotify","LayerPopUp","LayerUI","guiRoot","configs","NodeList","ZorderConf","instance","_instance","load","root","reload","clear","_load","logView","camera","getComponentInChildren","initGuiNode","create_node","addChild","childMaps","children","length","i","child","removeByNode","game","Game","ui","UI","popup","PopUp","dialog","Dialog","dialogTip","DialogTip","alert","Alert","dialogAnim","netwindow","NetWindow","notify","Notify","guide","Guide","Animal","updateZorder","layerType","Object","prototype","hasOwnProperty","call","node","zorder","setSiblingIndex","layer","Enum","UI_2D","initUIConfig","updateConfig","UIConfigList","UIID","config","open","uiId","uiArgs","callbacks","parent","isClickSpanceClose","isAutoRecover","LayerManager","loadState","prefab","console","log","add","has","isLoading","show","getToastEffectByTop","getToastEffectByCenter","getPopCommonEffect","result","remove","isDestroy","removeAll","comp","getComponent","viewParams","removeByUuid","uuid","destroy","clearOther","isIncludeNetWindow","allTypes","type","push","toDestoryNotNotify","name","w","addComponent","isAlignLeft","isAlignRight","isAlignTop","isAlignBottom","left","right","top","bottom","alignMode","enabled","AnimNode","newCallbacks","onAdded","params","setScale","setPosition","to","scale","easing","delay","parallel","position","start","widget","updateAlignment","by","outScale","minSpance","getScale","x","y","z","onBeforeRemove","next","setTimeout","shakeScreen","stopAllByTarget","sequence"],"mappings":"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","sourcesContent":["/**\n * Name = LayerManager\n * URL = db://assets/framework/LayerManager.ts\n * Time = Thu Apr 14 2022 11:51:20 GMT+0800 (中国标准时间)\n * Author = xueya\n * 界面管理器\n */\nimport { Camera, isValid, Layers, Node, Tween, tween, Vec3, warn, Widget } from \"cc\";\nimport { inf_LayerType, inf_PopViewParams, inf_UICallbacks, inf_UIConfig } from \"../InterfaceDefines\";\nimport { Logger } from \"../log/Logger\";\nimport { DelegateComponent } from \"./DelegateComponent\";\nimport { LayerDialog } from \"./LayerDialog\";\nimport { LayerNotify } from \"./LayerNotify\";\nimport { LayerPopUp } from \"./LayerPopup\";\nimport { LayerUI } from \"./LayerUI\";\n\n\n\n\nclass _LayerManager {\n    /** 类实例 */\n    private static _instance = null;\n\n    public static get instance(): _LayerManager {\n        if (!this._instance || this._instance == null) {\n            this._instance = new _LayerManager();\n        }\n        return this._instance;\n    }\n\n    /** 界面根节点 */\n    public root!: Node;\n    /** 实际根节点 */\n    public guiRoot: Node = null;\n    /** 界面摄像机 */\n    public camera!: Camera;\n    /** 游戏界面特效层 */\n    public game!: Node;\n    /** 新手引导层 */\n    public guide!: Node;\n\n    /** 界面层 */\n    private ui!: LayerUI;\n    /** 弹窗层 */\n    private popup!: LayerPopUp;\n    /** 一次只能弹出一个的弹窗 */\n    private dialog!: LayerDialog;\n    /** 一次只能弹出一个的弹窗 Dialog的附属界面*/\n    private dialogTip!: LayerDialog;\n    /** 系统提示弹窗（优先显示） */\n    private alert!: LayerDialog;\n    /** 动画展示弹窗 Dialog的附属界面*/\n    private dialogAnim!: LayerDialog;\n    /** 网络加载弹窗（屏蔽下层点击 只能显示一个） */\n    private netwindow!: LayerDialog;\n    /** 消息吐司，请使用show方法来显示 */\n    private notify!: LayerNotify;\n    /** UI配置 */\n    private configs: { [key: number]: inf_UIConfig } = {};\n\n    /** 节点List */\n    private NodeList = {};\n    /** 节点层级配置 */\n    private ZorderConf = {};\n    /**\n     * 开始加载UI\n     */\n    public load(root: Node) {\n        if (this.root) {\n            return\n        }\n        this.load(root)\n    }\n    /**\n     * 重新加载UI\n     */\n    public reload(root: Node) {\n        if (!root) {\n            warn(`重新加载UI失败，root不存在`);\n        }\n        this.clear()\n        this.root = null;\n        this._load(root)\n    }\n    /**\n     * _load\n     */\n    private _load(root: Node) {\n        Logger.logView(\"成功初始化！！！\")\n        this.root = root;\n        this.camera = this.root.getComponentInChildren(Camera)!;\n        this.initGuiNode()\n    }\n    /** 初始化添加所有节点 */\n    initGuiNode() {\n        if (!this.guiRoot || this.guiRoot.isValid == false) {\n            if (this.root) {\n                this.guiRoot = this.create_node(\"GUI\");\n                this.root.addChild(this.guiRoot);\n            } else {\n                return;\n            }\n        } else {\n            let childMaps = this.guiRoot.children\n            if (childMaps && childMaps?.length > 0) {\n                for (let i = 0; i < childMaps.length; i++) {\n                    let child = childMaps[i];\n                    this.removeByNode(child, true)\n                }\n            }\n        }\n        this.game = this.create_node(inf_LayerType.Game);\n        this.ui = new LayerUI(inf_LayerType.UI);\n        this.popup = new LayerPopUp(inf_LayerType.PopUp);\n        this.dialog = new LayerDialog(inf_LayerType.Dialog);\n        this.dialogTip = new LayerDialog(inf_LayerType.DialogTip);\n        this.alert = new LayerDialog(inf_LayerType.Alert);\n        this.dialogAnim = new LayerDialog(inf_LayerType.DialogTip);\n        this.netwindow = new LayerDialog(inf_LayerType.NetWindow);\n        this.notify = new LayerNotify(inf_LayerType.Notify);\n\n        this.guide = this.create_node(inf_LayerType.Guide);\n\n        /** UI出现的层级 */\n        this.ZorderConf = {\n            [inf_LayerType.Game]: 0,\n            [inf_LayerType.UI]: 1,\n            [inf_LayerType.PopUp]: 2,\n            [inf_LayerType.Dialog]: 3,\n            [inf_LayerType.DialogTip]: 4,\n            [inf_LayerType.Alert]: 5,\n            [inf_LayerType.Animal]: 6,\n            [inf_LayerType.NetWindow]: 7,\n            [inf_LayerType.Notify]: 8,\n            [inf_LayerType.Guide]: 9,\n        }\n        this.NodeList = {\n            [inf_LayerType.Game]: this.game,\n            [inf_LayerType.UI]: this.ui,\n            [inf_LayerType.PopUp]: this.popup,\n            [inf_LayerType.Dialog]: this.dialog,\n            [inf_LayerType.DialogTip]: this.dialogTip,\n            [inf_LayerType.Alert]: this.alert,\n            [inf_LayerType.Animal]: this.dialogAnim,\n            [inf_LayerType.NetWindow]: this.netwindow,\n            [inf_LayerType.Notify]: this.notify,\n            [inf_LayerType.Guide]: this.guide,\n        };\n        this.guiRoot.addChild(this.game);\n        this.guiRoot.addChild(this.ui);\n        this.guiRoot.addChild(this.popup);\n        this.guiRoot.addChild(this.dialog);\n        this.guiRoot.addChild(this.dialogTip);\n        this.guiRoot.addChild(this.alert);\n        this.guiRoot.addChild(this.dialogAnim);\n        this.guiRoot.addChild(this.netwindow);\n        this.guiRoot.addChild(this.notify);\n        this.guiRoot.addChild(this.guide);\n\n        this.updateZorder()\n    }\n    /** 更新节点位置 */\n    updateZorder() {\n        for (let layerType in this.NodeList) {\n            if (Object.prototype.hasOwnProperty.call(this.NodeList, layerType)) {\n                let node: Node = this.NodeList[layerType];\n                let zorder = this.ZorderConf[layerType];\n                node.setSiblingIndex(zorder);\n                node.layer = Layers.Enum.UI_2D;\n            }\n        }\n    }\n    /**\n     * 初始化所有UI的配置对象\n     * @param configs 配置对象\n     */\n    public initUIConfig(configs: { [key: number]: inf_UIConfig }): void {\n        this.configs = configs;\n    }\n    /**\n     * 插入一条UIConfig配置项\n     * @param UIID   要设置的界面id\n     * @param config 要设置的配置\n     */\n    public updateConfig(UIConfigList): void {\n        if (!UIConfigList) {\n            return\n        }\n        for (let UIID in UIConfigList) {\n            if (Object.prototype.hasOwnProperty.call(UIConfigList, UIID)) {\n                let config = UIConfigList[UIID];\n                if (!this.configs) {\n                    this.configs = {};\n                }\n                this.configs[UIID] = config;\n            }\n        }\n    }\n    /**\n     * 打开一个UIConfig配置的界面\n     * @param uiId 配置的UIID\n     * @param uiArgs 要传递给UI的数据\n     * @param callbacks 回调函数 参照UICallbacks的定义\n     * @param parent 自定义父节点\n     * @param isClickSpanceClose 是否点击空白区域关闭 默认false，不关闭\n     * @param isAutoRecover 是否自动释放加载的资源 默认false不释放\n     * @returns \n     */\n    public open(uiId: number, uiArgs: any = null, callbacks: inf_UICallbacks = null, parent = null, isClickSpanceClose: boolean = false, isAutoRecover: boolean = false): void {\n        if (LayerManager.loadState == false) {\n            warn(`打开编号为【${uiId}】的界面失败`);\n            return\n        }\n        let config = this.configs[uiId];\n        if (config == null) {\n            warn(`打开编号为【${uiId}】的界面失败，配置信息不存在`);\n            return;\n        }\n        let prefab = config[\"prefab\"]\n        console.log(`正在打开编号为【${uiId}】= ${prefab} 的界面`);\n\n        if (parent) {\n            switch (config.layer) {\n                case inf_LayerType.UI:   //界面UI\n                    if (typeof (parent.add) == \"function\") {\n                        parent.add(config, uiArgs, callbacks, isClickSpanceClose, isAutoRecover)\n                    }\n                case inf_LayerType.NetWindow: //网络弹窗:\n                    if (!this.has(uiId, parent) || this.isLoading(uiId, parent) == true) {\n                        if (typeof (parent.add) == \"function\") {\n                            parent.add(config, uiArgs, callbacks, isClickSpanceClose, isAutoRecover)\n                        }\n                    }\n                    break;\n                case inf_LayerType.Notify: //吐司或通知\n                    if (typeof (parent.show) == \"function\") {\n                        if (uiArgs && uiArgs[\"pos\"] == \"top\") {\n                            parent.show(config, uiArgs, this.getToastEffectByTop(callbacks), isAutoRecover)\n                        } else {\n                            parent.show(config, uiArgs, this.getToastEffectByCenter(callbacks), isAutoRecover)\n                        }\n                    }\n                    break;\n                default:\n                    if (typeof (parent.add) == \"function\") {\n                        parent.add(config, uiArgs, callbacks || this.getPopCommonEffect(), isClickSpanceClose, isAutoRecover)\n                    } else {\n                        warn(`打开编号为【${uiId}】的界面失败，函数【add】不存在`);\n                    }\n                    break;\n            }\n            return;\n        }\n        switch (config.layer) {\n            case inf_LayerType.UI:   //界面UI\n                this.ui.add(config, uiArgs, callbacks, isClickSpanceClose, isAutoRecover);\n                break;\n            case inf_LayerType.PopUp: //弹窗\n                this.popup.add(config, uiArgs, this.getPopCommonEffect(callbacks), isClickSpanceClose, isAutoRecover);\n                break;\n            case inf_LayerType.Dialog: //对话框\n                this.dialog.add(config, uiArgs, this.getPopCommonEffect(callbacks), isClickSpanceClose, isAutoRecover);\n                break;\n            case inf_LayerType.DialogTip: //对话框附属弹窗\n                this.dialogTip.add(config, uiArgs, this.getPopCommonEffect(callbacks), isClickSpanceClose, isAutoRecover);\n                break;\n            case inf_LayerType.Alert: //系统弹窗\n                this.alert.add(config, uiArgs, this.getPopCommonEffect(callbacks), isClickSpanceClose, isAutoRecover);\n                break;\n            case inf_LayerType.NetWindow: //网络弹窗\n                if (!this.has(uiId) && this.isLoading(uiId) == false) {\n                    this.netwindow.add(config, uiArgs, callbacks, isClickSpanceClose, isAutoRecover);\n                }\n                break;\n            case inf_LayerType.Notify: //吐司或通知\n                if (uiArgs && uiArgs[\"pos\"] == \"top\") {\n                    this.notify.show(config, uiArgs, this.getToastEffectByTop(callbacks), isAutoRecover)\n                } else {\n                    this.notify.show(config, uiArgs, this.getToastEffectByCenter(callbacks), isAutoRecover)\n                }\n                break;\n            default:\n                warn(`打开编号为【${uiId}】= ${prefab} 的界面失败，类型配置错误`)\n                break;\n        }\n    }\n\n\n    /**\n     * 判断界面上是否存在该编号的UI\n     * @param uiId UI编号\n     * @param parent 自定义父节点\n     * @returns boolean\n     */\n    public has(uiId: number, parent = null): boolean {\n        if (LayerManager.loadState == false) {\n            warn(`判断界面编号为【${uiId}】的界面失败`);\n            return false\n        }\n        let config = this.configs[uiId];\n        if (config == null) {\n            warn(`编号为【${uiId}】的界面失败，配置信息不存在`);\n            return;\n        }\n        if (parent) {\n            if (typeof (parent.has) == \"function\") {\n                return parent.has(config.prefab);\n            }\n            return false;\n        }\n        let result = false;\n        switch (config.layer) {\n            case inf_LayerType.UI:\n                result = this.ui.has(config.prefab);\n                break;\n            case inf_LayerType.PopUp:\n                result = this.popup.has(config.prefab);\n                break;\n            case inf_LayerType.Dialog:\n                result = this.dialog.has(config.prefab);\n                break;\n            case inf_LayerType.DialogTip:\n                result = this.dialogTip.has(config.prefab);\n                break;\n            case inf_LayerType.Alert:\n                result = this.alert.has(config.prefab);\n                break;\n            case inf_LayerType.NetWindow: //网络弹窗\n                result = this.netwindow.has(config.prefab);\n                break;\n        }\n        return result;\n    }\n    /**\n     * 判断是否正在加载该编号的UI\n     * @param uiId UI编号\n     * @param parent 自定义父节点\n     * @returns boolean\n     */\n    public isLoading(uiId: number, parent = null): boolean {\n        if (LayerManager.loadState == false) {\n            warn(`判断界面编号为【${uiId}】的界面失败`);\n            return false\n        }\n        let config = this.configs[uiId];\n        if (config == null) {\n            warn(`编号为【${uiId}】的界面失败，配置信息不存在`);\n            return;\n        }\n        if (parent) {\n            if (typeof (parent.isLoading) == \"function\") {\n                return parent.isLoading(config.prefab);\n            }\n            return false;\n        }\n        let result = false;\n        switch (config.layer) {\n            case inf_LayerType.UI:\n                result = this.ui.isLoading(config.prefab);\n                break;\n            case inf_LayerType.PopUp:\n                result = this.popup.isLoading(config.prefab);\n                break;\n            case inf_LayerType.Dialog:\n                result = this.dialog.isLoading(config.prefab);\n                break;\n            case inf_LayerType.DialogTip:\n                result = this.dialogTip.isLoading(config.prefab);\n                break;\n            case inf_LayerType.Alert:\n                result = this.alert.isLoading(config.prefab);\n                break;\n            case inf_LayerType.NetWindow: //网络弹窗\n                result = this.netwindow.isLoading(config.prefab);\n                break;\n        }\n        return result;\n    }\n\n    /**\n     * 根据编号移除UI\n     * @param uiId \n     * @param isDestroy \n     * @param parent 自定义父节点\n     * @returns \n     */\n    public remove(uiId: number, isDestroy = true, parent = null) {\n        if (LayerManager.loadState == false) {\n            warn(`根据编号移除UI 编号为【${uiId}】失败`);\n            return\n        }\n        let config = this.configs[uiId];\n        if (config == null) {\n            warn(`删除编号为【${uiId}】的界面失败，配置信息不存在`);\n            return;\n        }\n        if (parent) {\n            if (config.layer == inf_LayerType.NetWindow) {\n                if (typeof (parent.removeAll) == \"function\") {\n                    return parent.removeAll(config.prefab);\n                }\n            } else {\n                if (typeof (parent.remove) == \"function\") {\n                    return parent.remove(config.prefab);\n                }\n            }\n            return;\n        }\n\n        switch (config.layer) {\n            case inf_LayerType.UI:\n                this.ui.remove(config.prefab, isDestroy);\n                break;\n            case inf_LayerType.PopUp:\n                this.popup.remove(config.prefab, isDestroy);\n                break;\n            case inf_LayerType.Dialog:\n                this.dialog.remove(config.prefab, isDestroy);\n                break;\n            case inf_LayerType.DialogTip:\n                this.dialogTip.remove(config.prefab, isDestroy);\n                break;\n            case inf_LayerType.Alert:\n                this.alert.remove(config.prefab, isDestroy);\n                break;\n            case inf_LayerType.NetWindow:\n                this.netwindow.removeAll(config.prefab, isDestroy);\n                break;\n        }\n    }\n\n    /**\n     * 删除一个通过this.add框架添加进来的节点\n     * @param node 要删除的节点\n     * @param isDestroy 是否销毁\n     * @returns \n     */\n    public removeByNode(node: Node, isDestroy: boolean = false) {\n        if (node instanceof Node) {\n            let comp = node.getComponent(DelegateComponent);\n            if (comp && comp.viewParams) {\n                (node.parent as LayerUI).removeByUuid(comp.viewParams.uuid, isDestroy);\n            }\n            else {\n                // warn(`当前删除的node不是通过界面管理器添加到舞台上`);\n                node.destroy();\n            }\n            return;\n        }\n    }\n    /**\n     * 清除根节点下所有界面\n     * @param layerType 界面类型 null 则清空所有\n     * @param isDestroy 是否销毁\n     * @param parent 自定义父节点\n     */\n    public clear(layerType: inf_LayerType = null, isDestroy: boolean = true, parent = null) {\n        if (!this.root) {\n            warn(`Layermanager还没有初始化`);\n            return\n        }\n        if (isValid(this.root) == false) {\n            warn(`Layermanager还没有初始化`);\n            this.root = null;\n            return\n        }\n        if (parent) {\n            if (typeof (parent.clear) == \"function\") {\n                parent.clear(isDestroy);\n            }\n            return;\n        }\n\n        switch (layerType) {\n            case inf_LayerType.UI:\n                this.ui.clear(isDestroy);\n                break;\n            case inf_LayerType.PopUp:\n                this.popup.clear(isDestroy);\n                break;\n            case inf_LayerType.Dialog:\n                this.dialog.clear(isDestroy);\n                break;\n            case inf_LayerType.DialogTip:\n                this.dialogTip.clear(isDestroy);\n                break;\n            case inf_LayerType.Alert:\n                this.alert.clear(isDestroy);\n                break;\n            case inf_LayerType.NetWindow:\n                this.netwindow.clear(isDestroy)\n                break;\n            default:\n                this.initGuiNode();\n                break;\n        }\n        this.updateZorder();\n\n    }\n    /**\n     * 除该节点之外都清除\n     * @param layerType 界面类型 null 则清空所有\n     * @param isIncludeNetWindow 是否包含网络加载页面 默认false 不包含\n     * @param parent 自定义父节点\n     */\n    public clearOther(layerType: inf_LayerType = null, isIncludeNetWindow: boolean = false) {\n        if (!this.root) {\n            warn(`Layermanager还没有初始化`);\n            return\n        }\n        if (isValid(this.root) == false) {\n            warn(`Layermanager还没有初始化`);\n            this.root = null;\n            return\n        }\n        let allTypes = [\n            { type: inf_LayerType.UI, node: this.ui },\n            { type: inf_LayerType.PopUp, node: this.popup },\n            { type: inf_LayerType.Dialog, node: this.dialog },\n            { type: inf_LayerType.DialogTip, node: this.dialogTip },\n            { type: inf_LayerType.Alert, node: this.alert },\n            // { type: inf_LayerType.NetWindow, node: this.netwindow },\n        ]\n        if (isIncludeNetWindow == true) {\n            allTypes.push({ type: inf_LayerType.NetWindow, node: this.netwindow });\n        }\n        for (let i = allTypes.length - 1; i >= 0; i--) {\n            if (layerType != allTypes[i].type) {\n                allTypes[i].node.toDestoryNotNotify();\n            }\n        }\n        this.updateZorder();\n\n    }\n\n\n\n\n    /**\n     * 创建一个节点\n     * @param name 节点名称\n     * @returns \n     */\n    private create_node(name: string) {\n        let node = new Node(name);\n        node.layer = Layers.Enum.UI_2D;\n        let w: Widget = node.addComponent(Widget);\n        w.isAlignLeft = w.isAlignRight = w.isAlignTop = w.isAlignBottom = true;\n        w.left = w.right = w.top = w.bottom = 0;\n        w.alignMode = 2;\n        w.enabled = true;\n        return node;\n    }\n    /** 获得动画节点 */\n    get AnimNode(): Node {\n        return this.dialogAnim;\n    }\n    /**\n     * 加载状态判断\n     * @returns boolean\n     */\n    get loadState() {\n        if (!this.root) {\n            warn(`isTrueload = false,根节点未初始化`);\n            return false\n        }\n        if (isValid(this.root) == false) {\n            warn(`isValid(this.root) = false,根节点未初始化`);\n            return false\n        }\n        if (!this.configs) {\n            warn(`isTrueload = false,配置信息未初始化`);\n            return false\n        }\n        return true\n    }\n    /** 吐司动画（居中）*/\n    public getToastEffectByCenter(callbacks?: inf_PopViewParams) {\n        let newCallbacks: inf_PopViewParams = {\n            // 节点添加动画\n            onAdded: (node: Node, params) => {\n                node.setScale(0.85, 0.85, 0.85);\n                node.setPosition(0, 0, 0)\n                tween(node)\n                    .to(0.15, { scale: new Vec3(1, 1, 1) }, { easing: 'sineIn' })\n                    .delay(1)\n                    .parallel(\n                        tween()\n                            .to(0.2, { position: new Vec3(0, 80, 0) })\n                        ,\n                        tween()\n                            .to(0.2, { easing: 'sineOut' })\n                    )\n                    .call(() => {\n                        node.destroy()\n                    })\n                    .start();\n            },\n        }\n        if (callbacks) {\n            if (callbacks && callbacks.onAdded) {\n                let onAdded = callbacks.onAdded;\n                // @ts-ignore\n                callbacks.onAdded = (node: Node, params: any) => {\n                    onAdded(node, params);\n                    // @ts-ignore\n                    newCallbacks.onAdded(node, params);\n                };\n            }\n            return callbacks;\n        }\n        return newCallbacks;\n    }\n    /** 吐司动画（居上）*/\n    public getToastEffectByTop(callbacks?: inf_PopViewParams) {\n        let newCallbacks: inf_PopViewParams = {\n            // 节点添加动画\n            onAdded: (node: Node, params) => {\n                //将要设置的高度\n                let widget: Widget = node.getComponent(Widget);\n                if (!widget) {\n                    widget = node.addComponent(Widget);\n                }\n                widget.isAlignLeft = widget.isAlignRight = widget.isAlignTop = true;\n                widget.isAlignBottom = false;\n                widget.left = widget.right = 0;\n                widget.top = -50;\n                widget.alignMode = 2;\n                widget.enabled = true;\n                widget.updateAlignment();\n                tween(node)\n                    .parallel(\n                        tween()\n                            .to(0.15, { easing: 'sineIn' })\n                        ,\n                        tween()\n                            .by(0.15, { position: new Vec3(0, -140, 0) })\n                        ,\n                        tween()\n                            .to(0.15, { easing: 'sineOut' })\n                    )\n\n                    .delay(2)\n                    .parallel(\n                        tween()\n                            .by(0.2, { position: new Vec3(0, 70, 0) })\n                        ,\n                        tween()\n                            .to(0.2, { easing: 'sineOut' })\n                    )\n                    .call(() => {\n                        node.destroy()\n                    })\n                    .start()\n            },\n        }\n        if (callbacks) {\n            if (callbacks && callbacks.onAdded) {\n                let onAdded = callbacks.onAdded;\n                // @ts-ignore\n                callbacks.onAdded = (node: Node, params: any) => {\n                    onAdded(node, params);\n                    // @ts-ignore\n                    newCallbacks.onAdded(node, params);\n                };\n            }\n            return callbacks;\n        }\n        return newCallbacks;\n    }\n\n\n    /** 弹窗动画 */\n    public getPopCommonEffect(callbacks?: inf_PopViewParams) {\n        let newCallbacks: inf_PopViewParams = {\n            // 节点添加动画\n            onAdded: (node, params) => {\n                // setTimeout(() => {\n                //     if (!node || node.isValid == false) {\n                //         return;\n                //     }\n                //     let outScale = new Vec3(1, 1, 1);\n                //     let minSpance = 0.15;\n                //     node.getScale(outScale);\n                //     node.setScale(outScale.x - minSpance, outScale.y - minSpance, outScale.z - minSpance);\n\n                //     tween(node)\n                //         .parallel(\n                //             tween()\n                //                 .to(0.15, { scale: outScale })\n                //             ,\n                //             tween()\n                //                 .to(0.15, { easing: 'sineIn' })\n                //         )\n                //         .call(() => {\n                //             node.setScale(outScale);\n                //         })\n                //         .start();\n                // }, 10)\n                if (!node || node.isValid == false) {\n                    return;\n                }\n                let outScale = new Vec3(1, 1, 1);\n                let minSpance = 0.15;\n                node.getScale(outScale);\n                node.setScale(outScale.x - minSpance, outScale.y - minSpance, outScale.z - minSpance);\n\n                tween(node)\n                    .parallel(\n                        tween()\n                            .to(0.15, { scale: outScale })\n                        ,\n                        tween()\n                            .to(0.15, { easing: 'sineIn' })\n                    )\n                    .call(() => {\n                        node.setScale(outScale);\n                    })\n                    .start();\n\n            },\n            // 节点删除动画\n            onBeforeRemove: (node, next) => {\n                setTimeout(() => {\n                    if (!node || node.isValid == false) {\n                        return;\n                    }\n                    let outScale = new Vec3(1, 1, 1);\n                    let minSpance = 0.2;\n                    node.getScale(outScale);\n\n                    tween(node)\n                        .parallel(\n                            tween()\n                                .to(0.1, { scale: new Vec3(outScale.x - minSpance, outScale.y - minSpance, outScale.z - minSpance) })\n                            ,\n                            tween()\n                                .to(0.1, { easing: 'sineOut' })\n                        )\n                        .call(next)\n                        .start();\n                }, 0)\n            },\n        }\n\n        if (callbacks) {\n            if (callbacks && callbacks.onAdded) {\n                let onAdded = callbacks.onAdded;\n                // @ts-ignore\n                callbacks.onAdded = (node: Node, params: any) => {\n                    onAdded(node, params);\n\n                    // @ts-ignore\n                    newCallbacks.onAdded(node, params);\n                };\n            }\n\n            if (callbacks && callbacks.onBeforeRemove) {\n                let onBeforeRemove = callbacks.onBeforeRemove;\n                callbacks.onBeforeRemove = (node, params) => {\n                    onBeforeRemove(node, params);\n\n                    // @ts-ignore\n                    newCallbacks.onBeforeRemove(node, params);\n                };\n            }\n            return callbacks;\n        }\n        return newCallbacks;\n    }\n\n    /** 震屏效果 */\n    shakeScreen() {\n        Tween.stopAllByTarget(this.root);\n        tween(this.root)\n            .sequence(\n                tween(this.root).to(0.03, { position: new Vec3(5, 7) }),\n                tween(this.root).to(0.03, { position: new Vec3(-6, 7) }),\n                tween(this.root).to(0.03, { position: new Vec3(-13, 3) }),\n                tween(this.root).to(0.03, { position: new Vec3(3, -6) }),\n                tween(this.root).to(0.03, { position: new Vec3(-5, 5) }),\n                tween(this.root).to(0.03, { position: new Vec3(2, -8) }),\n                tween(this.root).to(0.03, { position: new Vec3(-8, -10) }),\n                tween(this.root).to(0.03, { position: new Vec3(3, 10) }),\n                tween(this.root).to(0.03, { position: new Vec3(0, 0) }),\n            )\n            .start();\n    }\n}\n\nexport const LayerManager = _LayerManager.instance\n"]}
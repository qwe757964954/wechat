{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/scenes/run/runSceneCtr.ts"],"names":["Node","Prefab","Sprite","UITransform","Vec3","_decorator","GCache","AppEvent","ClientInfo","GConstants","GameRes","GameResPreLoad","UIConfigData","Utils","LayerManager","EventManager","BaseComponent","ccclass","property","menu","runSceneCtr","tooltip","type","_handlerLoadPackage","onInitModuleEvent","addModelListener","SYS_PACKAGE_LOAD","packageLoad","VIEW_UI_3D_ADD","view3DAdd","VIEW_UI_3D_REMOVE","view3DRemove","onLoad","initCamera3D","regTouchEvent","dispatch","SYS_APP_LIFE","AppRunLife","RunScence","initUIConfig","reload","gui","loading","active","reloadDebugView","LOGIN_GOTO_SHOW","state","start","debugNode","removeAllChildren","DEBUG","self","param","bundle","Prefab_DebugWindow","path","resType","callFunc","key","isValid","addChild","SYS_RELOADD_LOCAL","event","taskID","callbackFunc","startCallFunc","handler","onStartCallback","updateCallFunc","onUpdateLoadingCallback","endCallFunc","_taskID","PkgLoaderTaskList","Login","firstRunLoadSuccess","stopScheduler","addScheduler","taskList","SYS_PACKAGE_LOAD_TASK_ADD","node","SYS_PACKAGE_LOAD_SHOW","progress","aniClick","on","EventType","TOUCH_START","onTouchtStart","touchUIPos","touch","getUILocation","outPos","getComponent","convertToNodeSpaceAR","x","y","roleAni","parentNode","resConf","Spine_ClickAni","aniName","trackIndex","isLoop","toPos","SYS_ANI_PLAY","print","isNotNull","root3D","onDestroy","off"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Node, Prefab, Sprite, UITransform, Vec3, _decorator } from 'cc';\nimport { GCache } from '../../cache/GCache';\nimport { AppEvent } from '../../config/AppEvent';\nimport { ClientInfo } from '../../config/GameConfig';\nimport { GConstants } from '../../config/GameConstant';\nimport { GameRes, GameResPreLoad } from '../../config/GameRes';\nimport { UIConfigData } from '../../config/UIConfig';\nimport { inf_PkgLoaderTaskAdd, inf_ResLoader, inf_SpineAniCreate } from '../../framework/InterfaceDefines';\nimport { Utils } from '../../framework/Utils';\nimport { LayerManager } from '../../framework/layer/LayerManager';\nimport { EventManager } from '../../framework/manager/EventManager';\nimport { BaseComponent } from '../../framework/vc/BaseComponent';\nconst { ccclass, property, menu } = _decorator;\n\n\n\n/**\n * Name = runSceneCtr\n * URL = db://assets/scenes/run/runSceneCtr.ts\n * Time = Tue Apr 26 2022 17:01:25 GMT+0800 (中国标准时间)\n * Author = xueya\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('runSceneCtr')\n\n//方便编辑器识别的菜单项目\n@menu('scenes/runSceneCtr')\n\nexport class runSceneCtr extends BaseComponent {\n\t//游戏根节点\n\t@property({ tooltip: \"UI底图\", type: Sprite })\n\tbg: Sprite = null!;\n\n\t// //动画根节点\n\t// @property({ tooltip: \"动画根节点\", type: sp.Skeleton })\n\t// bgSkel: sp.Skeleton = null!;\n\n\t//游戏根节点\n\t@property({ tooltip: \"UI根节点\", type: Node })\n\tgui: Node = null!;\n\n\t//3D根节点\n\t@property({ tooltip: \"UI根节点\", type: Node })\n\troot3D: Node = null!;\n\n\t//3D摄像头\n\t@property({ tooltip: \"3D摄像头节点\", type: Node })\n\tnodeCamera3D: Node = null!;\n\n\t//游戏debug节点\n\t@property({ tooltip: \"游戏debug节点\", type: Node })\n\tdebugNode: Node = null!;\n\t//加载节点\n\t@property({ tooltip: \"加载节点\", type: Node })\n\tloading: Node = null!;\n\n\t//点击最上层\n\t@property({ tooltip: \"点击最上层\", type: Node })\n\taniClick: Node = null!;\n\t/** 分包加载延迟句柄 */\n\tprivate _handlerLoadPackage = null;\n\n\tprotected onInitModuleEvent() {\n\t\t//分包加载任务\n\t\tthis.addModelListener(AppEvent.SYS_PACKAGE_LOAD, this.packageLoad);\n\t\t// //生命周期变化\n\t\t// this.addModelListener(AppEvent.SYS_APP_LIFE, this.appChangeLife)\n\n\t\tthis.addModelListener(AppEvent.VIEW_UI_3D_ADD, this.view3DAdd);\n\t\tthis.addModelListener(AppEvent.VIEW_UI_3D_REMOVE, this.view3DRemove);\n\t}\n\n\tonLoad() {\n\t\tthis.initCamera3D()\n\t\t// this.bgSkel.enabled = true;\n\t\tthis.regTouchEvent();\n\t\t//通知:sys周期变化\n\t\tEventManager.dispatch(AppEvent.SYS_APP_LIFE, GConstants.AppRunLife.RunScence);\n\t\tLayerManager.initUIConfig(UIConfigData)\n\t\tLayerManager.reload(this.gui)\n\t\tthis.loading.active = true;\n\t\tthis.reloadDebugView();\n\t\t//加载进入登录\n\t\tEventManager.dispatch(AppEvent.LOGIN_GOTO_SHOW, { state: \"first_login\" });\n\t};\n\n\tstart() {\n\n\t};\n\n\tinitCamera3D() {\n\t\t// //物理像素\n        // let windowSize = screen.windowSize;\n\t\t// if (windowSize.width / windowSize.height < 1.55) {\n\t\t// \tthis.nodeCamera3D.setPosition(0, 138.7, 111.6);\n\t\t// \tthis.nodeCamera3D.setRotationFromEuler(-53, 0, 0);\n\t\t// } else {\n\t\t// \tthis.nodeCamera3D.setPosition(0, 106.4, 105.0);\n\t\t// \tthis.nodeCamera3D.setRotationFromEuler(-48.3, 0, 0);\n\t\t// }\n\n\t}\n\t/** 加载debug界面 */\n\treloadDebugView() {\n\t\tthis.debugNode.removeAllChildren();\n\t\tif (ClientInfo.DEBUG) {\n\t\t\tlet self = this;\n\t\t\tlet param: inf_ResLoader = {\n\t\t\t\tbundle: GameRes.Prefab_DebugWindow.bundle,\n\t\t\t\tpath: GameRes.Prefab_DebugWindow.path,\n\t\t\t\tresType: Prefab,\n\t\t\t\tcallFunc: (debugNode, key) => {\n\t\t\t\t\tif (debugNode && self.debugNode && self.debugNode.isValid == true) {\n\t\t\t\t\t\tself.debugNode.addChild(debugNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tEventManager.dispatch(AppEvent.SYS_RELOADD_LOCAL, param);\n\t\t}\n\t}\n\t/** 分包加载 */\n\tpackageLoad(event, taskID, callbackFunc: Function) {\n\t\tthis.loading.active = false;\n\t\tlet self = this;\n\t\tlet startCallFunc = Utils.handler(this, this.onStartCallback);\n\t\tlet updateCallFunc = Utils.handler(this, this.onUpdateLoadingCallback);\n\t\tlet endCallFunc = function (_taskID) {\n\t\t\tif (_taskID == GConstants.PkgLoaderTaskList.Login) {\n\t\t\t\tGCache.firstRunLoadSuccess = true;\n\t\t\t}\n\t\t\tself.stopScheduler(self._handlerLoadPackage);\n\t\t\tself._handlerLoadPackage = self.addScheduler(1, () => {\n\t\t\t\tself.stopScheduler(self._handlerLoadPackage);\n\t\t\t\tif (self.loading && self.loading.isValid == true) {\n\t\t\t\t\tself.loading.active = false;\n\t\t\t\t}\n\t\t\t\tif (callbackFunc) {\n\t\t\t\t\tcallbackFunc();\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\t\tlet param: inf_PkgLoaderTaskAdd = {\n\t\t\ttaskID: taskID,\n\t\t\ttaskList: GameResPreLoad[taskID],\n\t\t\tstartCallFunc: startCallFunc,\n\t\t\tupdateCallFunc: updateCallFunc,\n\t\t\tendCallFunc: endCallFunc,\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_PACKAGE_LOAD_TASK_ADD, param)\n\t}\n\t// /** 生命周期变化 */\n\t// appChangeLife(event, life) {\n\t// \tif (life == GConstants.AppRunLife.Hall_Opened || life == GConstants.AppRunLife.Game_Opened) {\n\t// \t\tif (this.bgSkel.enabled == false) {\n\t// \t\t\treturn;\n\t// \t\t}\n\t// \t\tthis.bgSkel.enabled = false;\n\n\t// \t} else {\n\t// \t\tif (this.bgSkel.enabled == true) {\n\t// \t\t\treturn;\n\t// \t\t}\n\t// \t\tthis.bgSkel.enabled = true;\n\t// \t}\n\t// }\n\tonStartCallback(taskID) {\n\t\tif (!this.node || this.node.isValid == false) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_PACKAGE_LOAD_SHOW, 0, taskID);\n\t\tthis.loading.active = true;\n\t}\n\tonUpdateLoadingCallback(taskID, progress) {\n\t\tif (!this.node || this.node.isValid == false) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_PACKAGE_LOAD_SHOW, progress, taskID);\n\t}\n\n\t/** 注册定义事件 */\n\tpublic regTouchEvent() {\n\t\tif (!this.node) {\n\t\t\treturn;\n\t\t}\n\t\tthis.aniClick.on(Node.EventType.TOUCH_START, this.onTouchtStart, this, true);\n\t}\n\n\t/** 点击效果 */\n\tonTouchtStart(event: EventTouch) {\n\t\tlet touchUIPos = event.touch.getUILocation();\n\t\tlet outPos = new Vec3();\n\t\tthis.aniClick.getComponent(UITransform).convertToNodeSpaceAR(new Vec3(touchUIPos.x, touchUIPos.y, 0), outPos)\n\n\t\tlet roleAni: inf_SpineAniCreate = {\n\t\t\tparentNode: this.aniClick,\n\t\t\tresConf: GameRes.Spine_ClickAni,\n\t\t\taniName: \"dianji_ani\",\n\t\t\ttrackIndex: 0,\n\t\t\tisLoop: false,\n\t\t\ttoPos: outPos,\n\t\t}\n\t\tEventManager.dispatch(AppEvent.SYS_ANI_PLAY, roleAni);\n\t}\n\n\t/** 添加3D界面 */\n\tprivate view3DAdd(event: string, node: Node) {\n\t\tthis.print(\"view3DAdd:\")\n\t\tif (Utils.isNotNull(node)) {\n\t\t\tthis.root3D.addChild(node);\n\t\t}\n\t}\n\n\t/** 移除3D界面 */\n\tprivate view3DRemove(event: string) {\n\t\tthis.print(\"view3DRemove:\")\n\t\tthis.root3D.removeAllChildren();\n\t}\n\t\n\t//销毁\n\tonDestroy() {\n\t\tif (this.aniClick) {\n\t\t\tthis.aniClick.off(Node.EventType.TOUCH_START, this.onTouchtStart, this, true);\n\t\t}\n\t};\n\n}\n\n"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/hall/scripts/hallPrefabCtr.ts"],"names":["Label","Node","Prefab","ScrollView","Sprite","UITransform","Vec3","_decorator","GCache","AppEvent","AppSound","GConstants","GameRes","GameTxt","ReportConfig","UIID","Utils","SpriteLoad","resLoader","EventManager","BaseComponent","Platform","ccclass","property","menu","hallSceneCtr","tooltip","type","constructor","_currowGameID","GameID","FXJ","_currowLeaveTabID","_roleSex","_rightMenuList","MenuIDConf","ZKLB","_redDotView","_headRedDotView","_activityRedDotView","_handlerForeverQuickStart","_quickHandlerClickSpine","_initScrollRightHeight","onInitModuleEvent","addModelListener","USER_UPDATE_INFO","updateUserInfo","USER_UPDATE_PROPERTY","updateGameLevelView","ACTIVITY_UPDATE_HOLIDAYSGIFTPACKAGE","updateGiftBtnLimitGift","ACTIVITY_UPDATE_SIGNIN_CONF","updateMenuSignin","HALL_UPDATE_GAME_LEVEL_TAB","NOTIFY_UPDATE_RED_DOT","refreshRedDot","ACTIVITY_UPDATE_FIRSTPAY_CONF","updateGiftBtnFirstPayGift","NET_CMD_RESP_TASK_ACT_CONFIG","respAtyCenterConfig","onLoad","dispatch","SYS_PLAY_MUSIC","BgHall","initData","initView","NET_REQ_BANKRUPT_CONFIG","NET_REQ_BANKRUPT_COUNT","checkAddDesk","RedDotConf","Sign","nodeSignin","Shop","nodeShop","Friend","nodeFriend","FirstPay","nodeFirstPayGift","Holiday","nodeLimitGift","UserHead","headRedDotNode","ActivityNormal","nodeActivity","ActivityNotice","updateMenu","updateGiftBtn","updateSpineAni","updateQuickStartBtn","getPreLoaderRes","Prefab_HallTopUI","bundle","path","res","node","addChild","active","isCanPay","nodeScrollViewRightContent","scrollViewRight","getComponent","height","scrollToTop","onEnable","maskNode","addScheduler","event","isSuccess","_activity_id","TaskInfo","checkUserReceiveInToByDesk","console","log","NET_REQ_ADDDESK_AWARD","Activity","checkHaveSignin","flag","RedDot","need_show_holiday","data","getHolidaysGiftPackage","limitPackIcon","firstIcon","self","loadRemote","ext","err","imageAsset","isValid","spriteFrame","image_ImageAssetToSpriteFrame","need_show_gift_firstpay","getFirstPayPackage","firstPackIcon","start","reqQueneList","NET_REQ_GAME_LEVEL_ROOM_TAB","onClickMenu","custom","clickEffect","print","REPORT_CLIENT_CLICK","eventID","hall_5","SelectGame","checkQuickGame","hall_1","VIEW_UI_OPEN","PlayerInfoCenter","SettingPrefab","hall_8","SYS_PLAY_EFFECT","SpecialClick","MallPrefab","id","ShopBigTabType","SILVER_COIN","hall_10","SigninPrefab","CommClick","FriendPrefab","hall_9","AtyCenterPrefab","onClickGift","SYS_TOAST_TIP","content","activity_outtime","GiftDiscountPrefab","pay_scene","PayScene","hall","FirstPayPrefab","onClickRoom","hall_3","gotoGameLeave","hall_4","getGameConfigByGameID","hall_game_not_have","getGameLevelRule","hall_leave_not_have","param","game_id","tab_id","SelectLevelPrefab","timeout","stopScheduler","updateUserHead","userSex","User","getUserSex","spriteLoad","headNode","headArray","getUserHeadArray","s","setRemoteUrl","setLocalLoad","Picture_UserBigHead_girl","Picture_UserBigHead_boy","maxLen","name","getUserName","string_isAllOneBytes","userName","string","string_subString","updateRoleShow","isNotNull","spineRoleNode","removeAllChildren","roleAnimConf","GoodsData","getRoleAnimConfigById","standbyActIndex","nextStandbyAct","length","act","setStatus","actName","isloop","roleAni","parentNode","resConf","aniName","trackIndex","isLoop","callStartFunc","oneLoopEndcallFunc","processCallFunc","trackEntry","ev","animation","SYS_STOP_PLAY_EFFECT","role","SYS_ANI_PLAY","keChiAni","nodeItemKeChi","Spine_Rukou_Kechi","buKeChiAni","nodeItemBuKeChi","Spine_Rukou_Bukechi","getClickRecord","nodeQuickStart","Spine_Guide_Hander_Click","toPos","SYS_ANI_STOP","addSchedulerOnce","gameName","checkQuickGameName","string_isEmpty","labelQuickStart","keyType","updateGiftBagShow","nodeOrList","imgRedDot","Array","forEach","index","getChildByName","hasRedDot","atyActive","updateRightScrollView","reddotType","setTimeout","currowScrollContentHeight","enabled","onDestroy"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Label, Node, Prefab, ScrollView, Sprite, UITransform, Vec3, _decorator, sp } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { AppSound } from '../../../config/AppSound';\nimport { GConstants } from '../../../config/GameConstant';\nimport { GameRes } from '../../../config/GameRes';\nimport { GameTxt } from '../../../config/GameTxt';\nimport { ReportConfig } from '../../../config/ReportConfig';\nimport { UIID } from '../../../config/UIConfig';\nimport { inf_SpineAniCreate } from '../../../framework/InterfaceDefines';\nimport { Utils } from '../../../framework/Utils';\nimport SpriteLoad from '../../../framework/gui/sprite/SpriteLoad';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { Platform } from '../../../platform/Platform';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = hallSceneCtr\n * URL = db://assets/model/hall/hallSceneCtr.ts\n * Time = Sat Apr 02 2022 17:35:04 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\t\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('hallSceneCtr_prefab')\n\n//方便编辑器识别的菜单项目\n@menu('prefab/hall/hallScene')\n\nexport class hallSceneCtr extends BaseComponent {\n\n    //背景动画根节点\n    @property({ tooltip: \"背景动画根节点\", type: Node })\n    private spineBgNode: Node | null = null;\n\n    //大厅人物动画根节点\n    @property({ tooltip: \"大厅人物动画根节点\", type: Node })\n    private spineRoleNode: Node | null = null;\n\n    //经典场条框动画根节点\n    @property({ tooltip: \"可吃场条框动画根节点\", type: Node })\n    private nodeItemKeChi: Node | null = null;\n\n    //不洗牌场条框动画根节点\n    @property({ tooltip: \"不可吃场条框动画根节点\", type: Node })\n    private nodeItemBuKeChi: Node | null = null;\n\n    //用户昵称\n    @property({ tooltip: \"用户昵称\", type: Label })\n    userName: Label = null!;\n\n    //用户头像\n    @property({ tooltip: \"用户头像\", type: Node })\n    headNode: Node = null!;\n\n    //用户头像框\n    @property({ tooltip: \"用户头像框\", type: Node })\n    private headBoxNode: Node | null = null;\n\n    //用户头像红点\n    @property({ tooltip: \"用户头像红点\", type: Node })\n    private headRedDotNode: Node | null = null;\n\n    //商城按钮节点\n    @property({ tooltip: \"商城按钮节点\", type: Node })\n    private nodeShop: Node = null!;\n\n    //签到按钮节点\n    @property({ tooltip: \"签到按钮节点\", type: Node })\n    private nodeSignin: Node = null!;\n\n    //好友按钮节点\n    @property({ tooltip: \"好友按钮节点\", type: Node })\n    private nodeFriend: Node = null!;\n\n    //活动按钮节点\n    @property({ tooltip: \"活动按钮节点\", type: Node })\n    private nodeActivity: Node = null!;\n\n    //首充礼包按钮节点\n    @property({ tooltip: \"首充礼包按钮节点\", type: Node })\n    private nodeFirstPayGift: Node = null!;\n\n    //折扣礼包按钮节点\n    @property({ tooltip: \"折扣礼包按钮节点\", type: Node })\n    private nodeLimitGift: Node = null!;\n\n    //快速开始按钮节点\n    @property({ tooltip: \"快速开始按钮节点\", type: Node })\n    private nodeQuickStart: Node | null = null;\n\n    //快速开始按钮节点\n    @property({ tooltip: \"快速开始按钮文字\", type: Label })\n    private labelQuickStart: Label | null = null;\n\n    //右边滚动容器\n    @property({ tooltip: \"右边滚动容器\", type: ScrollView })\n    private scrollViewRight: ScrollView | null = null;\n\n    //右边滚动容器内容节点\n    @property({ tooltip: \"右边滚动容器内容节点\", type: Node })\n    private nodeScrollViewRightContent: Node | null = null;\n\n    // 遮挡节点\n    @property({ tooltip: \"遮挡节点\", type: Node })\n    private maskNode: Node = null!;\n\n    //当前游戏ID\n    private _currowGameID = GConstants.GameID.FXJ\n    //当前选中场次(tabid 当前写死)\n    private _currowLeaveTabID = null;\n\n    private _roleSex = null;\n\n    /** 右侧所有功能菜单 */\n    private _rightMenuList: Array<Number> = [\n        /** 折扣礼包 */\n        GConstants.MenuIDConf.ZKLB,\n    ];\n\n    /** 红点UI队列 */\n    private _redDotView: { [key: string]: Node | Array<Node> } = {};\n\n    /** 头像红点UI队列 */\n    private _headRedDotView: { [key: string]: Node | Array<Node> } = {};\n    /** 活动中心红点UI队列 */\n    private _activityRedDotView: { [key: string]: Node | Array<Node> } = {};\n    /** 快速开始手势动画循环播放的句柄 */\n    private _handlerForeverQuickStart = null;\n\n    /** 快速开始按钮的手势动画 */\n    private _quickHandlerClickSpine: inf_SpineAniCreate = null;\n\n    /** 初始的滚动容器大小 */\n    private _initScrollRightHeight = 0;\n\n    constructor() {\n        super();\n    }\n    /** override */\n    protected onInitModuleEvent() {\n        //用户信息更新\n        this.addModelListener(AppEvent.USER_UPDATE_INFO, this.updateUserInfo)\n        //用户资产更新\n        this.addModelListener(AppEvent.USER_UPDATE_PROPERTY, this.updateGameLevelView)\n        //限时礼包活动更新\n        this.addModelListener(AppEvent.ACTIVITY_UPDATE_HOLIDAYSGIFTPACKAGE, this.updateGiftBtnLimitGift)\n        //更新签到配置\n        this.addModelListener(AppEvent.ACTIVITY_UPDATE_SIGNIN_CONF, this.updateMenuSignin)\n        // 更新房间配置\n        this.addModelListener(AppEvent.HALL_UPDATE_GAME_LEVEL_TAB, this.updateGameLevelView);\n        /** 红点更新 */\n        this.addModelListener(AppEvent.NOTIFY_UPDATE_RED_DOT, this.refreshRedDot);\n        //首充礼包活动更新\n        this.addModelListener(AppEvent.ACTIVITY_UPDATE_FIRSTPAY_CONF, this.updateGiftBtnFirstPayGift)\n\n        // 活动中心数据配置返回\n        this.addModelListener(AppEvent.NET_CMD_RESP_TASK_ACT_CONFIG, this.respAtyCenterConfig);\n    }\n    onLoad() {\n        super.onLoad();\n        EventManager.dispatch(AppEvent.SYS_PLAY_MUSIC, AppSound.BgHall);\n        this.initData();\n        this.initView();\n        //请求破产线\n        EventManager.dispatch(AppEvent.NET_REQ_BANKRUPT_CONFIG);\n        // 请求返回破产次数\n        EventManager.dispatch(AppEvent.NET_REQ_BANKRUPT_COUNT);\n        this.checkAddDesk();\n    }\n\n    initData() {\n        this._redDotView = {\n            /** 七日签到 */\n            [GConstants.RedDotConf.Sign]: this.nodeSignin,\n            /** 商城 */\n            [GConstants.RedDotConf.Shop]: this.nodeShop,\n            /** 好友 */\n            [GConstants.RedDotConf.Friend]: this.nodeFriend,\n            /** 首充礼包 */\n            [GConstants.RedDotConf.FirstPay]: this.nodeFirstPayGift,\n            /** 付费礼包 */\n            [GConstants.RedDotConf.Holiday]: this.nodeLimitGift,\n        }\n\n        this._headRedDotView = {\n            // [GConstants.RedDotConf.DressChatFrame]: this.headRedDotNode,\n            // [GConstants.RedDotConf.DressClock]: this.headRedDotNode,\n            // [GConstants.RedDotConf.DressHeadFrame]: this.headRedDotNode,\n            [GConstants.RedDotConf.UserHead]: this.headRedDotNode,\n        }\n        this._activityRedDotView = {\n            /** 活动中心 */\n            [GConstants.RedDotConf.ActivityNormal]: this.nodeActivity,\n            /** 活动中心 */\n            [GConstants.RedDotConf.ActivityNotice]: this.nodeActivity,\n        }\n    }\n\n    initView() {\n        this.updateUserInfo();\n\n        this.updateMenu();\n        this.updateGiftBtn()\n\n        this.updateSpineAni();\n        this.updateQuickStartBtn();\n\n        this.getPreLoaderRes(GameRes.Prefab_HallTopUI.bundle, GameRes.Prefab_HallTopUI.path, Prefab, (res) => {\n            this.node.addChild(res);\n        })\n\n        this.nodeShop.active = Platform.isCanPay();\n        this.nodeScrollViewRightContent.active = false;\n\n        this._initScrollRightHeight = this.scrollViewRight.node.getComponent(UITransform).height;\n        this.scrollViewRight.scrollToTop(0.01, false);\n    }\n\n\n\n    onEnable() {\n        this.maskNode.active = true;\n        this.addScheduler(1, () => {\n            this.maskNode.active = false\n        })\n    }\n\n    /**获取活动中心配置数据返回 */\n    respAtyCenterConfig(event, isSuccess) {\n        if (isSuccess != true) {\n            return;\n        }\n        this.checkAddDesk();\n    }\n    //检查添加桌面的任务\n    checkAddDesk() {\n        let _activity_id = GCache.TaskInfo.checkUserReceiveInToByDesk()\n        console.log('添加桌面发奖成立条件', !!_activity_id)\n        if (!!_activity_id) {\n            EventManager.dispatch(AppEvent.NET_REQ_ADDDESK_AWARD, _activity_id)\n        };\n    }\n    //更新房间信息\n    updateGameLevelView() {\n        this.updateQuickStartBtn();\n    }\n\n    //更新菜单状态\n    updateMenu() {\n        this.updateMenuSignin()\n    }\n\n    //更新菜单状态——签到\n    updateMenuSignin() {\n        this.nodeSignin.active = GCache.Activity.checkHaveSignin()\n    }\n\n    //更新礼包按钮状态\n    updateGiftBtn(event: string = null) {\n        this.updateGiftBtnFirstPayGift()\n        this.updateGiftBtnLimitGift()\n    }\n\n    //更新礼包按钮状态——折扣礼包\n    updateGiftBtnLimitGift() {\n        let flag = GCache.RedDot.need_show_holiday();\n        this.nodeLimitGift.active = flag;\n        if (flag) {\n            let data = GCache.Activity.getHolidaysGiftPackage()\n            console.log(\"holiday:\", data)\n            let limitPackIcon = data.firstIcon\n            let self = this;\n            resLoader.loadRemote(limitPackIcon, { ext: '.jpg' }, (err, imageAsset) => {\n                if (!imageAsset) { //资源可能还在加载中\n                    return\n                }\n                if (!self.node || self.node.isValid == false) {\n                    return;\n                }\n                let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n                if (spriteFrame) {\n                    this.nodeLimitGift.getComponent(Sprite).spriteFrame = spriteFrame;\n                }\n            })\n        }\n    }\n\n\n    /**\n     * 更新首充按钮状态——首充礼包,当数据为空时,首充按钮不显示\n     */\n    updateGiftBtnFirstPayGift() {\n        let flag = GCache.RedDot.need_show_gift_firstpay();\n        this.nodeFirstPayGift.active = flag;\n        if (flag) {\n            let data = GCache.Activity.getFirstPayPackage();\n            console.log(\"firstpay:\", data)\n            let firstPackIcon = data.firstIcon\n            let self = this;\n            resLoader.loadRemote(firstPackIcon, { ext: '.jpg' }, (err, imageAsset) => {\n                if (!imageAsset) { //资源可能还在加载中\n                    return\n                }\n                if (!self.node || self.node.isValid == false) {\n                    return;\n                }\n                let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset);\n                if (spriteFrame) {\n                    this.nodeFirstPayGift.getComponent(Sprite).spriteFrame = spriteFrame;\n                }\n            })\n        }\n\n\n\n\n    }\n\n    start() {\n        this.refreshRedDot();\n        this.nodeScrollViewRightContent.active = true;\n        this.reqQueneList()\n    };\n\n    reqQueneList() {\n        //请求游戏房间信息\n        EventManager.dispatch(AppEvent.NET_REQ_GAME_LEVEL_ROOM_TAB, this._currowGameID)\n        // //请求游戏场次房间人数\n        // EventManager.dispatch(AppEvent.NET_REQ_GAME_LEVEL_PERSON_COUNT, this._currowGameID)\n        // //请求在线人数\n        // EventManager.dispatch(AppEvent.NET_REQ_ONLINE_PERSON)\n    }\n    onClickMenu(event: EventTouch, custom: string) {\n        this.clickEffect();\n        this.print(\"hallSceneCtr\", \"onClickMenu\", custom);\n        if (custom == \"quickStart\") {   // 快速开始\n            EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_5 });\n            GCache.SelectGame.checkQuickGame(this._currowGameID);\n        } else if (custom == \"quickPay\") { // 快捷充值\n        } else if (custom == \"personalCenter\") {  // 打开个人中心\n            EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_1 });\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.PlayerInfoCenter);\n        } else if (custom == \"setting\") {\t// 设置\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SettingPrefab);\n        } else if (custom == \"shop\") { // 打开商城界面\n            if (Platform.isCanPay()) {\n                EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_8 });\n                EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.SpecialClick);\n                EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.MallPrefab, { id: GConstants.ShopBigTabType.SILVER_COIN }, {});\n            }\n        } else if (custom == \"signin\") { // 打开签到界面\n            EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_10 });\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SigninPrefab);\n        } else if (custom == \"friend\") { // 打开好友界面\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.FriendPrefab, null, null, null, true);\n\n        } else if (custom == \"setting\") { // 打开设置界面\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SettingPrefab);\n        } else if (custom == 'activity') {//点击活动按钮bankruptcy\n            EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_9 });\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.AtyCenterPrefab, null, null, null, true);\n        }\n    }\n\n    onClickGift(event: EventTouch, custom: string) {\n        this.clickEffect();\n        this.print(\"hallSceneCtr\", \"onClickGift\", custom);\n\n        if (custom == \"limitGift\") { // 打开限时折扣界面\n            if (Platform.isCanPay() == false) {\n                return false;\n            }\n            if (GCache.RedDot.need_show_holiday() == false) {\n                this.nodeLimitGift.active = false\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.activity_outtime })\n                return\n            }\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.GiftDiscountPrefab, { pay_scene: GConstants.PayScene.hall }, null, null, true);\n        } else if (custom == \"firstPay\") { // 打开首充界面\n            EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.FirstPayPrefab);\n        }\n    }\n    onClickRoom(event: EventTouch, custom: string) {\n        this.clickEffect();\n        if (custom == \"kechi\") {  //可吃场\n            EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_3 });\n            this._currowLeaveTabID = 0\n            this.gotoGameLeave()\n        } else if (custom == \"bukechi\") {//不可吃场\n            this._currowLeaveTabID = 1\n            EventManager.dispatch(AppEvent.REPORT_CLIENT_CLICK, { eventID: ReportConfig.hall_4 });\n\n            this.gotoGameLeave()\n        }\n    }\n\n    clickEffect() {\n        EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n    }\n\n    //前往单个场次\n    gotoGameLeave() {\n        if (GCache.SelectGame.getGameConfigByGameID(this._currowGameID) == null) {\n            EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.hall_game_not_have })\n            return\n        }\n        if (GCache.SelectGame.getGameLevelRule(this._currowGameID, this._currowLeaveTabID) == null) {\n            EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.hall_leave_not_have })\n            return\n        }\n\n        let param = {\n            game_id: this._currowGameID,\n            tab_id: this._currowLeaveTabID\n        }\n        EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.SelectLevelPrefab, param);\n        this.maskNode.active = true;\n        let timeout = this.addScheduler(1, () => {\n            this.stopScheduler(timeout);\n            if (this.node && this.node.isValid == true) {\n                this.maskNode.active = false;\n            }\n        })\n    }\n\n    //更新用户头像\n    updateUserHead() {\n        let userSex = GCache.User.getUserSex();\n        let spriteLoad = this.headNode.getComponent(SpriteLoad);\n        let headArray = GCache.User.getUserHeadArray();\n\n        if (headArray && headArray.s != \"\") {\n            let self = this;\n            spriteLoad.setRemoteUrl(headArray.s)\n        } else {\n            if (userSex == 2) {\n                spriteLoad.setLocalLoad(GameRes.Picture_UserBigHead_girl.bundle, GameRes.Picture_UserBigHead_girl.path);\n            } else {\n                spriteLoad.setLocalLoad(GameRes.Picture_UserBigHead_boy.bundle, GameRes.Picture_UserBigHead_boy.path);\n            }\n        }\n    }\n\n\n    //更新用户信息\n    updateUserInfo() {\n        let maxLen = 6;\n        let name = GCache.User.getUserName();\n        if (Utils.string_isAllOneBytes(name)) {\n            maxLen = 10;\n        }\n        this.userName.string = Utils.string_subString(name, maxLen, false, \"\");\n        this.updateUserHead();\n\n        this.updateRoleShow();\n\n    }\n\n    //更新角色信息\n    updateRoleShow() {\n        this.print(\"updateRoleShow\", GCache.User.getUserSex(), this._roleSex)\n        // mark 临时配置，上角色版本再处理\n        let userSex = GCache.User.getUserSex();\n\n        if (Utils.isNotNull(this._roleSex) && this._roleSex == userSex) {\n            return;\n        }\n        this._roleSex == userSex\n\n        this.spineRoleNode.removeAllChildren();\n\n        let roleAnimConf = GCache.GoodsData.getRoleAnimConfigById(null)\n\n        let self = this;\n        let standbyActIndex = 1;\n        let nextStandbyAct = function () {\n            if (standbyActIndex > roleAnimConf[\"standby\"].length) {\n                standbyActIndex = 1;\n            }\n            let act = roleAnimConf[\"standby\"][standbyActIndex - 1];\n            standbyActIndex = standbyActIndex + 1;\n            return act;\n        }\n\n        let setStatus = function (actName, isloop = false) {\n            if (!self.spineRoleNode || self.spineRoleNode.isValid == false) {\n                return;\n            }\n            self.spineRoleNode.active = true;\n            let roleAni: inf_SpineAniCreate = {\n                parentNode: self.spineRoleNode,\n                resConf: roleAnimConf.path,\n                aniName: actName,\n                trackIndex: 0,\n                isLoop: isloop,\n                callStartFunc: () => {\n                    if (actName == roleAnimConf.hall) {\n                        // initTouchEvent();\n                        standbyActIndex = 1;\n                    }\n                },\n                oneLoopEndcallFunc: () => {\n                    setStatus(nextStandbyAct())\n                },\n                processCallFunc: (trackEntry: sp.spine.TrackEntry, ev) => {\n                    if (trackEntry.animation.name == roleAnimConf.hall) {\n                        EventManager.dispatch(AppEvent.SYS_STOP_PLAY_EFFECT);\n                        // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound[\"RoleInHall_\" + self._showRoleID]);\n                        standbyActIndex = 1;\n                    } else if (trackEntry.animation.name == roleAnimConf.role) {\n                        if (ev.data.name == \"juese\") {\n                            EventManager.dispatch(AppEvent.SYS_STOP_PLAY_EFFECT);\n                            // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound[\"Role_\" + self._showRoleID]);\n                            standbyActIndex = 1;\n                        } else if (ev.data.name == \"shanzi_kai\") {\n                            // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.RoleOpenFan);\n                        } else if (ev.data.name == \"music\") {\n                            // EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.Role_30_1);\n                        }\n                    }\n                }\n\n            }\n            self.spineRoleNode.removeAllChildren();\n            EventManager.dispatch(AppEvent.SYS_ANI_PLAY, roleAni);\n        }\n        setStatus(roleAnimConf.hall, false)\n    }\n\n    // 播放动画\n    updateSpineAni() {\n        let keChiAni: inf_SpineAniCreate = {\n            parentNode: this.nodeItemKeChi,\n            resConf: GameRes.Spine_Rukou_Kechi,\n            aniName: \"animation\",\n            trackIndex: 0,\n            isLoop: true,\n        }\n        EventManager.dispatch(AppEvent.SYS_ANI_PLAY, keChiAni);\n\n        let buKeChiAni: inf_SpineAniCreate = {\n            parentNode: this.nodeItemBuKeChi,\n            resConf: GameRes.Spine_Rukou_Bukechi,\n            aniName: \"animation\",\n            trackIndex: 0,\n            isLoop: true,\n        }\n        EventManager.dispatch(AppEvent.SYS_ANI_PLAY, buKeChiAni);\n    }\n\n    // 更新快速开始\n    updateQuickStartBtn() {\n        this.stopScheduler(this._handlerForeverQuickStart);\n        if (GCache.User.getClickRecord(\"快速开始\") == 0) {\n            //快速开始点击手势\n            this._quickHandlerClickSpine = {\n                parentNode: this.nodeQuickStart,\n                resConf: GameRes.Spine_Guide_Hander_Click,\n                aniName: \"hand_dianji_loop\",\n                trackIndex: 0,\n                isLoop: false,\n                toPos: new Vec3(-10, 10, 0)\n            }\n            this._handlerForeverQuickStart = this.addScheduler(30, () => {\n                EventManager.dispatch(AppEvent.SYS_ANI_STOP, this._quickHandlerClickSpine);\n                EventManager.dispatch(AppEvent.SYS_ANI_PLAY, this._quickHandlerClickSpine);\n            })\n            this.addSchedulerOnce(1, () => {\n                EventManager.dispatch(AppEvent.SYS_ANI_STOP, this._quickHandlerClickSpine);\n                EventManager.dispatch(AppEvent.SYS_ANI_PLAY, this._quickHandlerClickSpine);\n            })\n        }\n\n        let gameName = GCache.SelectGame.checkQuickGameName(this._currowGameID);\n        if (!Utils.string_isEmpty(gameName)) {\n            this.labelQuickStart.string = gameName;\n        }\n\n    }\n\n    /** 红点更新 */\n    refreshRedDot(event = null, keyType = null) {\n        this.updateGiftBagShow();\n        if (keyType == null) {\n            for (let keyType in this._redDotView) {\n                let nodeOrList = this._redDotView[keyType];\n                let imgRedDot = null;\n                if (nodeOrList instanceof Array) {\n                    nodeOrList.forEach((node, index) => {\n                        if (node.active == true) {\n                            imgRedDot = node.getChildByName(\"img_dot\");\n                            if (imgRedDot) {\n                                imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                            }\n                        } else {\n\n                            console.log(\"入口已经隐藏===>\", keyType)\n                        }\n\n                    })\n                } else {\n                    if (nodeOrList.active == true) {\n                        imgRedDot = nodeOrList.getChildByName(\"img_dot\");\n                        if (imgRedDot) {\n                            imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                            console.log(keyType, \"=====\", imgRedDot.active)\n                        }\n                    } else {\n\n                        console.log(\"入口已经隐藏===>\", keyType)\n\n                    }\n                }\n            }\n            //头像红点\n            let active = false;\n            for (let keyType in this._headRedDotView) {\n                if (active == false) {\n                    active = GCache.RedDot.hasRedDot(keyType);\n                }\n            }\n            this.headRedDotNode.active = active;\n            //活动红点\n            let atyActive = false;\n            for (let keyType in this._activityRedDotView) {\n                if (atyActive == false) {\n                    atyActive = GCache.RedDot.hasRedDot(keyType);\n                }\n            }\n            let imgRedDot = this.nodeActivity.getChildByName(\"img_dot\");\n            if (imgRedDot) {\n                imgRedDot.active = atyActive;\n            }\n\n        } else {\n            if (this._redDotView[keyType] != null) {\n                let nodeOrList = this._redDotView[keyType];\n                let imgRedDot = null;\n                if (nodeOrList instanceof Array) {\n                    nodeOrList.forEach((node, index) => {\n                        if (node.active == true) {\n                            imgRedDot = node.getChildByName(\"img_dot\");\n                            if (imgRedDot) {\n                                imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                                console.log(keyType, \"=====\", imgRedDot.active)\n                            }\n                        }\n                    })\n                } else {\n                    if (nodeOrList.active == true) {\n                        imgRedDot = nodeOrList.getChildByName(\"img_dot\");\n                        if (imgRedDot) {\n                            imgRedDot.active = GCache.RedDot.hasRedDot(keyType);\n                        }\n                    }\n                }\n            }\n            //头像红点\n            if (this._headRedDotView[keyType] != null) {\n                let active = false;\n                for (let keyType in this._headRedDotView) {\n                    if (active == false) {\n                        active = GCache.RedDot.hasRedDot(keyType);\n                    }\n                }\n                this.headRedDotNode.active = active;\n            }\n            //活动红点\n            if (this._activityRedDotView[keyType] != null) {\n                let atyActive = false;\n                for (let keyType in this._activityRedDotView) {\n                    if (atyActive == false) {\n                        atyActive = GCache.RedDot.hasRedDot(keyType);\n                    }\n                }\n                let imgRedDot = this.nodeActivity.getChildByName(\"img_dot\");\n                if (imgRedDot) {\n                    imgRedDot.active = atyActive;\n                }\n            }\n            this.updateGiftBagShow(keyType);\n        }\n        this.updateRightScrollView();\n    }\n\n    /** 更新礼包入口的显示 */\n    updateGiftBagShow(reddotType = null) {\n        if (reddotType == null) {\n            // this.btn_newUser7Day.active = GCache.RedDot.need_show_newuser7day();\n            // this.btn_GiftDiscount.active = GCache.RedDot.need_show_gift_discount();\n            // this.btn_GiftNewUser.active = GCache.RedDot.need_show_gift_newuser();\n            // this.btn_GiftLimit.active = GCache.RedDot.need_show_gift_limit();\n            // this.btn_GiftBuyLimit.active = GCache.RedDot.need_show_gift_buyLimit();\n            // this.btn_MuchGold.active = GCache.RedDot.need_show_Advice_MuchGold();\n            // this.btn_FreeGold.active = GCache.RedDot.need_show_Advice_FreeGold();\n            return;\n        }\n        // if (reddotType == GConstants.RedDotConf.NewUserServenDay) {\n        // \tthis.btn_newUser7Day.active = GCache.RedDot.need_show_newuser7day();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_Discount) {\n        // \tthis.btn_GiftDiscount.active = GCache.RedDot.need_show_gift_discount();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_NewUser) {\n        // \tthis.btn_GiftNewUser.active = GCache.RedDot.need_show_gift_newuser();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_Limit) {\n        // \tthis.btn_GiftLimit.active = GCache.RedDot.need_show_gift_limit();\n        // } else if (reddotType == GConstants.RedDotConf.Gift_BuyLimit) {\n        // \tthis.btn_GiftBuyLimit.active = GCache.RedDot.need_show_gift_buyLimit();\n        // } else if (reddotType == GConstants.RedDotConf.AdMuchGold) {\n        // \tthis.btn_MuchGold.active = GCache.RedDot.need_show_Advice_MuchGold();\n        // } else if (reddotType == GConstants.RedDotConf.AdFreeGold) {\n        // \tthis.btn_FreeGold.active = GCache.RedDot.need_show_Advice_FreeGold();\n        // }\n    }\n    /** 更新右边的Scrollview */\n    updateRightScrollView() {\n        let self = this;\n        setTimeout(() => {\n            let currowScrollContentHeight = self.nodeScrollViewRightContent.getComponent(UITransform).height;\n            if (currowScrollContentHeight > self._initScrollRightHeight) {\n                self.scrollViewRight.enabled = true;\n            } else {\n                self.scrollViewRight.scrollToTop(0.01, false);\n                self.scrollViewRight.enabled = false;\n            }\n        }, 0)\n    }\n\n\n    //销毁\n    onDestroy() {\n        super.onDestroy();\n    };\n}"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/proj/gnet/GPBWriteAndRead.ts"],"names":["SuperWriteAndRead","GPBRead","GPBWrite","Encrypt","Logger","WebSocketBuffer","Utils","GetPackPacket","headCmd","action","data","buffer","resp","checkRead","packetID","dataView","Read","readPacket","checkWrite","reqProtocol","WriteAndReadType","Write","constructor","name","type","_CmdArrayFunc","_className","_type","console","log","initCommonCmd","headCmdBinding","isReset","updateCmdArrayFunc","Object","prototype","hasOwnProperty","call","value","pbType","arr","cmd","binding","pbFunc","arrayList","undefined","length","index","array","__defaultWriteOrRead","cleanCmdArrayFunc","Start","args","warn","number_formatToHex","ReadPhpRequest","info","readInt","jsonStr","readString","JsonDecode","ReadPhpRequestNew","mid","compressType","strData","jsonData","base64_decode","UnZlibZip","body","ReadHallLoginSuccess","nullToDefault","readUByte","readUShort","objectInfoStr","table_verify","dump","ReadServersHeart","ReadPhpPushMsg","result","ReadPhpGetUserVipInfo","dataLen","i","encodeStr","realObj","propDetail","push","ReadPhpPushPayMoney","readShort","comm_receiveGameStart","comm_receiveGameOver","comm_receiveRoomInfo","number_valueOf","comm_receiveReadyInfo","readyTime","comm_receivePlayerReady","user","userId","comm_receivePlayerInto","seatid","isReady","userInfo","money","readInt64","hp","comm_receivePlayerLogout","comm_receiveExitRoomSuccess","packetInfo","totalMoney","comm_receiveStopGameInPlay","logoutMid","personNum","readByte","totalmoney","turnMoney","winMoneyTotalInTable","playerList","comm_receivePlayerAI","ai","comm_receiveChangeDeskError","errorCode","onCommRoomLevelUp","level","flag","exp","msg","baseChip","dis","comm_LogOutResp","compensation","comm_UserFace","faceValue","vipType","comm_UserChat","comm_respBankUpData","curBankruptTime","lowestMoney","count","intervals","comm_respBankUpCount","curCount","leftTime","vipExpires","vipActualTime","get_money","shard_cd_flag","comm_respBankUp","brokeMoney","errType","logModel","WritePhpRequest","WritePhpRequestNew","JsonEncode","ZlibZip","base64_encode","isCompress","writeInt","writeString","WriteServersHeart","comm_OneKeyLoginGame","jsonUserInfo","writeShort","jsonExtParam","comm_LoginGameInto","comm_reqReady","comm_reqLogOutTry","comm_reqLogOut","comm_reqUserAI","comm_reqChangeTable","comm_reqBankUpData","comm_reqBankUpCount","comm_reqBankUp","GPBWriteAndRead"],"mappings":"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","sourcesContent":["/**\n * Name = GPBWriteAndRead\n * URL = db://assets/proj/gnet/GPBWriteAndRead.ts\n * Time = Fri May 27 2022 09:56:12 GMT+0800 (中国标准时间)\n * Author = xueya\n *\n */\n\nimport { Encrypt } from \"../../framework/crypto/Encrypto\";\nimport { Logger } from \"../../framework/log/Logger\";\nimport { INetPHPMessage, IRequestProtocol, IResponseProtocol, NetData } from \"../../framework/network/NetInterface\";\nimport { WebSocketBuffer } from \"../../framework/network/WebSocketBuffer\";\nimport { Utils } from \"../../framework/Utils\";\n\n\n/** 包装包体 */\nconst GetPackPacket = function (headCmd: number = null, action: string = null, data: any = null, buffer: NetData = null): IResponseProtocol {\n\tlet resp: IResponseProtocol = {\n\t\t/**头部命令 */\n\t\theadCmd: headCmd,\n\t\t/** 动作名 */\n\t\taction: action,\n\t\t/** 消息内容 */\n\t\tdata: data,\n\t\t/** 加密成的buffer data 服务端下发*/\n\t\tbuffer: buffer,\n\t}\n\treturn resp\n}\n\n/** 校验读 */\nconst checkRead = function (packetID: string) {\n\tif (!packetID) {\n\t\treturn null\n\t}\n\tlet dataView = WebSocketBuffer.Read.readPacket(packetID, true)\n\tif (!dataView) {\n\t\treturn null\n\t}\n\treturn dataView\n}\n/** 校验写 */\nconst checkWrite = function (packetID, reqProtocol): boolean {\n\tif (!packetID) {\n\t\treturn false\n\t}\n\tif (!reqProtocol || !reqProtocol.data) {\n\t\treturn false\n\t}\n\treturn true\n}\n\n/**命令序列 */\nexport interface ICmdWriteReadArray {\n\tcmd: any,   //命令\n\tbinding: Function,   //绑定函数\n\n}\n//读写类型 0读 1写\nexport const WriteAndReadType = {\n\tRead: 0,    //读\n\tWrite: 1,  //写\n}\n//超类解析\nclass SuperWriteAndRead {\n\t//cmd解析函数队列\n\tprivate _CmdArrayFunc = {};\n\t_className = \"\";\n\t_type = null;\n\t//实例化\n\tconstructor(name: string = null, type = null) {\n\t\tif (name) {\n\t\t\tthis._className = name;\n\t\t\tconsole.log(`${name} 实例化`)\n\t\t}\n\t\tthis._type = type;\n\t};\n\n\t//初始化通用模块命令\n\tinitCommonCmd(headCmdBinding, isReset: boolean = false) {\n\t\tif (isReset) {\n\t\t\tthis.updateCmdArrayFunc(null, true)\n\t\t}\n\t\tif (!headCmdBinding || typeof (headCmdBinding) != \"object\") {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let headCmd in headCmdBinding) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(headCmdBinding, headCmd)) {\n\t\t\t\tlet value = headCmdBinding[headCmd]\n\t\t\t\tif (value && value.pbType != null) {\n\t\t\t\t\tlet arr: ICmdWriteReadArray = {\n\t\t\t\t\t\tcmd: headCmd,\n\t\t\t\t\t\tbinding: value.pbFunc\n\t\t\t\t\t}\n\t\t\t\t\tif (value.pbType == this._type) {\n\t\t\t\t\t\tthis.updateCmdArrayFunc([arr]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 更新读写队列\n\t * @param arrayList 要更新的队列\n\t * @param isReset 是否重置 默认不重置\n\t * @returns \n\t */\n\tupdateCmdArrayFunc(arrayList, isReset: boolean = false) {\n\t\tif (isReset) {\n\t\t\tthis._CmdArrayFunc = {}\n\t\t}\n\t\t// this.cmdArrayFunc\n\t\tif (arrayList == null || arrayList == undefined) {\n\t\t\treturn\n\t\t}\n\t\tif (arrayList.length == 0) {\n\t\t\treturn\n\t\t}\n\t\tfor (let index = 0; index < arrayList.length; index++) {\n\t\t\tlet array: ICmdWriteReadArray = arrayList[index]\n\t\t\t//只有类型无解析函数的全部用默认方式\n\t\t\tif (!array.binding) {\n\t\t\t\tarray.binding = this.__defaultWriteOrRead\n\t\t\t}\n\t\t\tif (array && array.cmd && array.binding) {\n\t\t\t\tthis._CmdArrayFunc[array.cmd] = array.binding;\n\t\t\t}\n\t\t}\n\t}\n\tcleanCmdArrayFunc() {\n\t\tthis._CmdArrayFunc = {}\n\t}\n\t/**开始执行操作 */\n\tStart(headCmd, ...args: any[]) {\n\t\tif (this._CmdArrayFunc[headCmd]) {\n\t\t\treturn this._CmdArrayFunc[headCmd](headCmd, ...args)\n\t\t} else {\n\t\t\tLogger.warn(`【${this._className}】 【***未定义解析方法*】，HeadCmd[10进制] = ${headCmd} HeadCmd[16进制] = ${Utils.number_formatToHex(headCmd)}`)\n\t\t}\n\t\treturn null;\n\t}\n\t//默认解析方式\n\t__defaultWriteOrRead(...args: any[]) {\n\n\t}\n\n}\n/**读 */\nclass GPBRead extends SuperWriteAndRead {\n\n\t//实例化\n\tconstructor() {\n\t\tsuper(\"GPBRead\", WriteAndReadType.Read);\n\t};\n\t//读php协议\n\tReadPhpRequest(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet info = {}\n\t\tinfo[\"flag\"] = WebSocketBuffer.Read.readInt(packetID)\n\t\tinfo[\"cmd\"] = WebSocketBuffer.Read.readInt(packetID)\n\t\tlet jsonStr = WebSocketBuffer.Read.readString(packetID)\n\t\tinfo[\"jsonStr\"] = jsonStr ? Encrypt.JsonDecode(jsonStr) : null\n\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\t//读php新协议\n\tReadPhpRequestNew(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\t/** info对应 接口 INetPHPMessage 的数据 */\n\t\tlet info: INetPHPMessage = {}\n\n\t\tinfo.mid = WebSocketBuffer.Read.readInt(packetID)\n\t\tinfo.cmd = WebSocketBuffer.Read.readInt(packetID)\n\t\tinfo.compressType = WebSocketBuffer.Read.readInt(packetID) //1 压缩 0未压缩\n\n\t\tlet strData = WebSocketBuffer.Read.readString(packetID)\n\t\tif (strData && info.compressType != null) {\n\t\t\t//解析正文\n\t\t\tlet jsonData = Encrypt.base64_decode(strData)\n\t\t\tif (info.compressType == 1) {\n\t\t\t\tjsonData = Encrypt.UnZlibZip(jsonData)\n\t\t\t}\n\t\t\t// if(jsonData){\n\t\t\t// \tjsonData = Encrypt.UnicodeDecode(jsonData)\n\t\t\t// }\n\t\t\tif (jsonData) {\n\t\t\t\t// console.log(\"json即将decode==>\"+jsonData)\n\t\t\t\tjsonData = Encrypt.JsonDecode(jsonData)\n\t\t\t}\n\t\t\tstrData = jsonData\n\t\t}\n\t\tinfo.body = strData\n\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\n\t//读：RESPONSE_HALL_LOGIN_SUCCESS\n\tReadHallLoginSuccess(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet info = {}\n\t\tinfo[\"ret\"] = Utils.nullToDefault(WebSocketBuffer.Read.readUByte(packetID), 0)\n\t\tif (info[\"ret\"] === 1) {\n\t\t\tinfo[\"gameType\"] = Utils.nullToDefault(WebSocketBuffer.Read.readUShort(packetID), 0)\n\t\t\tinfo[\"svid\"] = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), -1)\n\t\t\tinfo[\"roomId\"] = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), 0)\n\t\t\tinfo[\"roomLevel\"] = Utils.nullToDefault(WebSocketBuffer.Read.readUShort(packetID), 0)\n\t\t}\n\t\tinfo[\"matchInfo\"] = {};\n\t\tinfo[\"matchState\"] = WebSocketBuffer.Read.readUByte(packetID)\n\n\t\tif (info[\"matchState\"] == 1) {\n\t\t\tinfo[\"matchInfo\"][\"gameId\"] = Utils.nullToDefault(WebSocketBuffer.Read.readUShort(packetID), 0)\n\t\t\tinfo[\"matchInfo\"][\"matchId\"] = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), -1)\n\t\t\tinfo[\"matchInfo\"][\"svid\"] = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), 0)\n\t\t\tinfo[\"matchInfo\"][\"matchType\"] = Utils.nullToDefault(WebSocketBuffer.Read.readUShort(packetID), 0)\n\n\t\t}\n\t\t//正文内容\n\t\tinfo[\"objectInfo\"] = {};\n\t\tlet objectInfoStr = WebSocketBuffer.Read.readString(packetID);\n\t\tif (objectInfoStr != \"\") {\n\t\t\tinfo[\"objectInfo\"] = Utils.table_verify(Encrypt.JsonDecode(objectInfoStr));\n\t\t}\n\t\tinfo[\"onlookerInfo\"] = {};\n\t\tinfo[\"onlookerType\"] = Utils.nullToDefault(WebSocketBuffer.Read.readUShort(packetID), 0)  //1:围观重连\n\t\tif (info[\"onlookerType\"] == 1) {\n\t\t\tinfo[\"onlookerInfo\"][\"userId\"] = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), 0)\n\t\t\tinfo[\"onlookerInfo\"][\"gameId\"] = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), 0)\n\t\t\tinfo[\"onlookerInfo\"][\"roomLevel\"] = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), 0)\n\t\t}\n\t\tconsole.log(\"大厅登录成功，这是结果\")\n\t\tUtils.dump(info)\n\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\n\n\t//心跳\n\tReadServersHeart(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\treturn GetPackPacket(headCmd, null, null, dataView)\n\t}\n\n\t//读:Php推送消息\n\tReadPhpPushMsg(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\t/** info */\n\t\tlet info = {\n\t\t\t\"result\": null, //具体信息\n\t\t}\n\t\tinfo.result = WebSocketBuffer.Read.readString(packetID)\n\t\tinfo.result = Encrypt.JsonDecode(info.result)\n\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\t//读:server返回用户VIP详细信息\n\tReadPhpGetUserVipInfo(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\t/** info */\n\t\tlet info = {\n\t\t\t\"mid\": null, //具体信息\n\t\t\t\"propDetail\": []\n\t\t}\n\t\tinfo.mid = WebSocketBuffer.Read.readInt(packetID)\n\t\tlet dataLen = WebSocketBuffer.Read.readInt(packetID)\n\t\tif (dataLen != null) {\n\t\t\tfor (let i = 0; i < dataLen; i++) {\n\t\t\t\tlet encodeStr = WebSocketBuffer.Read.readString(packetID)\n\t\t\t\tlet realObj = Encrypt.JsonDecode(encodeStr);\n\t\t\t\tinfo.propDetail.push(realObj)\n\t\t\t}\n\t\t}\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\t//读:广播支付银币\n\tReadPhpPushPayMoney(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\t/** info */\n\t\tlet info = {\n\t\t\t\"type\": 0, //广播类型\n\t\t\t\"data\": \"\",\n\t\t}\n\t\tinfo.type = Utils.nullToDefault(WebSocketBuffer.Read.readShort(packetID), info.type);\n\t\tinfo.data = Utils.nullToDefault(WebSocketBuffer.Read.readString(packetID), info.data);\n\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\t//通用:广播 游戏开始 SERVER_BROADCAST_PLAYER_READY 0x401\n\tcomm_receiveGameStart(headCmd, packetID: string) {\n\t\t// let dataView = checkRead(packetID)\n\t\t// if (!dataView) {\n\t\t// \treturn null\n\t\t// }\n\t\t// let user = {\n\t\t// \t\"userId\": 0\n\t\t// }\n\t\t// user.userId = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.userId)\n\t\t// return GetPackPacket(headCmd, null, user, dataView)\n\n\t}\n\n\t//通用:广播 游戏结束 SERVER_BROADCAST_PLAYER_READY 0x401\n\tcomm_receiveGameOver(headCmd, packetID: string) {\n\t\t// let dataView = checkRead(packetID)\n\t\t// if (!dataView) {\n\t\t// \treturn null\n\t\t// }\n\t\t// let user = {\n\t\t// \t\"userId\": 0\n\t\t// }\n\t\t// user.userId = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.userId)\n\t\t// return GetPackPacket(headCmd, null, user, dataView)\n\n\t}\n\t//-----------------------common---------------------\n\t//通用：下发房间信息 ROOM_SERVER_RESPONSE_TABLE_INFO 0x214: \n\tcomm_receiveRoomInfo(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet strData = WebSocketBuffer.Read.readString(packetID);\n\t\tlet data = Encrypt.JsonDecode(strData);\n\t\tif (data) {\n\t\t\tdata[\"gameId\"] = Utils.number_valueOf(data[\"gameId\"])\n\t\t\tdata[\"levelId\"] = Utils.number_valueOf(data[\"level\"])\n\t\t\tdata[\"tid\"] = Utils.number_valueOf(data[\"tid\"])\n\t\t}\n\t\treturn GetPackPacket(headCmd, null, data, dataView)\n\n\t}\n\t//通用：server通知准备相关信息 SERVER_COMMAND_READY_INFO 0x80B2: \n\tcomm_receiveReadyInfo(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet data = {\n\t\t\t\"readyTime\": 0,\n\t\t};\n\t\tdata.readyTime = WebSocketBuffer.Read.readInt(packetID);\t//准备倒计时\n\n\t\treturn GetPackPacket(headCmd, null, data, dataView)\n\t}\n\n\n\t//通用:广播 玩家准备 SERVER_BROADCAST_PLAYER_READY 0x401\n\tcomm_receivePlayerReady(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet user = {\n\t\t\t\"userId\": 0\n\t\t}\n\t\tuser.userId = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.userId)\n\t\treturn GetPackPacket(headCmd, null, user, dataView)\n\n\t}\n\n\t//通用：用户进入 SERVER_BROADCAST_PLAYER_LOGIN 0x100D\n\tcomm_receivePlayerInto(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet user = {\n\t\t\t\"mid\": 0,\n\t\t\t\"seatid\": -1,\n\t\t\t\"isReady\": 0,\n\t\t\t\"userInfo\": \"\",\n\t\t\t\"money\": 0,\n\t\t\t\"hp\": 0,\n\t\t};\n\t\tuser.mid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.mid);\n\t\tuser.seatid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.seatid);\n\t\tuser.isReady = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.isReady);\n\t\tuser.userInfo = Utils.nullToDefault(WebSocketBuffer.Read.readString(packetID), user.userInfo);\n\t\tuser.money = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), user.money);\n\t\tuser.hp = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.hp);\n\n\t\treturn GetPackPacket(headCmd, null, user, dataView)\n\n\t}\n\t//通用：用户退出 SERVER_BROADCAST_PLAYER_LOGOUT 0x100E\n\tcomm_receivePlayerLogout(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet user = {\n\t\t\t\"mid\": 0, //用户mid\n\t\t}\n\t\tuser.mid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), user.mid)\n\t\treturn GetPackPacket(headCmd, null, user, dataView)\n\n\t}\n\t//通用：我退出房间成功 ROOM_LOGOUT_SUCCESS 0x1008\n\tcomm_receiveExitRoomSuccess(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"totalMoney\": -1,\n\t\t\t\"money\": 0\n\t\t};\n\t\t//用户现金 不一定每个游戏都会传\n\t\tpacketInfo.totalMoney = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), packetInfo.totalMoney)\n\t\t//德州时定义的参数(坑)\n\t\tpacketInfo.money = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), packetInfo.money)\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\n\t//通用:游戏强制结束（游戏中有玩家退出） SERVER_BROADCAST_STOP_GAME_IN_PLAY 0x4016\n\tcomm_receiveStopGameInPlay(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"logoutMid\": 0,   //离开的玩家id\n\t\t\t\"playerList\": [], //玩家信息列表\n\t\t};\n\t\tpacketInfo.logoutMid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.logoutMid);\n\n\t\tlet personNum = Utils.nullToDefault(WebSocketBuffer.Read.readByte(packetID), 0);\n\t\tfor (let i = 0; i < personNum; i++) {\n\t\t\tlet userInfo = {\n\t\t\t\t\"mid\": 0,                  //玩家Uid\n\t\t\t\t\"totalmoney\": 0,           //总现金\n\t\t\t\t\"turnMoney\": 0,            //输赢的钱\n\t\t\t\t\"winMoneyTotalInTable\": 0, //\n\t\t\t}\n\t\t\tuserInfo.mid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), userInfo.mid);\n\t\t\tuserInfo.totalmoney = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), userInfo.totalmoney);\n\t\t\tuserInfo.turnMoney = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), userInfo.turnMoney);\n\t\t\tuserInfo.winMoneyTotalInTable = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), userInfo.winMoneyTotalInTable);\n\n\t\t\tpacketInfo.playerList.push(userInfo);\n\t\t}\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\n\t//通用：玩家托管 SERVER_BROADCAST_PLAYER_AI 0x4007\n\tcomm_receivePlayerAI(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"mid\": 0,\n\t\t\t\"ai\": 0,        //0表示取消托管，非0表示托管\n\t\t}\n\n\t\tpacketInfo.mid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.mid);\n\t\tpacketInfo.ai = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.ai);\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\n\t//通用：换桌失败 SERVER_COMMAND_CHANGE_TABLE_ERR 0x1029\n\tcomm_receiveChangeDeskError(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"errorCode\": 0,\n\t\t};\n\t\tpacketInfo.errorCode = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.errorCode)\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\n\t//通用：房间等级变化 ROOM_UP_LEVEL 0x2203 \n\tonCommRoomLevelUp(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"level\": 0,        //目标场次level\n\t\t\t\"flag\": 0,         //降级=-1   升级=1\n\t\t\t\"exp\": 0,          //经验值，目前不送经验\n\t\t\t\"msg\": 0,          //信息\n\t\t\t\"baseChip\": 0,     //目标场次的底注\n\t\t\t\"dis\": 0,          //flag==-1时表示持有银币与原场次银币的差额   flag==1时暂时为0\n\t\t}\n\t\tpacketInfo.level = Utils.nullToDefault(WebSocketBuffer.Read.readShort(packetID), packetInfo.level);\n\t\tpacketInfo.flag = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.flag);\n\t\tpacketInfo.exp = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.exp);\n\t\tpacketInfo.msg = Utils.nullToDefault(WebSocketBuffer.Read.readString(packetID), packetInfo.msg);\n\t\tpacketInfo.baseChip = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), packetInfo.baseChip);\n\t\tpacketInfo.dis = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), packetInfo.dis);\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\n\t//通用:Server回应退出请求(游戏中退出) SERVER_COMMAND_LOGOUT_INGAME_RSP 0x1062\n\tcomm_LogOutResp(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"compensation\": \"\", //退出游戏，需要扣除的银币数\n\t\t}\n\t\tpacketInfo.compensation = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), packetInfo.compensation)\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\n\t//通用:用户表情 ROOM_USER_FACE_RESP 0x1004\n\tcomm_UserFace(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"mid\": 0,    //用户ID\n\t\t\t\"faceValue\": -1,\n\t\t\t\"vipType\": -1\n\t\t}\n\t\tpacketInfo.mid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.mid);\n\t\tpacketInfo.faceValue = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.faceValue);\n\t\tpacketInfo.vipType = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.vipType);\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\t//通用：用户聊天 ROOM_USER_CHAT_RESP 0x1003:用户聊天\n\tcomm_UserChat(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tlet packetInfo = {\n\t\t\t\"mid\": 0,    //用户ID\n\t\t\t\"msg\": -1,\n\t\t\t\"index\": -1\n\t\t}\n\t\tpacketInfo.mid = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), packetInfo.mid);\n\t\tpacketInfo.msg = Utils.nullToDefault(WebSocketBuffer.Read.readString(packetID), packetInfo.msg);\n\t\tpacketInfo.index = Utils.nullToDefault(WebSocketBuffer.Read.readShort(packetID), packetInfo.index);\n\n\t\treturn GetPackPacket(headCmd, null, packetInfo, dataView)\n\t}\n\n\t//通用：返回破产配置数据\n\tcomm_respBankUpData(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\t/** info */\n\t\tlet info = {\n\t\t\t\"curBankruptTime\": 0, //当前破产次数\n\t\t\t\"lowestMoney\": 0,      //破产下限\n\t\t\t\"intervals\": [],      //每次领取破产时间间隔\n\t\t}\n\t\tinfo.curBankruptTime = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.curBankruptTime);\n\t\tinfo.lowestMoney = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), info.lowestMoney);\n\n\t\tlet count = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), 0);\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tinfo.intervals.push(Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), 0))\n\t\t}\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\t//通用：返回破产次数\n\tcomm_respBankUpCount(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\t/** info */\n\t\tlet info = {\n\t\t\t\"curCount\": 0,      //第几次破产\n\t\t\t\"leftTime\": 0,      //当前剩余时间\n\t\t\t\"vipExpires\": 0,    //vip过期时间\n\t\t\t\"vipActualTime\": 0, //vip等待的真实时间\n\t\t\t\"get_money\": 0,     //可领取的补助\n\t\t\t\"shard_cd_flag\": 0, //vip等待的真实时间\n\t\t};\n\t\tinfo.curCount = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.curCount);\n\t\tinfo.leftTime = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.leftTime);\n\t\tinfo.vipExpires = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.vipExpires);\n\t\tinfo.vipActualTime = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.vipActualTime);\n\t\tinfo.get_money = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.get_money);\n\t\tinfo.shard_cd_flag = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.shard_cd_flag);\n\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\t//通用：返回破产\n\tcomm_respBankUp(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\t/** info */\n\t\tlet info = {\n\t\t\t\"flag\": 0,            //请求破产是否成功(1.成功 0失败)\n\t\t\t\"brokeMoney\": 0,      //破产领取的钱数\n\t\t\t\"money\": 0,           //用户当前的钱数\n\t\t\t\"errType\": 0,         //失败原因：1、server记没有破产2、已经领取完了所有破产奖励3、还没有到领取破产奖励的时间4、其他原因 \n\t\t};\n\t\tinfo.flag = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.flag);\n\t\tinfo.brokeMoney = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), info.brokeMoney);\n\t\tinfo.money = Utils.nullToDefault(WebSocketBuffer.Read.readInt64(packetID), info.money);\n\t\tinfo.errType = Utils.nullToDefault(WebSocketBuffer.Read.readInt(packetID), info.errType);\n\n\t\treturn GetPackPacket(headCmd, null, info, dataView)\n\t}\n\n\t//默认未未定义解析方式的就用这个解析\n\t__defaultWriteOrRead(headCmd, packetID: string) {\n\t\tlet dataView = checkRead(packetID)\n\t\tif (!dataView) {\n\t\t\treturn null\n\t\t}\n\t\tLogger.logModel(`【GPBRead】 HeadCmd[10进制] = ${headCmd} HeadCmd[16进制] = ${Utils.number_formatToHex(headCmd)} 使用默认方式解析`)\n\n\t\treturn GetPackPacket(headCmd, null, null, dataView)\n\t}\n\n}\n\n/**写 */\nclass GPBWrite extends SuperWriteAndRead {\n\n\t//实例化\n\tconstructor() {\n\t\tsuper(\"GPBWrite\", WriteAndReadType.Write);\n\t};\n\t//写php老协议\n\tWritePhpRequest(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\treturn\n\t}\n\t//写php新协议\n\tWritePhpRequestNew(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\t//先对数据进行处理\n\t\tlet jsonData = Encrypt.JsonEncode(reqProtocol.data)\n\t\tif (jsonData) {\n\t\t\tjsonData = Encrypt.ZlibZip(jsonData)\n\t\t\t// console.log(\"ZlibZip的Md5 = >\"+ Md5(jsonData))\n\t\t\tjsonData = Encrypt.base64_encode(jsonData)\n\t\t}\n\t\tif (!jsonData) {\n\t\t\tjsonData = \"\"\n\t\t\treqProtocol.isCompress = false\n\t\t}\n\t\t//再写入字节\n\t\tif (jsonData != null && jsonData != undefined) {\n\t\t\tWebSocketBuffer.Write.writeInt(packetID, reqProtocol.data.mid)\n\t\t\tWebSocketBuffer.Write.writeInt(packetID, reqProtocol.data.cmd)\n\t\t\tWebSocketBuffer.Write.writeInt(packetID, reqProtocol.isCompress == true ? 1 : 0) //1 压缩 0未php压缩\n\n\t\t\t//写入正文\n\t\t\tWebSocketBuffer.Write.writeString(packetID, jsonData)\n\t\t} else {\n\t\t\tLogger.logModel(\"【GPBWrite】:WritePhpRequestNew  不存在正文数据\")\n\t\t}\n\t\treqProtocol.data = jsonData\n\t\treturn reqProtocol\n\t}\n\t//心跳\n\tWriteServersHeart(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\treqProtocol.isCompress = false\n\t\t//写入正文\n\t\tWebSocketBuffer.Write.writeString(packetID, null)\n\n\t\treqProtocol.data = \"\"\n\t\treturn reqProtocol\n\t}\n\n\t/******************************大厅和游戏通用******************** */\n\t//一键登录游戏\n\tcomm_OneKeyLoginGame(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\tlet info = reqProtocol.data\n\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"gameId\"], 0))\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"levelId\"], 0))\n\t\tWebSocketBuffer.Write.writeString(packetID, Utils.nullToDefault(info[\"key\"], \"\"))\n\t\tlet jsonUserInfo = Encrypt.JsonEncode(info[\"userInfo\"]) || \"\"\n\t\tWebSocketBuffer.Write.writeString(packetID, jsonUserInfo)\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"flag\"], 0))\n\t\tWebSocketBuffer.Write.writeShort(packetID, Utils.number_valueOf(info[\"changeTableType\"], 0))  //0为正常进 1为换桌\n\t\tlet jsonExtParam = Encrypt.JsonEncode(info[\"extParam\"]) || \"\"\n\t\tWebSocketBuffer.Write.writeString(packetID, jsonExtParam)\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"gameVersion\"], 0))\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"playType\"], 0))\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"propertyId\"], 0))\n\n\t\t//对数据进行处理\n\t\tlet jsonData = Encrypt.JsonEncode(info)\n\t\treqProtocol.data = jsonData\n\t\treturn reqProtocol\n\n\t}\n\t//ROOM_SEND_LOGIN: 0x1001 登录具体游戏房间\n\tcomm_LoginGameInto(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\tlet info = reqProtocol.data;\n\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"roomId\"]));\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"mid\"]));\n\t\tWebSocketBuffer.Write.writeString(packetID, info[\"key\"]);\n\n\t\tlet jsonUserInfo = Encrypt.JsonEncode(info[\"userInfo\"]) || \"\";\n\t\tWebSocketBuffer.Write.writeString(packetID, jsonUserInfo);\n\t\tWebSocketBuffer.Write.writeInt(packetID, 1);\n\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol;\n\n\t}\n\t//USER_READY_REQUEST 0x2001:请求准备\n\tcomm_reqReady(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\t//请求准备无内容  空实现\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol\n\t}\n\n\t//CLIENT_COMMAND_LOGOUT_IN_GAME 0x1039:玩家请求退出\n\tcomm_reqLogOutTry(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\t//玩家请求退出无内容  空实现\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol\n\t}\n\t//ROOM_SEND_LOGOUT 0x1002:玩家确定要退出\n\tcomm_reqLogOut(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\"\n\t\treturn reqProtocol\n\t}\n\n\t//CLIENT_COMMAND_REQUEST_AI 0x2005:玩家请求托管或取消托管\n\tcomm_reqUserAI(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\treqProtocol.isCompress = false\n\t\tWebSocketBuffer.Write.writeInt(packetID, reqProtocol.data[\"ai\"] || 0);\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol;\n\t}\n\t//CLIENT_COMMAND_CHANGE_TABLE 0x1028:玩家请求换桌\n\tcomm_reqChangeTable(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\t//玩家请求换桌无内容  空实现\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol;\n\t}\n\n\t//破产数据请求\n\tcomm_reqBankUpData(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\t//玩家请求破产配置无内容  空实现\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol;\n\t}\n\t//破产次数\n\tcomm_reqBankUpCount(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\tlet info = reqProtocol.data\n\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"mid\"], 0))\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"hasShard\"], 0))\n\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol;\n\t}\n\t//请求破产\n\tcomm_reqBankUp(headCmd, packetID: string, reqProtocol: IRequestProtocol) {\n\t\tif (!checkWrite(packetID, reqProtocol)) {\n\t\t\treturn null\n\t\t}\n\t\tlet info = reqProtocol.data\n\n\t\tWebSocketBuffer.Write.writeInt(packetID, Utils.number_valueOf(info[\"mid\"], 0))\n\n\t\treqProtocol.isCompress = false\n\t\treqProtocol.data = \"\";\n\t\treturn reqProtocol;\n\t}\n\n}\n\n//导出通用读写\nexport const GPBWriteAndRead = { Write: new (GPBWrite), Read: new (GPBRead) }\n\n\n"]}
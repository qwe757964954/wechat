{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/cache/Room.ts"],"names":["Room","SettleMgr","Desk","EventManager","FXJEvent","FXJUIID","GameEvent","BankerMgr","OperationMgr","OperationResultMgr","PlayerMgr","RoomMgr","constructor","turnMe","bankerMgr","getInstance","enterRoomUpdate","resp","updateRoomInfo","setPlayerList","playerList","getMyPlayerInfo","reconnectionRoomUpdate","players","dispatch","RECEIVE_DEAL_CARD","operation","userOperation","VIEW_USER_OPERATION","DRAW_MY_CARD","settleItems","forEach","item","updateSettleResult","GAME_OPEN_POPUP","GameSettlePrefab","dealCardUpdate","updatePlayerCardsNum","cardsCount","updateMyhands","cards","updateRemainCardsCount","remainCardsCount","gameGrabCard","remainCardNum","updateOutCards","updateFanGangCards","remainCardCount","fangangCards","gangCount","updateSelectFanGangCards","selectFanGangCards","card","bankerFirstOperation","bankSeatId","updateMyselfOpration","userOperationResult","updateSelectInfo","gameOverResult","isReady"],"mappings":"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","sourcesContent":["import { SettleMgr } from './SettleMgr';\n/**\n * Name = Room\n * URL = db://assets/package/game/cache/Room.ts\n * Time = Mon Jul 24 2023 19:18:24 GMT+0800 (中国标准时间)\n * Author = xueya\n * 游戏房间缓存\n */\n\nimport { Desk } from \"../../../cache/Desk\";\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { FXJEvent } from '../common/FXJEvent';\nimport { FXJUIID } from '../common/FXJRes';\nimport { GameEvent } from '../common/GameEvent';\nimport { Game } from \"../common/idl/Game\";\nimport { BankerMgr } from \"./BankerMgr\";\nimport { OperationMgr } from \"./OperationMgr\";\nimport { OperationResultMgr } from \"./OperationResultMgr\";\nimport { PlayerMgr } from \"./PlayerMgr\";\nimport { RoomMgr } from \"./RoomMgr\";\nexport class Room extends Desk {\n\tprivate turnMe:boolean = false;\n\t//实例化\n\tconstructor() {\n\t\tsuper(\"Room\")\n\t};\n\t// fixLaizi: IFixLaizi;\n\t// RoomMgr.getInstance()\n\tbankerMgr?:BankerMgr = BankerMgr.getInstance();\n\tpublic enterRoomUpdate(resp:Game.IUserLoginRoom) :void{\n\t\tRoomMgr.getInstance().updateRoomInfo(resp);\n\t\tPlayerMgr.getInstance().setPlayerList(resp?.playerList);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo();\n\t}\n\t\n\tpublic reconnectionRoomUpdate(resp:Game.IUserReconnect) :void{\n\t\tRoomMgr.getInstance().updateRoomInfo(resp);\n\t\tPlayerMgr.getInstance().setPlayerList(resp?.players);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo();\n\t\tEventManager.dispatch(GameEvent.RECEIVE_DEAL_CARD);\n\t\tif(resp.operation){\n\t\t\tthis.userOperation(resp.operation);\n\t\t\tEventManager.dispatch(GameEvent.VIEW_USER_OPERATION,resp.operation);\n\t\t\tEventManager.dispatch(GameEvent.DRAW_MY_CARD);\n\t\t}\n\t\tif(resp.settleItems){\n\t\t\tresp.settleItems.forEach((item:Game.ISettleItem) => {\n\t\t\t\tthis.updateSettleResult(item);\n\t\t\t\tEventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameSettlePrefab);\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\n\tpublic dealCardUpdate(resp:Game.IDealCard) :void{\n\t\tPlayerMgr.getInstance().updatePlayerCardsNum(resp.cardsCount);\n\t\tPlayerMgr.getInstance().updateMyhands(resp.cards);\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardsCount);\n\t}\n\n\tpublic gameGrabCard(resp:Game.IGrabCard) :void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardNum);\n\t\tPlayerMgr.getInstance().updateOutCards(resp);\n\t}\n\n\tpublic updateFanGangCards(resp:Game.IUpdateFanGangPai) : void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardCount);\n\t\tRoomMgr.getInstance().fangangCards = resp.cards;\n\t\tPlayerMgr.getInstance().gangCount = resp.gangCount;\n\t}\n\n\tpublic updateSelectFanGangCards(resp:Game.ISelectFanGangPai) : void {\n\t\tRoomMgr.getInstance().selectFanGangCards = resp.card;\n\t}\n\t\n\tpublic bankerFirstOperation(resp:Game.IFixBanker) : void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardNum);\n\t\tRoomMgr.getInstance().bankSeatId = resp.bankSeatId;\n\t}\n\t\n\tpublic userOperation(resp:Game.IOperation) : void {\n\t\tOperationMgr.getInstance().updateMyselfOpration(resp);\n\t\tthis.turnMe = true;\n\t}\n\t\n\tpublic userOperationResult(resp:Game.IOperationResult) : void {\n\t\tOperationResultMgr.getInstance().userOperationResult(resp);\n    }\n\t\n\tpublic updateSettleResult(resp:Game.ISettleItem) : void {\n\t\tSettleMgr.getInstance().updateSelectInfo(resp);\n\t}\n\n\tpublic gameOverResult() : void {\n\t\t// SettleMgr.getInstance().updateSelectInfo(resp);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo().isReady = 0;\n\t}\n}"]}
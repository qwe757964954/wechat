{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/module/settle/src/BottomItem.ts"],"names":["Color","Label","Node","Sprite","SpriteAtlas","_decorator","Utils","resLoader","RoomMgr","FXJRes","CardUtil","NodeHead","ListItem","ccclass","property","winningColor","losingColor","BottomItem","upDownMap","Map","onInitModuleEvent","updateItemProps","info","gameUserInfo","JSON","parse","strUserInfo","node_head","getComponent","updateUserHead","nick_name","string","nickName","money","winMoney","toString","up_down","calculatePlayerPosition","getInstance","mySeatId","seatId","colorStr","bWin","normalColor","color","bgStr","frameBg","string_format","Prefab_Settle_Image","plistKey","load","bundle","path","err","atlas","bgAtlas","getSpriteFrame","player_bg","spriteFrame"],"mappings":"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","sourcesContent":["\nimport { Color, Label, Node, Sprite, SpriteAtlas, _decorator } from 'cc';\nimport { Utils } from '../../../../../framework/Utils';\nimport { resLoader } from '../../../../../framework/loader/ResLoader';\nimport { RoomMgr } from '../../../cache/RoomMgr';\nimport { FXJRes } from '../../../common/FXJRes';\nimport { Common } from '../../../common/idl/Common';\nimport { Game } from '../../../common/idl/Game';\nimport { CardUtil } from '../../../util/CardUtil';\nimport { NodeHead } from './NodeHead';\nimport ListItem from './list/ListItem';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = BottomItem\n * URL = db://assets/package/game/module/settle/src/BottomItem.ts\n * Time = Tue Aug 08 2023 16:15:04 GMT+0800 (中国标准时间)\n * Author = qwe757964\n *\n * Life: onLoad-->onInitModuleEvent-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * \n */\n \nconst winningColor:string = \"#D56D44\";\nconst losingColor:string = \"#6585CA\";\n\n@ccclass('BottomItem')\nexport class BottomItem extends ListItem {\n\t@property(Sprite)\n    public player_bg: Sprite | null = null;\n\n\t@property(Label)\n    public up_down: Label | null = null;\n\t\n\t@property(Label)\n    public nick_name: Label | null = null;\n\t\n\t@property(Label)\n    public money: Label | null = null;\n\t\n\t@property(Sprite)\n    public bankruptcy_tag: Sprite | null = null;\n\n\t@property(Node)\n    public node_head: Node | null = null;\n\n\t//code 对应的图集\n    upDownMap = new Map<number, string>();\n\n\t/** override 初始化模块事件 */\n\tprotected onInitModuleEvent() {\n\t\t\n\t};\n\t\n\n\tupdateItemProps(info:Game.ITotalInfo){\n\t\tlet gameUserInfo:Common.GameUserInfo = JSON.parse(info.strUserInfo)\n\t\tthis.node_head.getComponent(NodeHead).updateUserHead(gameUserInfo);\n\t\tthis.nick_name.string = gameUserInfo.nickName;\n\t\tthis.money.string = info.winMoney.toString();\n\t\tthis.up_down.string = CardUtil.calculatePlayerPosition(RoomMgr.getInstance().mySeatId,info.seatId);\n\t\tconst colorStr:string = info.bWin === -1 ? losingColor:winningColor;\n\t\tlet normalColor = new Color(colorStr);\n\t\tthis.money.color = normalColor;\n\t\tlet bgStr:string = info.bWin === -1 ? \"player_fail_bg\":\"player_win_bg\";\n\t\tlet frameBg = Utils.string_format(FXJRes.Prefab_Settle_Image.plistKey, bgStr);\n\t\tresLoader.load(FXJRes.Prefab_Settle_Image.bundle, FXJRes.Prefab_Settle_Image.path, SpriteAtlas, (err: Error | null, atlas) => {\n\t\t\tif (err) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlet bgAtlas = atlas.getSpriteFrame(frameBg);\n\t\t\tif (bgAtlas) {\n\t\t\t\tthis.player_bg.spriteFrame = bgAtlas;\n\t\t\t}\n\t\t});\n\t}\n}\n\n"]}
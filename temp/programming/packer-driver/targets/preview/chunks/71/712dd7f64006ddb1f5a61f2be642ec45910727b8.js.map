{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/framework/vc/ToastComponent.ts"],"names":["Label","Node","UITransform","_decorator","SystemConf","BaseComponent","ccclass","property","menu","ToastComponent","tooltip","type","_overWidth","_isLoad","_toastParam","onLoad","updateTxt","updateView","str","lab_content","string","String","console","log","lblWidth","getComponent","width","bgWidth","lab_Bg","maxWidth","DEV_SIZE","toast","param"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,U,OAAAA,U;;AAC1BC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA8BL,U;;gCAMvBM,c,WAJZH,OAAO,CAAC,gBAAD,C,UAEPE,IAAI,CAAC,mBAAD,C,UAGAD,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,OAAX;AAAoBC,QAAAA,IAAI,EAAEV;AAA1B,OAAD,C,UAGRM,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,IAAI,EAAEV;AAAzB,OAAD,C,UAGRM,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,QAAX;AAAqBC,QAAAA,IAAI,EAAEX;AAA3B,OAAD,C,0CAXb,MAIaS,cAJb;AAAA;AAAA,0CAIkD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAUtCG,UAVsC,GAUzB,EAVyB;AAAA,eAYtCC,OAZsC,GAY5B,KAZ4B;AAAA,eAmBtCC,WAnBsC,GAmBL,IAnBK;AAAA;;AAoB9CC,QAAAA,MAAM,GAAG;AAEL,eAAKF,OAAL,GAAe,IAAf;AACA,eAAKG,SAAL,CAAe,KAAKF,WAAL,GAAmB,KAAKA,WAAL,CAAiB,SAAjB,CAAnB,GAAiD,EAAhE;AACA,eAAKG,UAAL;AACH;;AAEOD,QAAAA,SAAS,CAACE,GAAD,EAAW;AAAA,cAAVA,GAAU;AAAVA,YAAAA,GAAU,GAAJ,EAAI;AAAA;;AACxB,cAAI,KAAKC,WAAT,EAAsB;AAClB,iBAAKA,WAAL,CAAiBC,MAAjB,GAA0BC,MAAM,CAACH,GAAD,CAAhC;AACAI,YAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCL,GAAhC;AACH;AACJ;;AACOD,QAAAA,UAAU,GAAG;AACjB,cAAIO,QAAQ,GAAG,KAAKL,WAAL,CAAiBM,YAAjB,CAA8BvB,WAA9B,EAA2CwB,KAA1D;AACA,cAAIC,OAAO,GAAG,KAAKC,MAAL,CAAYH,YAAZ,CAAyBvB,WAAzB,EAAsCwB,KAApD;;AACA,cAAIF,QAAQ,IAAIG,OAAhB,EAAyB;AACrB,gBAAIE,QAAQ,GAAGL,QAAQ,GAAG,KAAKZ,UAA/B;;AACA,gBAAIiB,QAAQ,GAAG;AAAA;AAAA,0CAAWC,QAAX,CAAoBJ,KAAnC,EAA0C;AACtCG,cAAAA,QAAQ,GAAG;AAAA;AAAA,4CAAWC,QAAX,CAAoBJ,KAA/B;AACH;;AACD,iBAAKE,MAAL,CAAYH,YAAZ,CAAyBvB,WAAzB,EAAsCwB,KAAtC,GAA8CG,QAA9C;AACH;AACJ;AACD;AACJ;AACA;AACA;;;AACWE,QAAAA,KAAK,CAACC,KAAD,EAAa;AACrB,eAAKlB,WAAL,GAAmBkB,KAAnB;;AACA,cAAI,CAAC,KAAKnB,OAAV,EAAmB;AACf;AACH;;AACD,eAAKG,SAAL,CAAe,KAAKF,WAAL,GAAmB,KAAKA,WAAL,CAAiB,SAAjB,CAAnB,GAAiD,EAAhE;AAEA,eAAKG,UAAL;AACH;;AAxD6C,O;;;;;iBAEb,I;;;;;;;iBAGH,I;;;;;;;iBAGM,I","sourcesContent":["import { Label, Node, UITransform, _decorator } from \"cc\";\nimport { SystemConf } from \"../../config/GameConfig\";\nimport { BaseComponent } from \"./BaseComponent\";\n\nconst { ccclass, property, menu } = _decorator;\n\n@ccclass('ToastComponent')\n//方便编辑器识别的菜单项目\n@menu('vc/ToastComponent')\n\nexport class ToastComponent extends BaseComponent {\n    @property({ tooltip: \"吐司根节点\", type: Node })\n    private toastRoot: Node | null = null;\n\n    @property({ tooltip: \"吐司背景\", type: Node })\n    private lab_Bg: Node | null = null;\n\n    @property({ tooltip: \"吐司文本内容\", type: Label })\n    private lab_content: Label | null = null;\n\n    private _overWidth = 40;\n\n    private _isLoad = false;\n    /**\n     * 吐司附加参数\n     *  { \n     *      content: null, 正文内容 string\n     *  }\n     */\n    private _toastParam: { content: null } = null;\n    onLoad() {\n        \n        this._isLoad = true;\n        this.updateTxt(this._toastParam ? this._toastParam[\"content\"] : \"\");\n        this.updateView();\n    }\n\n    private updateTxt(str = \"\") {\n        if (this.lab_content) {\n            this.lab_content.string = String(str);\n            console.log(\"显示吐司===>content:\", str)\n        }\n    }\n    private updateView() {\n        let lblWidth = this.lab_content.getComponent(UITransform).width;\n        let bgWidth = this.lab_Bg.getComponent(UITransform).width;\n        if (lblWidth >= bgWidth) {\n            let maxWidth = lblWidth + this._overWidth;\n            if (maxWidth > SystemConf.DEV_SIZE.width) {\n                maxWidth = SystemConf.DEV_SIZE.width;\n            }\n            this.lab_Bg.getComponent(UITransform).width = maxWidth;\n        }\n    }\n    /**\n     * 显示操作\n     * @param param 文本\n     */\n    public toast(param: any) {\n        this._toastParam = param;\n        if (!this._isLoad) {\n            return;\n        }\n        this.updateTxt(this._toastParam ? this._toastParam[\"content\"] : \"\");\n\n        this.updateView();\n    }\n\n}"]}
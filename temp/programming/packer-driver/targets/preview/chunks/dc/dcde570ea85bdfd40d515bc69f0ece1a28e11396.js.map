{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/cache/Activity.ts"],"names":["Activity","GConstants","Utils","BaseCache","Platform","constructor","superClass","__User","_newPlayerActivityConfig","_newPlayerActivityMain","_holidaysGiftPackage","_signinData","_continueAwardDay","_signGiftData","_signTodayGift","_limitPackData","_firstPayData","updateNewPlayerActivityCfg","body","imgCFG","table_verify","key","Object","prototype","hasOwnProperty","call","value","status","oldUserDouble","oldDayPopNum","oldWeekPopNum","NewPopNum","baseIcon","firstIcon","rule","newRule","hallTip","newUserTip","shareTip","inviteTip","imageCfg","effectiveDate","id","edit_time","sdate","edate","userType","getNewPlayerActivityCfgBykey","del","isNull","updateNewPlayerActivityMain","getNewPlayerActivityMain","updateHolidaysGiftPackage","number_valueOf","keyArray","mergeArray","RedDot","update_gift_holiday","getHolidaysGiftPackage","checkHolidayPop","isCanPay","currowTime","time","giftpack","flag","num","goodsId","payData","ShopInfo","getPriceByGoodsSceneId","GoodsListID","limitPack","maxNum","isLimit","updateSigninData","today","signAward","k","print","update_signin","updateSigninBySuccess","signinDataToday","todayStatus","table_isEmpty","itemData","isNotNull","ctDay","continueAward","index","length","day","updateContinusAward","continueAwardToday","getSigninData","checkHaveSignin","checkTodayIsOpenSign","getTodayLocalRecord","updateTodayOpenSign","setTodayLocalRecord","setContinusAwardDay","getContinusAwardDay","updateLimitPackData","checkHaveLimitPack","getLimitPackData","getLimitPackIcon","updateFirstPayPackage","update_gift_firstpay","getFirstPayPackage"],"mappings":"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","sourcesContent":["/**\n * Name = Activity\n * URL = db://assets/cache/Activity.ts\n * Time = Mon May 23 2022 10:54:59 GMT+0800 (中国标准时间)\n * Author = xueya\n * 活动数据缓存\n */\n\nimport { GConstants } from \"../config/GameConstant\";\nimport { Utils } from \"../framework/Utils\";\nimport { BaseCache } from \"../framework/vc/BaseCache\";\nimport { Platform } from \"../platform/Platform\";\nimport { User } from \"./User\";\n\n\nexport class Activity extends BaseCache {\n    /** 用户类 */\n    private __User: User = null;\n    //新手福利活动\n    _newPlayerActivityConfig = null;\n    //新手福利活动数据(main)\n    _newPlayerActivityMain = null;\n    //限时折扣\n    _holidaysGiftPackage = null;\n\n    //签到数据\n    _signinData = null;\n    _continueAwardDay = null;\n\n    //签到活动数据\n    _signGiftData = null;\n\n    //今日奖品\n    _signTodayGift = null;\n\n    //限时礼包数据\n    _limitPackData = null;\n\n    //首充礼包数据\n    _firstPayData = null;\n\n    //实例化\n    constructor(superClass) {\n        super(\"Activity\");\n        this.__User = superClass;\n    };\n\n    //更新新手福利活动配置\n    updateNewPlayerActivityCfg(body) {\n        let imgCFG = {\n            [\"helpBtn\"]: \"\",  // 帮助按钮\n            [\"closeBtn\"]: \"\", // 关闭按钮\n            [\"oldBg\"]: \"\", // 邀请页背景\n            [\"copyBtn\"]: \"\", // 复制邀请码按钮\n            [\"shareBtn\"]: \"\", // 分享按钮\n            [\"goFillBtn\"]: \"\", // 去填码按钮\n            [\"newBg\"]: \"\", // 新人页背景图\n            [\"getBtn\"]: \"\", // 领奖按钮\n            [\"goShareBtn\"]: \"\", // 去分享按钮\n            [\"itemBtn\"]: \"\",  // 奖励背景\n            [\"seletImg\"]: \"\", // 触发时的奖励框上的闪光框\n            [\"bubble\"]: \"\",  // 气泡\n            [\"TipsViewBg\"]: \"\",   // 提示 规则页背景\n\n            // 进度条\n            [\"progress1\"]: \"\",  // 第一个进度条未达到时的图片\n            [\"progress2\"]: \"\",  // 中间进度条未达到时的图片\n            [\"progress3\"]: \"\",  // 最后一个进度条未达到时的图片\n            [\"progress_acheive1\"]: \"\",  // 第一个进度条达到时的图片\n            [\"progress_acheive2\"]: \"\",  // 中间进度条达到时的图片\n            [\"progress_acheive3\"]: \"\",  // 最后一个进度条达到时的图片\n        }\n        body = Utils.table_verify(body)\n\n        if (body[\"imageCfg\"]) {\n            for (let key in body[\"imageCfg\"]) {\n                if (Object.prototype.hasOwnProperty.call(body[\"imageCfg\"], key)) {\n                    let value = body[\"imageCfg\"][key];\n                    imgCFG[key] = value;\n                }\n            }\n        }\n        this._newPlayerActivityConfig = {\n            status: body[\"status\"],\n            oldUserDouble: body[\"oldUserDouble\"],\n            oldDayPopNum: body[\"oldDayPopNum\"],\n            oldWeekPopNum: body[\"oldWeekPopNum\"],\n            NewPopNum: body[\"NewPopNum\"],\n            baseIcon: body[\"baseIcon\"],\n            firstIcon: body[\"firstIcon\"],\n            rule: body[\"rule\"],\n            newRule: body[\"newRule\"],\n            hallTip: body[\"hallTip\"],\n            newUserTip: body[\"newUserTip\"],\n            shareTip: body[\"shareTip\"],\n            inviteTip: body[\"inviteTip\"],\n            imageCfg: imgCFG,\n            effectiveDate: body[\"effectiveDate\"],\n            id: body[\"id\"],\n            edit_time: body[\"edit_time\"],\n            sdate: body[\"sdate\"],\n            edate: body[\"edate\"],\n            userType: body[\"userType\"],  // 2是新用户 1是老用户\n        }\n        /**\n         * \"status\": 1,\n        \"oldUserDouble\": \"1.2\",\n        \"oldDayPopNum\": 5,\n        \"oldWeekPopNum\": 5,\n        \"NewPopNum\": 5,\n        \"baseIcon\": \"\",\n        \"firstIcon\": \"https://dfqppic.266.com/dfqp/pic/shop/ixoc4d7p.png\",\n        \"rule\": \"1.每个用户进入活动页面可以生成自己的分享码，复制给新用户，新用户注册后在活动页面输入分享码，即可领取分享礼\n        2. 新用户输入分享码， 并玩牌3局后， 老用户即可领取相应奖励\n        3. 被邀请的对象必须是： 新注册玩家。 每人最多邀请10位好友\n        4. 系统会对被邀请者做判断， 如被邀者领取不到奖励， 则说明他不符合条件 \",\n        \"newRule \":\"\n        2. 新用户输入分享码， 并玩牌3局后， 老用户即可领取相应奖励\n        3. 被邀请的对象必须是： 新注册玩家。 每人最多邀请10位好友\n        4. 系统会对被邀请者做判断， 如被邀者领取不到奖励， 则说明他不符合条件 \",\"\n        hallTip \":\"\n        最高送6W银币 \",\"\n        newUserTip \":\"\n        价\\ n值\\ n6\\ n万\\ n银\\ n币 \",\"\n        shareTip \":\"\n        价\\ n值\\ n6\\ n万\\ n银\\ n币 \",\"\n        inviteTip \":\"#\n        n邀请# s24# cffe62e 30# n天以上未登录的朋友， 可获# s24# cffe62e 2# n倍奖励 \",\"\n        imageCfg \":{\"\n            helpBtn \":\"\n            \",\"\n            closeBtn \":\"\n            \",\"\n            oldBg \":\"https: //dfqppic.266.com/dfqp/pic/shop/txxvlec0.png\",\n            \"copyBtn\":\"\",\n            \"shareBtn\":\"\",\n            \"goFillBtn\":\"\",\n            \"newBg\":\"https://dfqppic.266.com/dfqp/pic/shop/3bx1gu0s.png\",\n            \"getBtn\":\"\",\n            \"goShareBtn\":\"\",\n            \"itemBtn\":\"\",\n            \"seletImg\":\"\",\n            \"descBubble\":\"\",\n            \"goldTextBtn\":\"\",\n            \"TipsViewBg\":\"\",\n            \"progress1\":\"\",\"progress2\":\"\",\n            \"progress3\":\"\",\n            \"progress_acheive1\":\"\",\n            \"progress_acheive2\":\"\",\n            \"progress_acheive3\":\"\"\n        },\n        \"effectiveDate\":\"2022-05-01 00:00:00 至 2022-05-31 23:59:59\",\n        \"id\":1,\n        \"edit_time\":1652783831,\n        \"sdate\":1651334400,\n        \"edate\":1654012799,\n        \"userType\":1\n         */\n    }\n    //获取新手福利活动配置的某一个值\n    getNewPlayerActivityCfgBykey(key: string, del: any = null) {\n        if (Utils.isNull(key) || Utils.isNull(this._newPlayerActivityConfig)) {\n            return null\n        }\n        return this._newPlayerActivityConfig[key] || del\n    }\n\n    //更新新手活动(main)\n    updateNewPlayerActivityMain(body) {\n        this._newPlayerActivityMain = body\n    }\n    //获取新手活动(main)\n    getNewPlayerActivityMain() {\n        return this._newPlayerActivityMain\n    }\n    //更新限时折扣礼包\n    updateHolidaysGiftPackage(body) {\n        body = Utils.table_verify(body)\n        if (Utils.isNull(body[\"giftpack\"]) || Utils.isNull(body[\"sdate\"]) || Utils.isNull(body[\"edate\"])) {\n            return false\n        }\n        body[\"sdate\"] = Utils.number_valueOf(body[\"sdate\"])\n        body[\"edate\"] = Utils.number_valueOf(body[\"edate\"])\n        //保存的key\n        let keyArray = [\n            \"add_time\",\n            \"appid\",\n            \"basemap\",\n            \"buyBtn\",\n            \"edate\",\n            \"edit_time\",\n            \"firstIcon\",\n            \"giftpack\", //商品道具\n            \"id\",\n            \"sdate\",   //开始时间\n            \"sedate\",  //结束时间\n            \"status\"\n        ]\n        this._holidaysGiftPackage = this.mergeArray(keyArray, body);\n        this.__User.RedDot.update_gift_holiday(this._holidaysGiftPackage);\n    }\n    /** 获取限时折扣礼包 */\n    getHolidaysGiftPackage() {\n        return this._holidaysGiftPackage;\n    }\n\n    /**\n     * 判断是否强弹 \n     * @returns boolean \n    */\n    checkHolidayPop(): boolean {\n        if (Platform.isCanPay() == false) {\n            return false;\n        }\n        if (this._holidaysGiftPackage) {\n            if (this._holidaysGiftPackage[\"sdate\"] && this._holidaysGiftPackage[\"edate\"]) {\n                let currowTime = Utils.time();\n                if (currowTime < this._holidaysGiftPackage[\"sdate\"] || currowTime > this._holidaysGiftPackage[\"edate\"]) {\n                    return false;\n                }\n            }\n        }\n        //如果没有次数了\n        let giftpack = this._holidaysGiftPackage['giftpack'];\n        let flag = false;\n        //获取剩余次数\n        for (let value of giftpack) {\n            let num = Utils.number_valueOf(value['num']);\n            let goodsId = Utils.number_valueOf(value['gid']);\n            if (goodsId <= 0) {\n                continue;\n            }\n            let payData = this.__User.ShopInfo.getPriceByGoodsSceneId(GConstants.GoodsListID.limitPack, goodsId);\n            let maxNum = Utils.number_valueOf(payData['limitNum'], 0);\n            let isLimit = Utils.number_valueOf(payData['limit_buy_way'], 0);\n            if (isLimit == 0 || maxNum > num) {\n                flag = true;\n                break;\n            }\n        }\n        return flag;\n    }\n\n\n    /** 更新签到数据(服务端下发) */\n    updateSigninData(body) {\n        body = Utils.table_verify(body)\n\n        if (Utils.isNull(body.today) || Utils.isNull(body.signAward)) {\n            return\n        }\n\n        body.today = Utils.number_valueOf(body.today);\n\n        for (let k in body.signAward) {\n            body.signAward[k].today = body.today;\n        }\n\n        this._signinData = body;\n\n        this.print(\"updateSigninData: \", body);\n\n        this.__User.RedDot.update_signin(this._signinData);\n    }\n    /** 更新签到数据(成功之后) */\n    updateSigninBySuccess(body) {\n\n        body = Utils.table_verify(body)\n\n        if (Utils.isNull(this._signinData)) {\n            return null;\n        }\n        let signinDataToday = null;\n\n        this._signinData.todayStatus = 1;\n\n        if (!Utils.table_isEmpty(this._signinData.signAward)) {\n            let itemData = this._signinData.signAward[this._signinData.today - 1]\n            if (!Utils.table_isEmpty(itemData)) {\n                itemData.status = 3;\n                signinDataToday = itemData;\n            }\n        }\n\n\n        if (Utils.isNotNull(body.ctDay) && body.ctDay > 0) {\n            if (!Utils.table_isEmpty(this._signinData.continueAward)) {\n                for (let index = 0; index < this._signinData.continueAward.length; index++) {\n                    let itemData = this._signinData.continueAward[index]\n                    if (!Utils.table_isEmpty(itemData) && itemData.day == body.ctDay) {\n                        itemData.status = 1;\n                    }\n                }\n            }\n        }\n\n        this.__User.RedDot.update_signin(this._signinData);\n        return signinDataToday;\n    }\n\n    updateContinusAward(body, day: number) {\n        let continueAwardToday = null;\n\n        body = Utils.table_verify(body)\n\n        if (Utils.isNull(this._signinData)) {\n            return continueAwardToday;\n        }\n\n        if (Utils.isNotNull(day) && day > 0) {\n            if (!Utils.table_isEmpty(this._signinData.continueAward)) {\n                for (let index = 0; index < this._signinData.continueAward.length; index++) {\n                    let itemData = this._signinData.continueAward[index]\n                    if (!Utils.table_isEmpty(itemData) && itemData.day == day) {\n                        itemData.status = 2;\n                        continueAwardToday = itemData;\n                    }\n                }\n            }\n        }\n\n        this.__User.RedDot.update_signin(this._signinData);\n        return continueAwardToday;\n    }\n\n    /** 获取签到数据 */\n    getSigninData() {\n        return this._signinData;\n    }\n\n    /** 是否有签到数据 */\n    checkHaveSignin(): boolean {\n        return Utils.isNotNull(this._signinData);\n    }\n    /** 今日是否打开签到 */\n    checkTodayIsOpenSign(): boolean {\n        return this.__User.getTodayLocalRecord(\"hasShowSignin\", false)\n    }\n    /** 更新今日签到状态 */\n    updateTodayOpenSign() {\n        this.__User.setTodayLocalRecord(\"hasShowSignin\", true)\n    }\n\n    setContinusAwardDay(value: number) {\n        this._continueAwardDay = value;\n    }\n\n    getContinusAwardDay() {\n        return this._continueAwardDay;\n    }\n\n    /** 更新特价礼包数据(服务端下发) */\n    updateLimitPackData(body) {\n        body = Utils.table_verify(body)\n\n        if (Utils.isNull(body.id) || Utils.isNull(body.giftpack)) {\n            return\n        }\n        body.id = Utils.number_valueOf(body.id);\n        this._limitPackData = body;\n        this.print(\"limitPackData: \", body);\n    }\n\n    /** 是否有特价礼包数据 */\n    checkHaveLimitPack(): boolean {\n        return Utils.isNotNull(this._limitPackData);\n    }\n\n    /** 获取特价礼包数据  */\n    getLimitPackData() {\n        return this._limitPackData\n    }\n\n    /** 获取特价礼包数据  */\n    getLimitPackIcon() {\n        return this._limitPackData.firstIcon\n    }\n\n\n    /** 设置首充礼包 */\n    updateFirstPayPackage(body) {\n        body = Utils.table_verify(body)\n        if (!Utils.table_isEmpty(body)) {\n            if (Utils.isNull(body[\"giftpack\"]) || Utils.isNull(body[\"gid\"]) || Utils.isNull(body[\"price\"])) {\n                return false\n            }\n            body[\"gid\"] = Utils.number_valueOf(body[\"gid\"])\n            body[\"price\"] = Utils.number_valueOf(body[\"price\"])\n            //保存的key\n            let keyArray = [\n                \"gid\",\n                \"price\",\n                \"goodsBaseMap\",\n                \"firstIcon\",\n                \"giftpack\",\n                \"button\",\n                \"popNum\",\n                \"original_price\",\n            ];\n            this._firstPayData = this.mergeArray(keyArray, body)\n        } else {\n            this._firstPayData = {};\n        }\n        this.__User.RedDot.update_gift_firstpay(this._firstPayData);\n    }\n\n    /** 获取首充礼包 */\n    getFirstPayPackage() {\n        return this._firstPayData;\n    }\n}\n\n"]}
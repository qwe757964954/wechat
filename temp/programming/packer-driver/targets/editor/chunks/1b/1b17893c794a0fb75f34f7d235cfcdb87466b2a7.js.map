{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/framework/vc/PkgLoadComponent.ts"],"names":["Label","Node","ProgressBar","Vec3","_decorator","GCache","AppEvent","AppSound","GConstants","EventManager","BaseComponent","ccclass","property","PkgLoadComponent","tooltip","type","_initAniPosNormal","_initAniPosGame","_allWidthNormal","_allWidthGame","_chooseType","_isCanClickCancle","_isLoad","_currowLoadTask","_isInitPos","onInitModuleEvent","addModelListener","SYS_PACKAGE_LOAD_SHOW","updateLoading","SYS_PACKAGE_LOAD_TASK_CANCLE_SURE","onCallbackCancle","onLoad","node","active","initUI","initSetPos","normalProgressAniNode","position","x","y","z","normalAniEndNode","gameProgressAniNode","gameAniEndNode","setTaskID","taskID","gameParentNode","children","forEach","child","index","name","normalParentNode","checkIsReconn","PkgLoaderTaskList","Game","start","initLoading","gameProgressNode","progress","normalProgressNode","dispatch","SYS_CLOSE_NETLOADING","nodeBtnCancle","getChildByName","SelectGame","intoGameData","getIntoRoomData","isReconn","event","gameTipProgress","string","Math","floor","onClickCancle","console","log","SYS_PLAY_EFFECT","CommClick","SYS_PACKAGE_LOAD_TASK_CANCLE","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AAChCC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;kCAGaS,gB,WADZF,OAAO,CAAC,kBAAD,C,UAINC,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,SAAX;AAAsBC,QAAAA,IAAI,EAAEd;AAA5B,OAAD,C,UAIRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,SAAX;AAAsBC,QAAAA,IAAI,EAAEd;AAA5B,OAAD,C,UAKRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,OAAX;AAAoBC,QAAAA,IAAI,EAAEb;AAA1B,OAAD,C,UAIRU,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,UAAX;AAAuBC,QAAAA,IAAI,EAAEd;AAA7B,OAAD,C,UAIRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,SAAX;AAAsBC,QAAAA,IAAI,EAAEd;AAA5B,OAAD,C,UAGRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,WAAX;AAAwBC,QAAAA,IAAI,EAAEd;AAA9B,OAAD,C,UAIRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,WAAX;AAAwBC,QAAAA,IAAI,EAAEf;AAA9B,OAAD,C,UAKRY,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,OAAX;AAAoBC,QAAAA,IAAI,EAAEb;AAA1B,OAAD,C,WAIRU,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,UAAX;AAAuBC,QAAAA,IAAI,EAAEd;AAA7B,OAAD,C,WAIRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,SAAX;AAAsBC,QAAAA,IAAI,EAAEd;AAA5B,OAAD,C,WAGRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,WAAX;AAAwBC,QAAAA,IAAI,EAAEd;AAA9B,OAAD,C,WAIRW,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,QAAX;AAAqBC,QAAAA,IAAI,EAAEf;AAA3B,OAAD,C,WAIRY,QAAQ,CAAC;AAAEE,QAAAA,OAAO,EAAE,aAAX;AAA0BC,QAAAA,IAAI,EAAEf;AAAhC,OAAD,C,2BApDV,MACaa,gBADb;AAAA;AAAA,0CACoD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAuD3CG,iBAvD2C,GAuDjB,IAvDiB;AAAA,eAwD3CC,eAxD2C,GAwDnB,IAxDmB;AAAA,eA0D3CC,eA1D2C,GA0DjB,CA1DiB;AAAA,eA2D3CC,aA3D2C,GA2DnB,CA3DmB;AAAA,eA6D3CC,WA7D2C,GA6DC,IA7DD;AAAA,eAgE3CC,iBAhE2C,GAgEd,KAhEc;AAAA,eAkE3CC,OAlE2C,GAkExB,KAlEwB;AAAA,eAoE3CC,eApE2C,GAoEzB,IApEyB;AAAA,eAsE3CC,UAtE2C,GAsE9B,KAtE8B;AAAA;;AAwEzCC,QAAAA,iBAAiB,GAAG;AAC7B;AACA,eAAKC,gBAAL,CAAsB;AAAA;AAAA,oCAASC,qBAA/B,EAAsD,KAAKC,aAA3D;AACA;;AACA,eAAKF,gBAAL,CAAsB;AAAA;AAAA,oCAASG,iCAA/B,EAAkE,KAAKC,gBAAvE;AACA;;AAEDC,QAAAA,MAAM,GAAG;AACR,eAAKT,OAAL,IAAgB,IAAhB;AACA,eAAKU,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AAEA,eAAKC,MAAL,CAAY,KAAKd,WAAjB;AACA;;AACD;AACAe,QAAAA,UAAU,GAAG;AACZ,cAAI,KAAKX,UAAL,IAAmB,IAAvB,EAA6B;AAC5B;AACA;;AACD,eAAKR,iBAAL,GAAyB,IAAIb,IAAJ,CAAS,KAAKiC,qBAAL,CAA2BC,QAA3B,CAAoCC,CAA7C,EAAgD,KAAKF,qBAAL,CAA2BC,QAA3B,CAAoCE,CAApF,EAAuF,KAAKH,qBAAL,CAA2BC,QAA3B,CAAoCG,CAA3H,CAAzB;AACA,eAAKtB,eAAL,GAAwB,KAAKuB,gBAAL,CAAsBJ,QAAtB,CAA+BC,CAA/B,GAAmC,KAAKF,qBAAL,CAA2BC,QAA3B,CAAoCC,CAA/F;AACA,eAAKrB,eAAL,GAAuB,IAAId,IAAJ,CAAS,KAAKuC,mBAAL,CAAyBL,QAAzB,CAAkCC,CAA3C,EAA8C,KAAKI,mBAAL,CAAyBL,QAAzB,CAAkCE,CAAhF,EAAmF,KAAKG,mBAAL,CAAyBL,QAAzB,CAAkCG,CAArH,CAAvB;AACA,eAAKrB,aAAL,GAAsB,KAAKwB,cAAL,CAAoBN,QAApB,CAA6BC,CAA7B,GAAiC,KAAKI,mBAAL,CAAyBL,QAAzB,CAAkCC,CAAzF;AAEA,eAAKd,UAAL,GAAkB,IAAlB;AACA;AAED;;;AACOoB,QAAAA,SAAS,CAACC,MAAD,EAAuC;AACtD,eAAKzB,WAAL,GAAmByB,MAAnB;;AACA,cAAI,KAAKvB,OAAT,EAAkB;AACjB,iBAAKY,MAAL,CAAYW,MAAZ;AACA;AACD;AACD;;;AACAX,QAAAA,MAAM,CAACW,MAAM,GAAG,IAAV,EAAgB;AACrB,eAAKC,cAAL,CAAoBC,QAApB,CAA6BC,OAA7B,CAAqC,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACtD,gBAAID,KAAK,CAACE,IAAN,IAAc,WAAlB,EAA+B;AAC9BF,cAAAA,KAAK,CAAChB,MAAN,GAAe,IAAf;AACA,aAFD,MAEO;AACNgB,cAAAA,KAAK,CAAChB,MAAN,GAAe,KAAf;AACA;AACD,WAND;AAOA,eAAKmB,gBAAL,CAAsBL,QAAtB,CAA+BC,OAA/B,CAAuC,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACxDD,YAAAA,KAAK,CAAChB,MAAN,GAAe,IAAf;AACA,WAFD;;AAGA,cAAIY,MAAM,IAAI,IAAd,EAAoB;AACnB,iBAAKQ,aAAL,CAAmBR,MAAnB;AACA,iBAAKC,cAAL,CAAoBb,MAApB,GAA8BY,MAAM,IAAI;AAAA;AAAA,0CAAWS,iBAAX,CAA6BC,IAArE;AACA,iBAAKH,gBAAL,CAAsBnB,MAAtB,GAAgCY,MAAM,IAAI;AAAA;AAAA,0CAAWS,iBAAX,CAA6BC,IAAvE;AACA,WAJD,MAIO;AACN,iBAAKT,cAAL,CAAoBb,MAApB,GAA6B,KAA7B;AACA,iBAAKmB,gBAAL,CAAsBnB,MAAtB,GAA+B,KAA/B;AACA;AACD;;AACDuB,QAAAA,KAAK,GAAG,CAEP;;AAED;AACAC,QAAAA,WAAW,CAACZ,MAAD,EAAS;AACnB,eAAKV,UAAL;AACA,eAAKZ,eAAL,GAAuBsB,MAAvB;;AACA,cAAIA,MAAM,IAAI;AAAA;AAAA,wCAAWS,iBAAX,CAA6BC,IAA3C,EAAiD;AAChD,iBAAKF,aAAL,CAAmBR,MAAnB;AACA,iBAAKa,gBAAL,CAAsBC,QAAtB,GAAiC,CAAjC;AACA,iBAAKjB,mBAAL,CAAyBL,QAAzB,GAAoC,IAAIlC,IAAJ,CAAS,KAAKc,eAAL,CAAqBqB,CAA9B,EAAiC,KAAKrB,eAAL,CAAqBsB,CAAtD,EAAyD,KAAKtB,eAAL,CAAqBuB,CAA9E,CAApC;AACA,WAJD,MAIO;AACN,iBAAKoB,kBAAL,CAAwBD,QAAxB,GAAmC,CAAnC;AACA,iBAAKvB,qBAAL,CAA2BC,QAA3B,GAAsC,IAAIlC,IAAJ,CAAS,KAAKa,iBAAL,CAAuBsB,CAAhC,EAAmC,KAAKtB,iBAAL,CAAuBuB,CAA1D,EAA6D,KAAKvB,iBAAL,CAAuBwB,CAApF,CAAtC;AACA;;AACD,eAAKN,MAAL,CAAYW,MAAZ;AACA,eAAKb,IAAL,CAAUC,MAAV,GAAmB,IAAnB,CAZmB,CAanB;;AACA;AAAA;AAAA,4CAAa4B,QAAb,CAAsB;AAAA;AAAA,oCAASC,oBAA/B;AACA;AACD;;;AACAT,QAAAA,aAAa,CAACR,MAAD,EAAS;AACrB,cAAIA,MAAM,IAAI;AAAA;AAAA,wCAAWS,iBAAX,CAA6BC,IAA3C,EAAiD;AAChD;AACA,WAHoB,CAIrB;;;AACA,cAAIQ,aAAa,GAAG,KAAKjB,cAAL,CAAoBkB,cAApB,CAAmC,WAAnC,CAApB;;AACA,cAAI;AAAA;AAAA,mCAAU;AAAA;AAAA,gCAAOC,UAArB,EAAiC;AAChC,gBAAIC,YAAY,GAAG;AAAA;AAAA,kCAAOD,UAAP,CAAkBE,eAAlB,EAAnB;;AACA,gBAAID,YAAY,IAAIA,YAAY,CAACE,QAAb,IAAyB,IAA7C,EAAmD;AAClDL,cAAAA,aAAa,CAAC9B,MAAd,GAAuB,KAAvB;AACA,aAFD,MAEO;AACN8B,cAAAA,aAAa,CAAC9B,MAAd,GAAuB,IAAvB;AACA;AACD,WAPD,MAOO;AACN8B,YAAAA,aAAa,CAAC9B,MAAd,GAAuB,IAAvB;AACA;AACD;AACD;;;AACAL,QAAAA,aAAa,CAACyC,KAAD,EAAQV,QAAR,EAAkBd,MAAlB,EAA0B;AACtC;AACA,cAAI,KAAKtB,eAAL,IAAwB,IAA5B,EAAkC;AACjC,iBAAKkC,WAAL,CAAiBZ,MAAjB;AACA,iBAAKxB,iBAAL,GAAyB,IAAzB;AACA;;AACD,cAAIsC,QAAQ,IAAI,CAAhB,EAAmB;AAClBA,YAAAA,QAAQ,GAAG,CAAX;AACA,WAFD,MAEO,IAAIA,QAAQ,IAAI,GAAhB,EAAqB;AAC3BA,YAAAA,QAAQ,GAAG,GAAX;AACA,iBAAKtC,iBAAL,GAAyB,KAAzB;AACA,iBAAKE,eAAL,GAAuB,IAAvB;AACA;;AACD,cAAIsB,MAAM,IAAI;AAAA;AAAA,wCAAWS,iBAAX,CAA6BC,IAA3C,EAAiD;AAChD,gBAAIjB,CAAC,GAAG,KAAKnB,aAAL,GAAqBwC,QAArB,GAAgC,GAAxC;AACA,iBAAKD,gBAAL,CAAsBC,QAAtB,GAAkCA,QAAQ,GAAG,GAA7C;AACA,iBAAKjB,mBAAL,CAAyBL,QAAzB,GAAoC,IAAIlC,IAAJ,CAAS,KAAKc,eAAL,CAAqBqB,CAArB,GAAyBA,CAAlC,EAAqC,KAAKrB,eAAL,CAAqBsB,CAA1D,EAA6D,KAAKtB,eAAL,CAAqBqB,CAAlF,CAApC;AAEA,iBAAKgC,eAAL,CAAqBC,MAArB,GAA+B,IAAGC,IAAI,CAACC,KAAL,CAAWd,QAAX,CAAqB,OAAvD;AACA,WAND,MAMO;AACN,gBAAIrB,CAAC,GAAG,KAAKpB,eAAL,GAAuByC,QAAvB,GAAkC,GAA1C;AACA,iBAAKC,kBAAL,CAAwBD,QAAxB,GAAoCA,QAAQ,GAAG,GAA/C;AACA,iBAAKvB,qBAAL,CAA2BC,QAA3B,GAAsC,IAAIlC,IAAJ,CAAS,KAAKa,iBAAL,CAAuBsB,CAAvB,GAA2BA,CAApC,EAAuC,KAAKtB,iBAAL,CAAuBuB,CAA9D,EAAiE,KAAKvB,iBAAL,CAAuBsB,CAAxF,CAAtC;AACA;AACD;AACD;;;AACAoC,QAAAA,aAAa,CAACL,KAAD,EAAQ;AACpB,cAAI,KAAKhD,iBAAL,IAA0B,KAA9B,EAAqC;AACpC;AACA;;AACDsD,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA;AAAA;AAAA,4CAAaf,QAAb,CAAsB;AAAA;AAAA,oCAASgB,eAA/B,EAAgD;AAAA;AAAA,oCAASC,SAAzD;AACA;AAAA;AAAA,4CAAajB,QAAb,CAAsB;AAAA;AAAA,oCAASkB,4BAA/B,EAA6D,KAAKxD,eAAlE;AACA;AACD;;;AACAO,QAAAA,gBAAgB,CAACuC,KAAD,EAAQxB,MAAR,EAAgB;AAC/B,eAAKxB,iBAAL,GAAyB,KAAzB;AACA,eAAKE,eAAL,GAAuB,IAAvB;AACA,eAAKS,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA,SA7MkD,CA8MnD;;;AACA+C,QAAAA,SAAS,GAAG,CAEX;;AAjNkD,O;;;;;iBAI1B,I;;;;;;;iBAIF,I;;;;;;;iBAKW,I;;;;;;;iBAIJ,I;;;;;;;iBAIA,I;;;;;;;iBAGL,I;;;;;;;iBAID,I;;;;;;;iBAKQ,I;;;;;;;iBAIJ,I;;;;;;;iBAIA,I;;;;;;;iBAGL,I;;;;;;;iBAID,I;;;;;;;iBAIG,I","sourcesContent":["\nimport { Label, Node, ProgressBar, Vec3, _decorator } from 'cc';\nimport { GCache } from '../../cache/GCache';\nimport { AppEvent } from '../../config/AppEvent';\nimport { AppSound } from '../../config/AppSound';\nimport { GConstants } from '../../config/GameConstant';\nimport { EventManager } from '../manager/EventManager';\nimport { BaseComponent } from './BaseComponent';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = PkgLoadComponent\n * URL = db://assets/framework/vc/PkgLoadComponent.ts\n * Time = Thu Feb 02 2023 17:50:10 GMT+0800 (中国标准时间)\n * Author = xueya\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('PkgLoadComponent')\nexport class PkgLoadComponent extends BaseComponent {\n\n\t//一类加载父节点\n\t@property({ tooltip: \"一类加载父节点\", type: Node })\n\tnormalParentNode: Node = null!;\n\n\t//二类加载父节点\n\t@property({ tooltip: \"二类加载父节点\", type: Node })\n\tgameParentNode: Node = null!;\n\n\t/**********一类加载************ */\n\t//进度条组件\n\t@property({ tooltip: \"进度条组件\", type: ProgressBar })\n\tnormalProgressNode: ProgressBar = null!;\n\n\t//进度条Bar节点\n\t@property({ tooltip: \"进度条Bar节点\", type: Node })\n\tnormalProgressBarNode: Node = null!;\n\n\t//进度条动画节点\n\t@property({ tooltip: \"进度条动画节点\", type: Node })\n\tnormalProgressAniNode: Node = null!;\n\n\t@property({ tooltip: \"进度条动画结束节点\", type: Node })\n\tnormalAniEndNode: Node = null!;\n\n\t//提示文本节点\n\t@property({ tooltip: \"提示文本Label\", type: Label })\n\tnormalTipLabel: Label = null!;\n\n\t/**********二类加载************ */\n\t//进度条组件\n\t@property({ tooltip: \"进度条组件\", type: ProgressBar })\n\tgameProgressNode: ProgressBar = null!;\n\n\t//进度条Bar节点\n\t@property({ tooltip: \"进度条Bar节点\", type: Node })\n\tgameProgressBarNode: Node = null!;\n\n\t//进度条动画节点\n\t@property({ tooltip: \"进度条动画节点\", type: Node })\n\tgameProgressAniNode: Node = null!;\n\n\t@property({ tooltip: \"进度条动画结束节点\", type: Node })\n\tgameAniEndNode: Node = null!;\n\n\t//提示文本节点\n\t@property({ tooltip: \"提示文本节点\", type: Label })\n\tgameTipLabel: Label = null!;\n\n\t//提示进度文本Label\n\t@property({ tooltip: \"提示进度文本Label\", type: Label })\n\tgameTipProgress: Label = null!;\n\n\t/** 动画节点初始位置 */\n\tprivate _initAniPosNormal: Vec3 = null;\n\tprivate _initAniPosGame: Vec3 = null;\n\t/** 总长度 */\n\tprivate _allWidthNormal: number = 0;\n\tprivate _allWidthGame: number = 0;\n\t/** 当前的选择 */\n\tprivate _chooseType: GConstants.PkgLoaderTaskList = null;\n\n\t/** 是否可点击取消 */\n\tprivate _isCanClickCancle: boolean = false;\n\t/** 是否已加载完毕 */\n\tprivate _isLoad: boolean = false;\n\t/** 当前正在加载的task */\n\tprivate _currowLoadTask = null;\n\t/** 位置是否初始化 */\n\tprivate _isInitPos = false;\n\n\tprotected onInitModuleEvent() {\n\t\t/** 更新加载的回调 */\n\t\tthis.addModelListener(AppEvent.SYS_PACKAGE_LOAD_SHOW, this.updateLoading);\n\t\t/** 取消任务的回调 */\n\t\tthis.addModelListener(AppEvent.SYS_PACKAGE_LOAD_TASK_CANCLE_SURE, this.onCallbackCancle);\n\t}\n\n\tonLoad() {\n\t\tthis._isLoad == true;\n\t\tthis.node.active = false;\n\n\t\tthis.initUI(this._chooseType);\n\t};\n\t//初始化设置位置\n\tinitSetPos() {\n\t\tif (this._isInitPos == true) {\n\t\t\treturn;\n\t\t}\n\t\tthis._initAniPosNormal = new Vec3(this.normalProgressAniNode.position.x, this.normalProgressAniNode.position.y, this.normalProgressAniNode.position.z)\n\t\tthis._allWidthNormal = (this.normalAniEndNode.position.x - this.normalProgressAniNode.position.x);\n\t\tthis._initAniPosGame = new Vec3(this.gameProgressAniNode.position.x, this.gameProgressAniNode.position.y, this.gameProgressAniNode.position.z)\n\t\tthis._allWidthGame = (this.gameAniEndNode.position.x - this.gameProgressAniNode.position.x);\n\n\t\tthis._isInitPos = true;\n\t}\n\n\t/** 外部传递参数 */\n\tpublic setTaskID(taskID: GConstants.PkgLoaderTaskList) {\n\t\tthis._chooseType = taskID;\n\t\tif (this._isLoad) {\n\t\t\tthis.initUI(taskID);\n\t\t}\n\t}\n\t/** 初始化UI */\n\tinitUI(taskID = null) {\n\t\tthis.gameParentNode.children.forEach((child, index) => {\n\t\t\tif (child.name != \"btnCancle\") {\n\t\t\t\tchild.active = true;\n\t\t\t} else {\n\t\t\t\tchild.active = false;\n\t\t\t}\n\t\t});\n\t\tthis.normalParentNode.children.forEach((child, index) => {\n\t\t\tchild.active = true;\n\t\t});\n\t\tif (taskID != null) {\n\t\t\tthis.checkIsReconn(taskID);\n\t\t\tthis.gameParentNode.active = (taskID == GConstants.PkgLoaderTaskList.Game);\n\t\t\tthis.normalParentNode.active = (taskID != GConstants.PkgLoaderTaskList.Game);\n\t\t} else {\n\t\t\tthis.gameParentNode.active = false;\n\t\t\tthis.normalParentNode.active = false;\n\t\t}\n\t}\n\tstart() {\n\n\t};\n\n\t//初始化加载\n\tinitLoading(taskID) {\n\t\tthis.initSetPos();\n\t\tthis._currowLoadTask = taskID;\n\t\tif (taskID == GConstants.PkgLoaderTaskList.Game) {\n\t\t\tthis.checkIsReconn(taskID);\n\t\t\tthis.gameProgressNode.progress = 0;\n\t\t\tthis.gameProgressAniNode.position = new Vec3(this._initAniPosGame.x, this._initAniPosGame.y, this._initAniPosGame.z);\n\t\t} else {\n\t\t\tthis.normalProgressNode.progress = 0;\n\t\t\tthis.normalProgressAniNode.position = new Vec3(this._initAniPosNormal.x, this._initAniPosNormal.y, this._initAniPosNormal.z);\n\t\t}\n\t\tthis.initUI(taskID)\n\t\tthis.node.active = true;\n\t\t//关闭正在加载中\n\t\tEventManager.dispatch(AppEvent.SYS_CLOSE_NETLOADING);\n\t}\n\t/** 检测重连游戏去除关闭按钮显示 */\n\tcheckIsReconn(taskID) {\n\t\tif (taskID != GConstants.PkgLoaderTaskList.Game) {\n\t\t\treturn;\n\t\t}\n\t\t//重连游戏不可关闭界面\n\t\tlet nodeBtnCancle = this.gameParentNode.getChildByName(\"btnCancle\");\n\t\tif (GCache && GCache.SelectGame) {\n\t\t\tlet intoGameData = GCache.SelectGame.getIntoRoomData();\n\t\t\tif (intoGameData && intoGameData.isReconn == true) {\n\t\t\t\tnodeBtnCancle.active = false;\n\t\t\t} else {\n\t\t\t\tnodeBtnCancle.active = true;\n\t\t\t}\n\t\t} else {\n\t\t\tnodeBtnCancle.active = true;\n\t\t}\n\t}\n\t/** 更新加载进度 progress:0~100 */\n\tupdateLoading(event, progress, taskID) {\n\t\t// console.log(\"更新加载进度====>\", progress, taskID)\n\t\tif (this._currowLoadTask == null) {\n\t\t\tthis.initLoading(taskID);\n\t\t\tthis._isCanClickCancle = true;\n\t\t}\n\t\tif (progress <= 0) {\n\t\t\tprogress = 0;\n\t\t} else if (progress >= 100) {\n\t\t\tprogress = 100;\n\t\t\tthis._isCanClickCancle = false;\n\t\t\tthis._currowLoadTask = null;\n\t\t}\n\t\tif (taskID == GConstants.PkgLoaderTaskList.Game) {\n\t\t\tlet x = this._allWidthGame * progress / 100;\n\t\t\tthis.gameProgressNode.progress = (progress / 100);\n\t\t\tthis.gameProgressAniNode.position = new Vec3(this._initAniPosGame.x + x, this._initAniPosGame.y, this._initAniPosGame.x)\n\n\t\t\tthis.gameTipProgress.string = `(${Math.floor(progress)}/100)`;\n\t\t} else {\n\t\t\tlet x = this._allWidthNormal * progress / 100;\n\t\t\tthis.normalProgressNode.progress = (progress / 100);\n\t\t\tthis.normalProgressAniNode.position = new Vec3(this._initAniPosNormal.x + x, this._initAniPosNormal.y, this._initAniPosNormal.x)\n\t\t}\n\t}\n\t/** 点击了取消 */\n\tonClickCancle(event) {\n\t\tif (this._isCanClickCancle == false) {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(\"点击了取消=====>\")\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\tEventManager.dispatch(AppEvent.SYS_PACKAGE_LOAD_TASK_CANCLE, this._currowLoadTask);\n\t}\n\t/** 取消加载任务的回调 */\n\tonCallbackCancle(event, taskID) {\n\t\tthis._isCanClickCancle = false;\n\t\tthis._currowLoadTask = null;\n\t\tthis.node.active = false;\n\t}\n\t//销毁\n\tonDestroy() {\n\n\t};\n\n}\n\n"]}
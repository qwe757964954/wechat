{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/cache/Room.ts"],"names":["Room","SettleMgr","Desk","EventManager","FXJEvent","FXJUIID","GameEvent","BankerMgr","OperationMgr","OperationResultMgr","PlayerMgr","RoomMgr","constructor","turnMe","isReconnect","bankerMgr","getInstance","enterRoomUpdate","resp","updateRoomInfo","setPlayerList","playerList","getMyPlayerInfo","reconnectionRoomUpdate","players","operation","userOperation","dispatch","VIEW_USER_OPERATION","settleItems","forEach","item","updateSettleResult","GAME_OPEN_POPUP","GameSettlePrefab","dealCardUpdate","updatePlayerCardsNum","cardsCount","updateMyhands","cards","updateRemainCardsCount","remainCardsCount","gameGrabCard","remainCardNum","updateOutCards","updateFanGangCards","remainCardCount","fangangCards","gangCount","updateSelectFanGangCards","selectFanGangCards","card","bankerFirstOperation","bankSeatId","updateMyselfOpration","userOperationResult","updateSelectInfo","gameOverResult","isReady"],"mappings":"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","sourcesContent":["import { SettleMgr } from './SettleMgr';\n/**\n * Name = Room\n * URL = db://assets/package/game/cache/Room.ts\n * Time = Mon Jul 24 2023 19:18:24 GMT+0800 (中国标准时间)\n * Author = xueya\n * 游戏房间缓存\n */\n\nimport { Desk } from \"../../../cache/Desk\";\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { FXJEvent } from '../common/FXJEvent';\nimport { FXJUIID } from '../common/FXJRes';\nimport { GameEvent } from '../common/GameEvent';\nimport { Game } from \"../common/idl/Game\";\nimport { BankerMgr } from \"./BankerMgr\";\nimport { OperationMgr } from \"./OperationMgr\";\nimport { OperationResultMgr } from \"./OperationResultMgr\";\nimport { PlayerMgr } from \"./PlayerMgr\";\nimport { RoomMgr } from \"./RoomMgr\";\nexport class Room extends Desk {\n\tprivate turnMe:boolean = false;\n\tprivate isReconnect:boolean = false;\n\t//实例化\n\tconstructor() {\n\t\tsuper(\"Room\")\n\t};\n\t// fixLaizi: IFixLaizi;\n\t// RoomMgr.getInstance()\n\tbankerMgr?:BankerMgr = BankerMgr.getInstance();\n\tpublic enterRoomUpdate(resp:Game.IUserLoginRoom) :void{\n\t\tRoomMgr.getInstance().updateRoomInfo(resp);\n\t\tPlayerMgr.getInstance().setPlayerList(resp?.playerList);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo();\n\t}\n\t\n\tpublic reconnectionRoomUpdate(resp:Game.IUserReconnect) :void{\n\t\tRoomMgr.getInstance().updateRoomInfo(resp);\n\t\tPlayerMgr.getInstance().setPlayerList(resp?.players);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo();\n\t\tthis.isReconnect = true;\n\t\tif(resp.operation){\n\t\t\tthis.userOperation(resp.operation);\n\t\t\tEventManager.dispatch(GameEvent.VIEW_USER_OPERATION,resp.operation);\n\t\t}\n\t\tif(resp.settleItems){\n\t\t\tresp.settleItems.forEach((item:Game.ISettleItem) => {\n\t\t\t\tthis.updateSettleResult(item);\n\t\t\t\tEventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameSettlePrefab);\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\n\tpublic dealCardUpdate(resp:Game.IDealCard) :void{\n\t\tPlayerMgr.getInstance().updatePlayerCardsNum(resp.cardsCount);\n\t\tPlayerMgr.getInstance().updateMyhands(resp.cards);\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardsCount);\n\t}\n\n\tpublic gameGrabCard(resp:Game.IGrabCard) :void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardNum);\n\t\tPlayerMgr.getInstance().updateOutCards(resp);\n\t}\n\n\tpublic updateFanGangCards(resp:Game.IUpdateFanGangPai) : void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardCount);\n\t\tRoomMgr.getInstance().fangangCards = resp.cards;\n\t\tPlayerMgr.getInstance().gangCount = resp.gangCount;\n\t}\n\n\tpublic updateSelectFanGangCards(resp:Game.ISelectFanGangPai) : void {\n\t\tRoomMgr.getInstance().selectFanGangCards = resp.card;\n\t}\n\t\n\tpublic bankerFirstOperation(resp:Game.IFixBanker) : void {\n\t\tRoomMgr.getInstance().updateRemainCardsCount(resp.remainCardNum);\n\t\tRoomMgr.getInstance().bankSeatId = resp.bankSeatId;\n\t}\n\t\n\tpublic userOperation(resp:Game.IOperation) : void {\n\t\tOperationMgr.getInstance().updateMyselfOpration(resp);\n\t\tthis.turnMe = true;\n\t}\n\t\n\tpublic userOperationResult(resp:Game.IOperationResult) : void {\n\t\tOperationResultMgr.getInstance().userOperationResult(resp);\n    }\n\t\n\tpublic updateSettleResult(resp:Game.ISettleItem) : void {\n\t\tSettleMgr.getInstance().updateSelectInfo(resp);\n\t}\n\n\tpublic gameOverResult() : void {\n\t\t// SettleMgr.getInstance().updateSelectInfo(resp);\n\t\tPlayerMgr.getInstance().getMyPlayerInfo().isReady = 0;\n\t}\n}"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/scripts/GameHeadInfoPrefabCtr.ts"],"names":["Label","Node","Sprite","SpriteAtlas","SpriteFrame","_decorator","instantiate","GCache","AppEvent","Utils","Encrypt","SpriteLoad","DelegateComponent","resLoader","EventManager","BaseComponent","Platform","PlayerMgr","FXJConstant","FXJEvent","FXJRes","FXJSound","GameEvent","ccclass","property","menu","GameHeadInfoPrefabCtr","tooltip","type","_uid","_posID","_player","onInitModuleEvent","addModelListener","USER_UPDATE_INFO","updateUserInfo","USER_UPDATE_PROPERTY","updateCoin","VIEW_BROADCAST_PLAYER_EXIT","receiveUserExitRoom","onLoad","getComp","checkBaseData","initView","updateListProps","start","updateUserPlayer","getInstance","findPlayerWithUserId","seatId","cloneProp","active","propList","comp","node","getComponent","param","getParams","isNull","uid","event","updateHead","gameUserInfo","sex","number_valueOf","console","log","sexNode","spriteLoad","headNode","spriteFrame","womanPic","setLocalLoad","Picture_UserBigHead_girl","bundle","path","manPic","Picture_UserBigHead_boy","headPic","avatar_b","length","setRemoteUrl","nameLabel","string","nickName","playIdLabel","userId","money","moneyLabel","string_matchStr","dataList","EmojiProp","maxLen","children","i","info","itemNode","addChild","img_item","getChildByName","load","Atlas_Game_EmojiProp","err","atlas","isValid","getSpriteFrame","icon","spriteComponent","sizeMode","node_price","money_icon","label_name","name","destroy","onClickClose","dispatch","SYS_PLAY_EFFECT","CommClick","onClickProp","currentTarget","propsId","propID","fromId","User","getUserMid","obj","from","to","text","JsonEncode","GAME_REQ_EMOJI_PROPS_MSG","hdInfo","prop_id","to_uid","VIEW_DESK_ANI_PLAY","AnimNormal","HudongProp","posID","onClickCopy","e","String","copyClipboard","onDestroy"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Label, Node, Sprite, SpriteAtlas, SpriteFrame, _decorator, instantiate } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { Utils } from '../../../framework/Utils';\nimport { Encrypt } from '../../../framework/crypto/Encrypto';\nimport SpriteLoad from '../../../framework/gui/sprite/SpriteLoad';\nimport { DelegateComponent } from '../../../framework/layer/DelegateComponent';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { Platform } from '../../../platform/Platform';\nimport { PlayerMgr } from '../cache/PlayerMgr';\nimport { FXJConstant } from '../common/FXJConstant';\nimport { FXJEvent } from '../common/FXJEvent';\nimport { FXJRes } from '../common/FXJRes';\nimport { FXJSound } from '../common/FXJSound';\nimport { GameEvent } from '../common/GameEvent';\nconst { ccclass, property, menu } = _decorator;\n\n\n/**\n * Name = GameHeadInfoPrefabCtr\n * URL = db://assets/package/game/scripts/GameHeadInfoPrefabCtr.ts\n * Time = Fri Sep 09 2022 11:45:37 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('GameHeadInfoPrefabCtr')\n//方便编辑器识别的菜单项目\n@menu('prefab/game/GameHeadInfoPrefabCtr')\nexport class GameHeadInfoPrefabCtr extends BaseComponent {\n\n\t//头像节点\n\t@property({ tooltip: \"头像节点\", type: Node })\n\tprivate headNode: Node | null = null;\n\n\t//头像框节点\n\t@property({ tooltip: \"头像框节点\", type: Node })\n\tprivate headFrameNode: Node | null = null;\n\n\t//性别节点\n\t@property({ tooltip: \"性别\", type: Node })\n\tprivate sexNode: Node | null = null;\n\n\t//昵称\n\t@property({ tooltip: \"昵称\", type: Label })\n\tprivate nameLabel: Label | null = null;\n\n\t//用户ID\n\t@property({ tooltip: \"用户ID\", type: Label })\n\tprivate playIdLabel: Label | null = null;\n\n\n\t//钱币类型\n\t@property({ tooltip: \"钱币类型\", type: Sprite })\n\tprivate moneyCoin: Sprite | null = null;\n\n\t//钱币数量\n\t@property({ tooltip: \"钱币数量\", type: Label })\n\tprivate moneyLabel: Label | null = null;\n\n\t//道具父节点\n\t@property({ tooltip: \"道具父节点\", type: Node })\n\tprivate propList: Node | null = null;\n\n\t//克隆道具\n\t@property({ tooltip: \"克隆道具\", type: Node })\n\tprivate cloneProp: Node | null = null;\n\n\t//性别男\n\t@property({ tooltip: \"性别男\", type: SpriteFrame })\n\tprivate manPic: SpriteFrame | null = null;\n\n\t//性别女\n\t@property({ tooltip: \"性别女\", type: SpriteFrame })\n\tprivate womanPic: SpriteFrame | null = null;\n\n\t//玩家id\n\tprivate _uid: number;\n\t//玩家座位号\n\tprivate _posID: number;\n\n\t//玩家缓存\n\tprivate _player = null;\n\n\t/**初始化添加事件绑定 */\n\tprotected onInitModuleEvent(): void {\n\t\t//玩家基本信息有更新\n\t\tthis.addModelListener(AppEvent.USER_UPDATE_INFO, this.updateUserInfo);\n\t\t//玩家资产有更新\n\t\tthis.addModelListener(AppEvent.USER_UPDATE_PROPERTY, this.updateCoin);\n\t\t//玩家退出\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_PLAYER_EXIT, this.receiveUserExitRoom);\n\t}\n\n\n\tonLoad() {\n\t\tthis.getComp();\n\t\tthis.checkBaseData();\n\t\tthis.initView();\n\t\tthis.updateUserInfo();\n\t\tthis.updateListProps();\n\t};\n\n\tstart() {\n\n\t};\n\t/** 更新玩家数据 */\n\tupdateUserPlayer() {\n\t\tthis._player = PlayerMgr.getInstance().findPlayerWithUserId(this._uid)\n\t\tif (this._player) {\n\t\t\tthis._posID = this._player.seatId;\n\t\t} else {\n\t\t\tthis._posID = null;\n\t\t}\n\t}\n\tinitView() {\n\t\tthis.cloneProp.active = false;\n\t\tthis.propList.active = true;\n\t}\n\tgetComp() {\n\t\tlet comp = this.node.getComponent(DelegateComponent)\n\t\tif (comp) {\n\t\t\tlet param = comp.getParams();\n\t\t\tif (Utils.isNull(param) == false) {\n\t\t\t\tthis._uid = param.uid;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t * 检验用户基础信息\n\t * @returns \n\t */\n\tcheckBaseData() {\n\t\tif (!this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUserPlayer();\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t}\n\t/** 更新玩家信息 */\n\tupdateUserInfo(event = null, uid = null) {\n\t\tif (event != null && uid != this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUserPlayer();\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateHead();\n\t\tthis.updateCoin();\n\t}\n\n\n\t/**\n\t * 更新玩家界面信息\n\t * @returns \n\t */\n\tupdateHead() {\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t\tlet gameUserInfo = this._player.gameUserInfo;\n\t\tlet sex = Utils.number_valueOf(gameUserInfo.sex);\n\t\tsex = sex > 0 ? sex : 1;\n\t\tconsole.log(\"update123\",gameUserInfo,sex)\n\t\tthis.sexNode.active = true;\n\t\tlet spriteLoad = this.headNode.getComponent(SpriteLoad);\n\t\tif (sex==2) {//女\n\t\t\tthis.sexNode.getComponent(Sprite).spriteFrame = this.womanPic;\n\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_girl.bundle, FXJRes.Picture_UserBigHead_girl.path);\n\t\t} else { //男\n\t\t\tthis.sexNode.getComponent(Sprite).spriteFrame = this.manPic;\n\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_boy.bundle, FXJRes.Picture_UserBigHead_boy.path);\n\t\t}\n\t\tlet headPic = gameUserInfo.avatar_b;\n\t\tconsole.log(\"头像:\", headPic);\n\t\tif (headPic.length > 0) {\n\t\t\tspriteLoad.setRemoteUrl(headPic);\n\t\t}\n\t\t//昵称\n\t\tthis.nameLabel.string = gameUserInfo.nickName;\t\n\t\tthis.playIdLabel.string = this._player.userId;\n\t}\n\n\t/**\n\t * 更新玩家银币\n\t * @param event \n\t * @param uid \n\t * @returns \n\t */\n\tupdateCoin(event = null, uid = null) {\n\t\tif (event != null && uid != this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUserPlayer();\n\t\tif (!this._player) {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(\"update123:\",this._player.money)\n\t\tthis.moneyLabel.string = Utils.string_matchStr(this._player.money);\n\t}\n\n\t\n\tupdateListProps() {\n\t\tlet dataList = FXJConstant.EmojiProp;\n\t\tlet maxLen = this.propList.children.length;\n\t\tif (dataList.length > maxLen) {\n\t\t\tmaxLen = dataList.length;\n\t\t}\n\t\t// {\n\t\t// \tpropID: 100,\n\t\t// \ticon: \"jidan.png\",\n\t\t// \taudio: FXJSound.emojiProp100,\n\t\t// \taniConf: {bundle:\"\", path:\"\"}\n\t\t// },\n\t\tfor (let i = 0; i < maxLen; i++) {\n\t\t\tif (dataList[i]) {\n\t\t\t\tlet info = dataList[i];\n\t\t\t\tlet itemNode = this.propList.children[i];\n\t\t\t\tif (itemNode == null) {\n\t\t\t\t\titemNode = instantiate(this.cloneProp);\n\t\t\t\t\tthis.propList.addChild(itemNode);\n\t\t\t\t}\n\t\t\t\tlet img_item = itemNode.getChildByName(\"img_item\");\n\t\t\t\tresLoader.load(FXJRes.Atlas_Game_EmojiProp.bundle, FXJRes.Atlas_Game_EmojiProp.path, SpriteAtlas, (err: Error | null, atlas) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (!img_item || img_item .isValid == false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet spriteFrame = atlas.getSpriteFrame(info.icon)\n\t\t\t\t\tif (spriteFrame) {\n\t\t\t\t\t\tlet spriteComponent = img_item.getComponent(Sprite);\n\t\t\t\t\t\tspriteComponent.sizeMode = 0;\n\t\t\t\t\t\tspriteComponent.spriteFrame = spriteFrame;\n\t\t\t\t\t\timg_item.active = true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tlet node_price = itemNode.getChildByName(\"node_price\");\n\t\t\t\tlet money_icon = node_price.getChildByName(\"money_icon\");\n\t\t\t\tlet label_name = node_price.getChildByName(\"label_name\"); \n\t\t\t\tnode_price.active = true;\n\t\t\t\tmoney_icon.active = false;\n\t\t\t\tlabel_name.getComponent(Label).string = info.name;\n\t\t\t\titemNode[\"PropData\"] = info;\n\t\t\t\titemNode.active = true;\n\t\t\t} else {\n\t\t\t\tif (this.propList.children[i]) {\n\t\t\t\t\tthis.propList.children[i].destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\n\t/**\n\t * 点击关闭\n\t * @param event \n\t */\n\tonClickClose(event: EventTouch) {\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tthis.node.destroy();\n\t}\n\n\n\t/**\n\t * 点击互动道具\n\t * @param event \n\t * @returns \n\t */\n\tonClickProp(event: EventTouch) {\n\t\tlet node = event.currentTarget;\n\t\tif (node[\"PropData\"] == null) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tlet info = node[\"PropData\"];\n\t\tconsole.log(info)\n\t\tlet propsId = info.propID;\n\t\tlet fromId = GCache.User.getUserMid()\n\t\tfromId=Utils.number_valueOf(fromId)\n\t\tlet obj = {\n\t\t\tfrom:fromId,\n\t\t\tto:this._uid\n\t\t}\n\t\tlet text=Encrypt.JsonEncode(obj)\n\t\tEventManager.dispatch(FXJEvent.GAME_REQ_EMOJI_PROPS_MSG, propsId, text);\n\t\tconsole.log(\"点击发送道具:onClickProp\")\n\t\t//自己页面上展示动画\t\n\t\tlet hdInfo = {\n\t\t\tuid: fromId,\n\t\t\tprop_id: propsId,\n\t\t\tto_uid:this._uid\n\t\t}\n\t\tEventManager.dispatch(FXJEvent.VIEW_DESK_ANI_PLAY, FXJConstant.AnimNormal.HudongProp, hdInfo);\n\t\tthis.node.destroy();\n\n\t}\n\n\t\n\t/**\n\t * 玩家退出房间 关闭界面\n\t * @param event \n\t * @param posID \n\t */\n\treceiveUserExitRoom(event, posID) {\n\t\tif (posID != null && posID == this._posID) {\n\t\t\tthis.node.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * 复制ID\n\t * @param e \n\t */\n\tonClickCopy(e: any) {\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tlet uid=String(this._uid)\n\t\tPlatform.copyClipboard(uid);\n\t}\n\t\n\t//销毁\n\tonDestroy() {\n\n\t};\n\n}\n\n"]}
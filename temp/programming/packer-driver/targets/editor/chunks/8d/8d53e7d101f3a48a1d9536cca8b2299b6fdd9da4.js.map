{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/module/opmgr/src/OprationItem.ts"],"names":["Node","Sprite","_decorator","EventManager","BaseComponent","PlayerMgr","OPCode","FXJEvent","FXJRes","ccclass","property","OprationItem","atlasCodeMap","Map","onInitModuleEvent","onLoad","updateAtlasCodeMap","set","OPE_PENG","OPE_QIANG_PENG","OPE_HU","OPE_RIGHT_CHI","OPE_MIDDLE_CHI","OPE_LEFT_CHI","OPE_ZI_MO","OPE_AN_GANG","OPE_GANG","OPE_BU_GANG","getShowBtn","code","opCode","opstr","updateItemProps","userId","userInfo","getInstance","findPlayerWithUserId","gameUserInfo","sexStr","sex","opStr","node","active","param","resConf","Spine_Hu","aniName","parentNode","opration","trackIndex","isLoop","dispatch","SYS_ANI_PLAY"],"mappings":"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","sourcesContent":["\nimport { Node, Sprite, _decorator } from 'cc';\nimport { inf_SpineAniCreate } from '../../../../../framework/InterfaceDefines';\nimport { EventManager } from '../../../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../../../framework/vc/BaseComponent';\nimport { PlayerMgr } from '../../../cache/PlayerMgr';\nimport { OPCode } from '../../../common/FXJConfig';\nimport { FXJEvent } from '../../../common/FXJEvent';\nimport { FXJRes } from '../../../common/FXJRes';\nimport { Common } from '../../../common/idl/Common';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = OprationItem\n * URL = db://assets/package/game/module/opmgr/src/OprationItem.ts\n * Time = Tue Aug 08 2023 10:37:09 GMT+0800 (中国标准时间)\n * Author = qwe757964\n *\n * Life: onLoad-->onInitModuleEvent-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * \n */\n \n@ccclass('OprationItem')\nexport class OprationItem extends BaseComponent {\n\t@property(Node)\n    public opration: Node | null = null;\n\t@property(Sprite)\n    public player: Sprite | null = null;\n\t//code 对应的图集\n    atlasCodeMap = new Map<number, string>();\n\t/** override 初始化模块事件 */\n\tprotected onInitModuleEvent() {\n\n\t};\n\t\n\tonLoad () {\n\t\t// this.atlasCodeMap.set(OPCode.OPE_PASS, this.guoBtn);\n        \n\t};\n\n\tpublic updateAtlasCodeMap(){\n\t\tthis.atlasCodeMap.set(OPCode.OPE_PENG, \"peng\");\n        this.atlasCodeMap.set(OPCode.OPE_QIANG_PENG, \"peng\");\n        this.atlasCodeMap.set(OPCode.OPE_HU, \"hu\");\n\t\tthis.atlasCodeMap.set(OPCode.OPE_RIGHT_CHI, \"chi\");\n\t\tthis.atlasCodeMap.set(OPCode.OPE_MIDDLE_CHI, \"chi\");\n\t\tthis.atlasCodeMap.set(OPCode.OPE_LEFT_CHI, \"chi\");\n        this.atlasCodeMap.set(OPCode.OPE_ZI_MO, \"zimo\");\n        this.atlasCodeMap.set(OPCode.OPE_AN_GANG, \"gang\");\n        this.atlasCodeMap.set(OPCode.OPE_GANG, \"gang\");\n        this.atlasCodeMap.set(OPCode.OPE_BU_GANG, \"gang\");\n\t}\n\n\t getShowBtn (code: number): string | null {\n        for (let [opCode, opstr] of this.atlasCodeMap) {\n            if (code == opCode) {\n                return opstr;\n            }\n        }\n        return null;\n\n    }\n\n\tpublic updateItemProps(userId?: number,opCode?: number){\n\t\tlet userInfo :Common.GameUserInfo = PlayerMgr.getInstance().findPlayerWithUserId(userId).gameUserInfo;\n\t\tlet sexStr = \"\";\n\t\tif (userInfo.sex == 2) {\n\t\t\tsexStr = \"xiaoya\"\n\t\t} else {\n\t\t\tsexStr = \"xiaobo\"\n\t\t}\n\t\tlet opStr = this.getShowBtn(opCode);\n\t\tif(!opStr){\n\t\t\tthis.node.active = false;\n\t\t\treturn;\n\t\t}\n\t\tthis.node.active = true;\n\n        let param: inf_SpineAniCreate = {   \n            resConf: FXJRes.Spine_Hu,\n            aniName: \"px_\" + opStr,\n            parentNode: this.opration,\n            trackIndex: 0,\n            isLoop: false, \n        }\n        EventManager.dispatch(FXJEvent.SYS_ANI_PLAY, param);\n        \n\t}\n\n}\n\n"]}
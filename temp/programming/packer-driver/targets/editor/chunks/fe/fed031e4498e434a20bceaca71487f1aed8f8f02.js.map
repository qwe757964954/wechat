{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/activity/scripts/signinCtr.ts"],"names":["Button","Label","Node","PageView","Sprite","SpriteAtlas","Tween","UIOpacity","UITransform","Vec3","_decorator","instantiate","tween","GCache","AppEvent","AppSound","GameRes","Utils","SpriteLoad","EventManager","BaseComponent","ccclass","property","signinCtr","tooltip","type","_data","_itemToday","_itemIndexToday","onInitModuleEvent","addModelListener","ACTIVITY_UPDATE_SIGNIN_CONF","respUpdateSignConf","NET_FORWARD_SIGNIN_AWARD","respSignResult","NET_FORWARD_SIGNIN_CONTINU_AWARD","respSignContinueAwardResult","onLoad","Activity","updateTodayOpenSign","initView","updateData","updateView","start","onDestroy","itemTemplate","active","continueTemplate","table_verify","getSigninData","isAll","table_isEmpty","updateViewTime","updateViewContinueList","updateViewItemList","updateViewBtn","time","string","date","isRunAni","signAward","data","childLength","itemView","children","length","i","destroy","max","nodeItem","index","addChild","uiTransform","getComponent","position","contentSize","width","z","uiOpacity","opacity","updateViewItem","stopAllByTarget","day","today","delay","to","easing","setPosition","item","itemData","print","itemBg","getChildByName","itemDay","awardView","itemTag","itemGet","awardViewIcon","awardViewText","framePngPath","string_format","getPreLoaderRes","Atlas_Sign","bundle","path","atlas","spriteFrame","getSpriteFrame","spriteComponent","status","spriteLoad","setRemoteUrl","icon","label","String","num","continueAward","pageView","continueView","getPages","removePageAtIndex","pageIndex","allPages","addPage","updateViewContinue","checkContinueBtnActive","stopAutoScroll","addSchedulerOnce","scrollToPage","continueBg","tag","awardNumBg","awardNum","continueAnim","spriteContinueBg","node","spriteLoadIcon","btn","clickEvents","customEventData","todayStatus","confirmBtn","enabled","grayscale","childrenComponent","getComponentsInChildren","confirmBtnAnim","onPageEventContinueView","event","getCurrentPageIndex","continueLeftBtn","continueRightBtn","onClickContinueAward","dispatch","SYS_PLAY_EFFECT","CommClick","number_valueOf","NET_REQ_SIGNIN_CONTINU_AWARD","onClickContinuePageBtn","isSuccess","SYS_TOAST_TIP","content","onClickCloseBtn","custom","onClickConfirmBtn","NET_REQ_SIGNIN_AWARD"],"mappings":"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","sourcesContent":["\nimport { Button, EventTouch, Label, Node, PageView, Sprite, SpriteAtlas, Tween, UIOpacity, UITransform, Vec3, _decorator, instantiate, tween } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { AppSound } from '../../../config/AppSound';\nimport { GameRes } from '../../../config/GameRes';\nimport { Utils } from '../../../framework/Utils';\nimport SpriteLoad from '../../../framework/gui/sprite/SpriteLoad';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = signinCtr\n * URL = db://assets/package/activity/script/signinCtr.ts\n * Time = Tue Jun 27 2023 12:00:14 GMT+0800 (中国标准时间)\n * Author = harvyson\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('signinCtr')\nexport class signinCtr extends BaseComponent {\n\t//活动时间\n\t@property({ tooltip: \"活动时间\", type: Label })\n\ttime: Label = null!;\n\n\t@property({ tooltip: \"每日签到节点\", type: Node })\n\titemView: Node = null!;\n\n\t@property({ tooltip: \"每日签到模板\", type: Node })\n\titemTemplate: Node = null!;\n\n\t@property({ tooltip: \"连续签到节点\", type: Node })\n\tcontinueView: Node = null!;\n\n\t@property({ tooltip: \"连续签到模板\", type: Node })\n\tcontinueTemplate: Node = null!;\n\n\t@property({ tooltip: \"签到按钮\", type: Button })\n\tconfirmBtn: Button = null!;\n\n\t@property({ tooltip: \"签到按钮动画\", type: Node })\n\tconfirmBtnAnim: Node = null!;\n\n\t@property({ tooltip: \"连续签到页左边按钮\", type: Button })\n\tcontinueLeftBtn: Button = null!;\n\n\t@property({ tooltip: \"连续签到页右边按钮\", type: Button })\n\tcontinueRightBtn: Button = null!;\n\n\t_data = null;\n\t/** 今天 */\n\t_itemToday: Node = null;\n\t/** 今天下标 */\n\t_itemIndexToday: number = null;\n\n\t/**初始化添加事件绑定 */\n\tprotected onInitModuleEvent(): void {\n\t\t/** 签到配置数据更新 */\n\t\tthis.addModelListener(AppEvent.ACTIVITY_UPDATE_SIGNIN_CONF, this.respUpdateSignConf)\n\t\t/** 签到结果返回 */\n\t\tthis.addModelListener(AppEvent.NET_FORWARD_SIGNIN_AWARD, this.respSignResult)\n\t\t/** 连续签到结果返回 */\n\t\tthis.addModelListener(AppEvent.NET_FORWARD_SIGNIN_CONTINU_AWARD, this.respSignContinueAwardResult)\n\t}\n\n\tonLoad() {\n\t\tGCache.Activity.updateTodayOpenSign();\n\t\tthis.initView();\n\t\tthis.updateData();\n\t\tthis.updateView(true);\n\t};\n\n\tstart() {\n\n\t};\n\n\t//销毁\n\tonDestroy() {\n\n\t};\n\n\tinitView() {\n\t\tthis.itemTemplate.active = false;\n\t\tthis.continueTemplate.active = false;\n\t}\n\t/** 更新数据 */\n\tupdateData() {\n\t\tthis._data = Utils.table_verify(GCache.Activity.getSigninData());\n\t}\n\t/** 更新界面 */\n\tupdateView(isAll = false) {\n\t\tif (Utils.table_isEmpty(this._data)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateViewTime();\n\t\tif (isAll == true) {\n\t\t\tthis.updateViewContinueList();\n\t\t}\n\t\tthis.updateViewItemList(true);\n\t\tthis.updateViewBtn();\n\t};\n\t/** 更新时间 */\n\tupdateViewTime() {\n\t\tthis.time.string = this._data.date || \"\"\n\t};\n\t/** 更新连签页面 */\n\tupdateViewItemList(isRunAni = false) {\n\t\tif (!Utils.table_isEmpty(this._data.signAward)) {\n\t\t\tlet data = this._data.signAward;\n\t\t\tlet childLength = this.itemView.children.length;\n\t\t\tif (!data) {\n\t\t\t\tfor (let i = (childLength - 1); i >= 0; i--) {\n\t\t\t\t\tthis.itemView.children[i].destroy();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet max = data.length;\n\t\t\tif (max < childLength) {\n\t\t\t\tmax = childLength;\n\t\t\t}\n\t\t\tfor (let i = (max - 1); i >= 0; i--) {\n\t\t\t\tlet nodeItem = this.itemView.children[i];\n\t\t\t\tif (nodeItem && !data[i]) {\n\t\t\t\t\tnodeItem.destroy();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let index = 0; index < data.length; index++) {\n\t\t\t\tlet nodeItem = this.itemView.children[index];\n\t\t\t\tif (!nodeItem) {\n\t\t\t\t\tnodeItem = instantiate(this.itemTemplate);\n\t\t\t\t\tthis.itemView.addChild(nodeItem);\n\t\t\t\t}\n\n\t\t\t\tlet uiTransform = nodeItem.getComponent(UITransform)\n\t\t\t\tnodeItem.position = new Vec3(uiTransform.contentSize.width * index, 100, nodeItem.position.z)\n\t\t\t\tnodeItem.active = true;\n\t\t\t\tlet uiOpacity = nodeItem.getComponent(UIOpacity)\n\t\t\t\tuiOpacity.opacity = 0;\n\t\t\t\tthis.updateViewItem(nodeItem, index, data[index])\n\n\t\t\t\tTween.stopAllByTarget(nodeItem);\n\t\t\t\tTween.stopAllByTarget(uiOpacity);\n\t\t\t\tif (data[index].day == data[index].today) {\n\t\t\t\t\tif (isRunAni == true) {\n\t\t\t\t\t\ttween(nodeItem)\n\t\t\t\t\t\t\t.delay(0.1 * index)\n\t\t\t\t\t\t\t.to(0.5, { position: new Vec3(uiTransform.contentSize.width * index, 0, nodeItem.position.z) }, {\n\t\t\t\t\t\t\t\teasing: \"backOut\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.delay(0.1 * (this._data.signAward.length - index))\n\t\t\t\t\t\t\t.to(0.3, { position: new Vec3(uiTransform.contentSize.width * index, 40, nodeItem.position.z) }, {\n\t\t\t\t\t\t\t\teasing: \"sineOut\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.start();\n\t\t\t\t\t\ttween(uiOpacity)\n\t\t\t\t\t\t\t.delay(0.1 * index)\n\t\t\t\t\t\t\t.to(0.3, { opacity: 255 })\n\t\t\t\t\t\t\t.start();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnodeItem.setPosition(new Vec3(uiTransform.contentSize.width * index, 40, nodeItem.position.z));\n\t\t\t\t\t\tuiOpacity.opacity = 255;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._itemToday = nodeItem;\n\t\t\t\t\tthis._itemIndexToday = index;\n\t\t\t\t} else {\n\t\t\t\t\tif (isRunAni == true) {\n\t\t\t\t\t\ttween(nodeItem)\n\t\t\t\t\t\t\t.delay(0.1 * index)\n\t\t\t\t\t\t\t.to(0.5, { position: new Vec3(uiTransform.contentSize.width * index, 0, nodeItem.position.z) }, {\n\t\t\t\t\t\t\t\teasing: \"backOut\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.start();\n\n\t\t\t\t\t\ttween(uiOpacity)\n\t\t\t\t\t\t\t.delay(0.1 * index)\n\t\t\t\t\t\t\t.to(0.3, { opacity: 255 })\n\t\t\t\t\t\t\t.start();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnodeItem.setPosition(new Vec3(uiTransform.contentSize.width * index, 0, nodeItem.position.z));\n\t\t\t\t\t\tuiOpacity.opacity = 255;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/** 更新单个签到节点 */\n\tupdateViewItem(item: Node, index: number, itemData: any) {\n\t\tthis.print(\"updateViewItem\", itemData);\n\t\tlet itemBg = item.getChildByName(\"itemBg\");\n\t\tlet itemDay = itemBg.getChildByName(\"itemDay\");\n\t\tlet awardView = itemBg.getChildByName(\"awardView\");\n\t\tlet itemTag = itemBg.getChildByName(\"itemTag\");\n\t\tlet itemGet = itemBg.getChildByName(\"itemGet\");\n\t\tlet awardViewIcon = awardView.getChildByName(\"icon\");\n\t\tlet awardViewText = awardView.getChildByName(\"text\");\n\n\t\tlet framePngPath = Utils.string_format(\"day_{0}\", index + 1);\n\n\t\titemDay.active = false;\n\t\tthis.getPreLoaderRes(GameRes.Atlas_Sign.bundle, GameRes.Atlas_Sign.path, SpriteAtlas, (atlas) => {\n\t\t\tlet spriteFrame = atlas.getSpriteFrame(framePngPath)\n\t\t\tif (spriteFrame) {\n\t\t\t\tlet spriteComponent = itemDay.getComponent(Sprite);\n\t\t\t\tspriteComponent.spriteFrame = spriteFrame;\n\t\t\t\titemDay.active = true;\n\t\t\t}\n\t\t})\n\n\t\tif (itemData.day < itemData.today) {\n\t\t\titemGet.active = true;\n\t\t} else if (itemData.day == itemData.today) {\n\t\t\tif (itemData.status == 1) {\n\t\t\t\titemGet.active = false;\n\t\t\t} else {\n\t\t\t\titemGet.active = true;\n\t\t\t}\n\t\t} else {\n\t\t\titemGet.active = false;\n\t\t}\n\n\n\t\tlet spriteLoad = awardViewIcon.getComponent(SpriteLoad)\n\t\tif (spriteLoad != null) {\n\t\t\tspriteLoad.setRemoteUrl(itemData.icon);\n\t\t}\n\n\t\tlet label = awardViewText.getComponent(Label)\n\t\tif (label != null) {\n\t\t\tlabel.string = String(itemData.num)\n\t\t}\n\n\t\t// status: 0 不可签到 1 未签到 2 未签到（补签） 3 已签到\n\t\tif (itemData.status == 0) {\n\t\t\tawardView.active = true;\n\t\t\titemTag.active = false;\n\t\t} else if (itemData.status == 1) {\n\t\t\tawardView.active = true;\n\t\t\titemTag.active = false;\n\t\t} else if (itemData.status == 2) {\n\t\t\tawardView.active = true;\n\t\t\titemTag.active = false;\n\t\t} else if (itemData.status == 3) {\n\t\t\tawardView.active = false;\n\t\t\titemTag.active = true;\n\t\t}\n\t}\n\t/** 更新连续签到列表 */\n\tupdateViewContinueList() {\n\t\tif (!Utils.table_isEmpty(this._data.continueAward)) {\n\t\t\tlet pageView: PageView = this.continueView.getComponent(PageView);\n\n\t\t\tlet data = this._data.continueAward;\n\t\t\tlet childLength = pageView.getPages().length;\n\t\t\tif (!data) {\n\t\t\t\tfor (let i = (childLength - 1); i >= 0; i--) {\n\t\t\t\t\tpageView.removePageAtIndex(i);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet max = data.length;\n\t\t\tif (max < childLength) {\n\t\t\t\tmax = childLength;\n\t\t\t}\n\t\t\tfor (let i = (max - 1); i >= 0; i--) {\n\t\t\t\tlet nodeItem = this.itemView.children[i];\n\t\t\t\tif (nodeItem && !data[i]) {\n\t\t\t\t\tnodeItem.destroy();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet pageIndex = 0;\n\t\t\tlet allPages = pageView.getPages();\n\t\t\tfor (let index = 0; index < data.length; index++) {\n\t\t\t\tlet nodeItem = allPages[index];\n\t\t\t\tif (!nodeItem) {\n\t\t\t\t\tnodeItem = instantiate(this.continueTemplate);\n\t\t\t\t\tpageView.addPage(nodeItem);\n\t\t\t\t}\n\t\t\t\tnodeItem.active = true;\n\t\t\t\tthis.updateViewContinue(nodeItem, index, data[index]);\n\n\t\t\t\tif (data[index][\"status\"] == 2) {\n\t\t\t\t\tif (index == data.length - 1) {\n\t\t\t\t\t\tpageIndex = data.length - 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpageIndex = index + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis.checkContinueBtnActive()\n\t\t\tpageView.stopAutoScroll();\n\t\t\tthis.addSchedulerOnce(0, () => {\n\t\t\t\tpageView.scrollToPage(pageIndex);\n\t\t\t})\n\t\t}\n\t}\n\t/** 更新单个连续签到 */\n\tupdateViewContinue(item: Node, index: number, itemData: any) {\n\t\tlet continueBg = item.getChildByName(\"continueBg\");\n\t\tlet icon = item.getChildByName(\"icon\");\n\t\tlet tag = item.getChildByName(\"tag\");\n\t\tlet awardNumBg = item.getChildByName(\"awardNumBg\");\n\t\tlet awardNum = awardNumBg.getChildByName(\"awardNum\");\n\t\tlet continueAnim = item.getChildByName(\"continueAnim\");\n\n\t\tlet spriteContinueBg = continueBg.getComponent(Sprite);\n\t\tif (spriteContinueBg != null) {\n\t\t\tif (itemData.day == 3) {\n\t\t\t\tthis.getPreLoaderRes(GameRes.Atlas_Sign.bundle, GameRes.Atlas_Sign.path, SpriteAtlas, (atlas) => {\n\t\t\t\t\tlet spriteFrame = atlas.getSpriteFrame(\"3days\")\n\t\t\t\t\tif (spriteFrame) {\n\t\t\t\t\t\tspriteContinueBg.spriteFrame = spriteFrame;\n\t\t\t\t\t\tspriteContinueBg.node.active = true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else if (itemData.day == 7) {\n\t\t\t\tthis.getPreLoaderRes(GameRes.Atlas_Sign.bundle, GameRes.Atlas_Sign.path, SpriteAtlas, (atlas) => {\n\t\t\t\t\tlet spriteFrame = atlas.getSpriteFrame(\"7days\")\n\t\t\t\t\tif (spriteFrame) {\n\t\t\t\t\t\tspriteContinueBg.spriteFrame = spriteFrame;\n\t\t\t\t\t\tspriteContinueBg.node.active = true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\n\t\tlet spriteLoadIcon = icon.getComponent(SpriteLoad)\n\t\tif (spriteLoadIcon != null) {\n\t\t\tspriteLoadIcon.setRemoteUrl(itemData.icon);\n\t\t}\n\n\t\tlet label = awardNum.getComponent(Label)\n\t\tif (label != null) {\n\t\t\tlabel.string = String(itemData.num)\n\t\t}\n\t\tlet btn = icon.getComponent(Button)\n\t\tif (!Utils.table_isEmpty(btn.clickEvents)) {\n\t\t\tbtn.clickEvents[0].customEventData = String(index)\n\t\t}\n\n\t\t// status: 0 不可领取 1 可领取 2 已领取\n\t\tif (itemData.status == 0) {\n\t\t\ttag.active = false;\n\t\t\tcontinueAnim.active = false;\n\t\t} else if (itemData.status == 1) {\n\t\t\ttag.active = false;\n\t\t\tcontinueAnim.active = true;\n\t\t} else if (itemData.status == 2) {\n\t\t\ttag.active = true;\n\t\t\tcontinueAnim.active = false;\n\t\t}\n\t}\n\t/** 更新签到按钮 */\n\tupdateViewBtn() {\n\t\tif (this._data.todayStatus == 0) {\n\t\t\tthis.confirmBtn.enabled = true;\n\t\t\tthis.confirmBtn.getComponent(Sprite).grayscale = false;\n\t\t\tlet childrenComponent = this.confirmBtn.getComponentsInChildren(Sprite);\n\t\t\tfor (let index = 0; index < childrenComponent.length; index++) {\n\t\t\t\tchildrenComponent[index].grayscale = false;\n\t\t\t}\n\t\t\tthis.confirmBtnAnim.active = true;\n\t\t} else {\n\t\t\tthis.confirmBtn.enabled = false;\n\t\t\tthis.confirmBtn.getComponent(Sprite).grayscale = true;\n\t\t\tlet childrenComponent = this.confirmBtn.getComponentsInChildren(Sprite);\n\t\t\tfor (let index = 0; index < childrenComponent.length; index++) {\n\t\t\t\tchildrenComponent[index].grayscale = true;\n\t\t\t}\n\t\t\tthis.confirmBtnAnim.active = false;\n\t\t}\n\t};\n\n\tonPageEventContinueView(event: Event, customEventData: string) {\n\t\tthis.print(\"onPageEventContinueView\", event, customEventData);\n\t\tthis.checkContinueBtnActive()\n\t}\n\n\tcheckContinueBtnActive() {\n\t\tlet pageView = this.continueView.getComponent(PageView);\n\t\tlet index = pageView.getCurrentPageIndex();\n\t\tlet length = pageView.getPages().length;\n\n\t\tthis.continueLeftBtn.enabled = index > 0;\n\t\tthis.continueRightBtn.enabled = index < length - 1;\n\t\tthis.continueLeftBtn.node.active = index > 0;\n\t\tthis.continueRightBtn.node.active = index < length - 1;\n\t}\n\n\tonClickContinueAward(event: Event, customEventData: string) {\n\t\tthis.print(\"onClickContinueAward\", event, customEventData);\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\tif (Utils.table_isEmpty(this._data)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Utils.table_isEmpty(this._data.continueAward)) {\n\t\t\tlet index = Utils.number_valueOf(customEventData);\n\t\t\tlet data = this._data.continueAward[index];\n\t\t\tif (!Utils.table_isEmpty(data)) {\n\t\t\t\tif (data.status == 1) {\n\t\t\t\t\tEventManager.dispatch(AppEvent.NET_REQ_SIGNIN_CONTINU_AWARD, data.day)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/** 点击翻页 */\n\tonClickContinuePageBtn(event: Event, customEventData: string) {\n\t\tthis.print(\"onClickContinuePageBtn\", event, customEventData);\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\tlet pageView = this.continueView.getComponent(PageView);\n\t\tif (customEventData == \"left\") {\n\t\t\tpageView.scrollToPage(pageView.getCurrentPageIndex() - 1)\n\t\t} else if (customEventData == \"right\") {\n\t\t\tpageView.scrollToPage(pageView.getCurrentPageIndex() + 1)\n\t\t}\n\t}\n\t/** 签到配置数据更新 */\n\trespUpdateSignConf(event, isSuccess) {\n\t\tif (!isSuccess) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateData();\n\t\tthis.updateView(true);\n\t}\n\t/** 签到结果 */\n\trespSignResult(event, isSuccess) {\n\t\tif (!isSuccess) {\n\t\t\tEventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: \"Fail:签到失败\" })\n\t\t\treturn;\n\t\t}\n\t\tthis.updateData();\n\t\tthis.updateViewItemList();\n\t\tthis.updateViewBtn();\n\t\tthis.updateViewContinueList();\n\t}\n\t/** 更新连续签到领奖 */\n\trespSignContinueAwardResult(event, isSuccess) {\n\t\tif (!isSuccess) {\n\t\t\tEventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: \"Fail:连续签到失败\" })\n\t\t\treturn;\n\t\t}\n\t\tthis.updateData();\n\t\tthis.updateViewContinueList();\n\t}\n\n\tonClickCloseBtn(event: EventTouch, custom: string) {\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\tthis.node.destroy();\n\t};\n\n\tonClickConfirmBtn(event: Event, customEventData: string) {\n\t\tthis.print(\"onClickConfirmBtn\", event, customEventData);\n\t\tEventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n\t\tif (Utils.table_isEmpty(this._data)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._data.todayStatus == 0) {\n\t\t\tEventManager.dispatch(AppEvent.NET_REQ_SIGNIN_AWARD, this._data.today)\n\t\t} else {\n\n\t\t}\n\t}\n\n}\n\n"]}
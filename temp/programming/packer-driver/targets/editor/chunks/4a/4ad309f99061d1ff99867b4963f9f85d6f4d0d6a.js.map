{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/scripts/NodeUserPrefabCtr.ts"],"names":["Label","Node","SpriteAtlas","Vec3","_decorator","GCache","Utils","SpriteLoad","EventManager","BaseComponent","PlayerMgr","RoomMgr","FXJConfig","FXJConstant","FXJEvent","FXJRes","FXJUIID","FXJSound","GameEvent","CardUtil","ccclass","property","menu","NodeUserPrefabCtr","tooltip","type","_handlerChatTextAutoHide","_isReload","_uid","_posID","onInitModuleEvent","addModelListener","VIEW_BROADCAST_PLAYER_EXIT","palyerExit","VIEW_PLAYER_UPDATE_PROPERTY","updateCoin","VIEW_PLAYER_CHAT_SHOW","showChatMsg","VIEW_PLAYER_EMOJ_SHOW","showEmojMsg","VIEW_BROADCAST_PLAYER_AI_SHOW","palyerDeposit","VIEW_BROADCAST_PLAYER_AI_HIDE","palyerCancelDeposit","VIEW_PLAYER_AI_SHOW","modifyPlayerDeposit","VIEW_BROADCAST_DING_ZHUANG","palyerDingZhuang","onLoad","console","log","preloadRes","initUI","infoBgPlayer","active","nodeBtnMask","nodeChat","nodeEmoji","node","nodeDeposit","nodeZhuang","palyerRefresh","getPreLoaderRes","Atlas_Game_CardNum","bundle","path","Atlas_Player_Common","start","UID","PosID","posID","initData","data","uid","isValid","player","getInstance","findPlayerWithUserId","destroy","event","calculatePlayerSeat","mySeatId","seatId","updatePos","updateUserHead","gameUserInfo","sex","avatar_s","userId","url","spriteLoad","headNode","getComponent","headArray","User","getUserHeadArray","string_isEmpty","setRemoteUrl","s","setLocalLoad","Picture_UserBigHead_girl","Picture_UserBigHead_boy","palyer","coinLabel","string","string_moneyToShortNumber","money","position","respData","mid","ai","getUserMid","body","faceValue","mojiIndex","Math","pow","aniName","ChatEmojiAniConf","movex","emojiAni","parentNode","resConf","Spine_Emoji","trackIndex","isLoop","skin","toPos","dispatch","SYS_ANI_PLAY","warn","PosId","isNotNull","msg","stopSchedulerOnce","childNameList","currowName","forEach","nodeName","key","pNode","getChildByName","bg","label","String","addSchedulerOnce","ChatTextAutoHide","handler","hideChatText","onClickUserInfo","SYS_PLAY_EFFECT","CommClick","Desk","PlayType","MATCH","SYS_TOAST_TIP","content","VIEW_UI_OPEN","PlayerInfoCenter","GAME_OPEN_POPUP","GameHeadInfoPrefab","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AAChCC,MAAAA,M,iBAAAA,M;;AAEAC,MAAAA,K,iBAAAA,K;;AACFC,MAAAA,U;;AACEC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,W,kBAAAA,W;;AACAC,MAAAA,Q,kBAAAA,Q;;AACAC,MAAAA,M,kBAAAA,M;AAAQC,MAAAA,O,kBAAAA,O;;AACRC,MAAAA,Q,kBAAAA,Q;;AACAC,MAAAA,S,kBAAAA,S;;AAGAC,MAAAA,Q,kBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA8BlB,U;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;mCAKamB,iB,WAHZH,OAAO,CAAC,mBAAD,C,UAEPE,IAAI,CAAC,+BAAD,C,UAIHD,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,QAAX;AAAqBC,QAAAA,IAAI,EAAExB;AAA3B,OAAD,C,UAIRoB,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,QAAX;AAAqBC,QAAAA,IAAI,EAAExB;AAA3B,OAAD,C,UAIRoB,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,UAAX;AAAuBC,QAAAA,IAAI,EAAExB;AAA7B,OAAD,C,UAIRoB,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,IAAI,EAAExB;AAAzB,OAAD,C,UAIRoB,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,IAAX;AAAiBC,QAAAA,IAAI,EAAEzB;AAAvB,OAAD,C,UAIRqB,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,QAAX;AAAqBC,QAAAA,IAAI,EAAExB;AAA3B,OAAD,C,UAIRoB,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,QAAX;AAAqBC,QAAAA,IAAI,EAAExB;AAA3B,OAAD,C,WAIRoB,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,IAAI,EAAExB;AAAzB,OAAD,C,0CAlCV,MAGasB,iBAHb;AAAA;AAAA,0CAGqD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAmC5CG,wBAnC4C,GAmCjB,IAnCiB;AAAA,eAqC5CC,SArC4C,GAqCvB,KArCuB;AAAA,eAuC5CC,IAvC4C,GAuC7B,IAvC6B;AAAA,eAyC5CC,MAzC4C,GAyC3B,IAzC2B;AAAA;;AA0CpD;AACUC,QAAAA,iBAAiB,GAAS;AACnC;AACA,eAAKC,gBAAL,CAAsB;AAAA;AAAA,sCAAUC,0BAAhC,EAA4D,KAAKC,UAAjE,EAFmC,CAGnC;AACA;AACA;;AACA,eAAKF,gBAAL,CAAsB;AAAA;AAAA,oCAASG,2BAA/B,EAA4D,KAAKC,UAAjE,EANmC,CAOnC;;AACA,eAAKJ,gBAAL,CAAsB;AAAA;AAAA,oCAASK,qBAA/B,EAAsD,KAAKC,WAA3D;AAEA,eAAKN,gBAAL,CAAsB;AAAA;AAAA,sCAAUO,qBAAhC,EAAuD,KAAKC,WAA5D,EAVmC,CAanC;;AACA,eAAKR,gBAAL,CAAsB;AAAA;AAAA,sCAAUS,6BAAhC,EAA+D,KAAKC,aAApE,EAdmC,CAenC;;AACA,eAAKV,gBAAL,CAAsB;AAAA;AAAA,sCAAUW,6BAAhC,EAA+D,KAAKC,mBAApE;AAEA,eAAKZ,gBAAL,CAAsB;AAAA;AAAA,sCAAUa,mBAAhC,EAAqD,KAAKC,mBAA1D,EAlBmC,CAqBnC;;AACA,eAAKd,gBAAL,CAAsB;AAAA;AAAA,sCAAUe,0BAAhC,EAA4D,KAAKC,gBAAjE;AACA;;AAEDC,QAAAA,MAAM,GAAG;AACR,eAAKrB,SAAL,GAAiB,IAAjB;AACAsB,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC,KAAKtB,IAAxC;AACA,eAAKuB,UAAL;AACA,eAAKC,MAAL;AACA;;AACDA,QAAAA,MAAM,GAAG;AACR,eAAKC,YAAL,CAAkBC,MAAlB,GAA2B,IAA3B;AACA,eAAKC,WAAL,CAAiBD,MAAjB,GAA0B,IAA1B;AACA,eAAKE,QAAL,CAAcF,MAAd,GAAuB,KAAvB;AACA,eAAKG,SAAL,CAAeH,MAAf,GAAwB,IAAxB;AACA,eAAKI,IAAL,CAAUJ,MAAV,GAAmB,IAAnB;AACA,eAAKK,WAAL,CAAiBL,MAAjB,GAA0B,KAA1B;AACA,eAAKM,UAAL,CAAgBN,MAAhB,GAAyB,KAAzB;AACA,eAAKO,aAAL,CAAmB,IAAnB,EAAyB,KAAKjC,IAA9B;AACA;AACD;;;AACAuB,QAAAA,UAAU,GAAG;AACZ,eAAKW,eAAL,CAAqB;AAAA;AAAA,gCAAOC,kBAAP,CAA0BC,MAA/C,EAAuD;AAAA;AAAA,gCAAOD,kBAAP,CAA0BE,IAAjF,EAAuF/D,WAAvF;AACA,eAAK4D,eAAL,CAAqB;AAAA;AAAA,gCAAOI,mBAAP,CAA2BF,MAAhD,EAAwD;AAAA;AAAA,gCAAOE,mBAAP,CAA2BD,IAAnF,EAAyF/D,WAAzF;AAEA;;AACDiE,QAAAA,KAAK,GAAG,CAEP;;AACD;AACO,YAAHC,GAAG,GAAG;AACT,iBAAO,KAAKxC,IAAZ;AACA;AACD;;;AACS,YAALyC,KAAK,CAACC,KAAD,EAAQ;AAChB,eAAKzC,MAAL,GAAcyC,KAAd;AACA;AACD;;;AACS,YAALD,KAAK,GAAG;AACX,iBAAO,KAAKxC,MAAZ;AACA;;AAEM0C,QAAAA,QAAQ,CAACC,IAAD,EAAO;AACrB,cAAIA,IAAJ,EAAU;AACT,iBAAK3C,MAAL,GAAc2C,IAAI,CAACF,KAAnB;AACA,iBAAK1C,IAAL,GAAY4C,IAAI,CAACC,GAAjB;AACA;;AACD,cAAI,CAAC,KAAKf,IAAN,IAAc,KAAKA,IAAL,CAAUgB,OAAV,IAAqB,KAAvC,EAA8C;AAC7C;AACA;;AACD,cAAI,KAAK9C,IAAT,EAAe;AACd,gBAAI+C,MAAM,GAAG;AAAA;AAAA,wCAAUC,WAAV,GAAwBC,oBAAxB,CAA6C,KAAKjD,IAAlD,CAAb;;AACA,gBAAI+C,MAAM,IAAI,IAAd,EAAoB;AACnB,mBAAKd,aAAL,CAAmB,IAAnB,EAAyB,KAAKjC,IAA9B;AACA,aAFD,MAEO;AACN,mBAAK8B,IAAL,CAAUoB,OAAV;AACA;AACD;AACD;AACD;;;AACAjB,QAAAA,aAAa,CAACkB,KAAD,EAAQN,GAAR,EAAqB;AACjC,cAAI,CAACA,GAAD,IAAQA,GAAG,IAAI,KAAK7C,IAAxB,EAA8B;AAC7B;AACA;;AACD,cAAI+C,MAAM,GAAG;AAAA;AAAA,sCAAUC,WAAV,GAAwBC,oBAAxB,CAA6CJ,GAA7C,CAAb;;AACA,cAAIE,MAAJ,EAAY;AACX,iBAAK9C,MAAL,GAAc;AAAA;AAAA,sCAASmD,mBAAT,CAA6B;AAAA;AAAA,oCAAQJ,WAAR,GAAsBK,QAAnD,EAA4DN,MAAM,CAACO,MAAnE,CAAd;AAEA,iBAAK7B,YAAL,CAAkBC,MAAlB,GAA2B,IAA3B;AACA,iBAAKC,WAAL,CAAiBD,MAAjB,GAA0B,IAA1B;AACA,iBAAK6B,SAAL;AACA,iBAAKC,cAAL,CAAoBT,MAAM,CAACU,YAAP,CAAoBC,GAAxC,EAA6CX,MAAM,CAACU,YAAP,CAAoBE,QAAjE;AACA,iBAAKpD,UAAL,CAAgB,IAAhB,EAAsBwC,MAAM,CAACa,MAA7B;AACA;AACD,SA1ImD,CA4IpD;;;AACAJ,QAAAA,cAAc,CAACE,GAAD,EAAcG,GAAd,EAA2B;AACxC,cAAIC,UAAU,GAAG,KAAKC,QAAL,CAAcC,YAAd;AAAA;AAAA,uCAAjB;AACA,cAAIC,SAAS,GAAG;AAAA;AAAA,gCAAOC,IAAP,CAAYC,gBAAZ,EAAhB;;AAEA,cAAI,CAAC;AAAA;AAAA,8BAAMC,cAAN,CAAqBP,GAArB,CAAL,EAAgC;AAC/BC,YAAAA,UAAU,CAACO,YAAX,CAAwBJ,SAAS,CAACK,CAAlC;AACA,WAFD,MAEO;AACN,gBAAIZ,GAAG,IAAI,CAAX,EAAc;AACbI,cAAAA,UAAU,CAACS,YAAX,CAAwB;AAAA;AAAA,oCAAOC,wBAAP,CAAgCpC,MAAxD,EAAgE;AAAA;AAAA,oCAAOoC,wBAAP,CAAgCnC,IAAhG;AACA,aAFD,MAEO;AACNyB,cAAAA,UAAU,CAACS,YAAX,CAAwB;AAAA;AAAA,oCAAOE,uBAAP,CAA+BrC,MAAvD,EAA+D;AAAA;AAAA,oCAAOqC,uBAAP,CAA+BpC,IAA9F;AACA;AACD;AACD;AAED;;;AACA9B,QAAAA,UAAU,CAAC4C,KAAK,GAAG,IAAT,EAAeN,GAAW,GAAG,IAA7B,EAAmC;AAC5C,cAAIA,GAAG,IAAIA,GAAG,IAAI,KAAK7C,IAAvB,EAA6B;AAC5B,gBAAI0E,MAAM,GAAG;AAAA;AAAA,wCAAU1B,WAAV,GAAwBC,oBAAxB,CAA6CJ,GAA7C,CAAb;AACA,iBAAK8B,SAAL,CAAeC,MAAf,GAAwB;AAAA;AAAA,gCAAMC,yBAAN,CAAgCH,MAAM,GAAGA,MAAM,CAACI,KAAV,GAAkB,CAAxD,CAAxB;AACA;AACD;AAED;;;AACAvB,QAAAA,SAAS,GAAG;AACX,kBAAQ,KAAKtD,MAAb;AACC,iBAAK,CAAL;AACC,mBAAK6B,IAAL,CAAUiD,QAAV,GAAqB,IAAIxG,IAAJ,CAAS,CAAC,GAAV,EAAe,CAAC,GAAhB,EAAqB,CAArB,CAArB,CADD,CAEC;;AACA;;AACD,iBAAK,CAAL;AACC,mBAAKuD,IAAL,CAAUiD,QAAV,GAAqB,IAAIxG,IAAJ,CAAS,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAArB,CADD,CAEC;;AACA;;AACD,iBAAK,CAAL;AACC,mBAAKuD,IAAL,CAAUiD,QAAV,GAAqB,IAAIxG,IAAJ,CAAS,GAAT,EAAc,GAAd,EAAmB,CAAnB,CAArB,CADD,CAEC;;AACA;;AACD,iBAAK,CAAL;AACC,mBAAKuD,IAAL,CAAUiD,QAAV,GAAqB,IAAIxG,IAAJ,CAAS,CAAC,GAAV,EAAe,CAAf,EAAkB,CAAlB,CAArB,CADD,CAEC;;AACA;AAhBF;AAkBA;;AAED0C,QAAAA,mBAAmB,CAACkC,KAAD,EAAQ6B,QAAR,EAAiB;AACnC;AACA,cAAIA,QAAQ,CAACC,GAAT,IAAgB,IAApB,EAA0B;AACzB,gBAAID,QAAQ,CAACC,GAAT,IAAgB,KAAKjF,IAAzB,EAA+B;AAC9B,mBAAK+B,WAAL,CAAiBL,MAAjB,GAA0BsD,QAAQ,CAACE,EAAnC;AACA;AACD;AACD;AAED;;;AACArE,QAAAA,aAAa,CAACsC,KAAD,EAAQN,GAAR,EAAoB;AAChC;AACA,cAAIA,GAAG,IAAI,IAAX,EAAiB;AAChB,gBAAIA,GAAG,IAAI,KAAK7C,IAAZ,IAAoB,KAAKA,IAAL,IAAa;AAAA;AAAA,kCAAOkE,IAAP,CAAYiB,UAAZ,EAArC,EAA+D;AAC9D,mBAAKpD,WAAL,CAAiBL,MAAjB,GAA0B,IAA1B;AACA;AACD,WAN+B,CAQhC;;AACA;AAED;;;AACAX,QAAAA,mBAAmB,CAACoC,KAAD,EAAQN,GAAR,EAAqB;AACvC,cAAIA,GAAG,IAAI,IAAX,EAAiB;AAChB,iBAAKd,WAAL,CAAiBL,MAAjB,GAA0B,KAA1B;AACA;AACA,WAHD,MAGO;AACN,gBAAImB,GAAG,IAAI,KAAK7C,IAAZ,IAAoB,KAAKA,IAAL,IAAa;AAAA;AAAA,kCAAOkE,IAAP,CAAYiB,UAAZ,EAArC,EAA+D;AAC9D,mBAAKpD,WAAL,CAAiBL,MAAjB,GAA0B,KAA1B;AACA;AACD;AACD;;AACDf,QAAAA,WAAW,CAACwC,KAAD,EAAQiC,IAAR,EAAsB;AAChC;AACF;AACA;AACA;AACE,cAAI,KAAKpF,IAAL,KAAcoF,IAAI,CAACH,GAAvB,EAA4B;AAC3B,iBAAKpD,SAAL,CAAeH,MAAf,GAAwB,KAAxB;AACA;AACA;;AACD,cAAI0D,IAAI,CAACC,SAAL,IAAkB,IAAtB,EAA4B;AAC3B;AACA;;AACD,cAAIC,SAAS,GAAGF,IAAI,CAACC,SAAL,GAAiBE,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,EAAZ,CAAjC;AAEA,cAAIC,OAAO,GAAG;AAAA;AAAA,0CAAYC,gBAAZ,CAA6BJ,SAA7B,CAAd;;AACA,cAAIG,OAAJ,EAAa;AACZ;AACA,iBAAK5D,SAAL,CAAeH,MAAf,GAAwB,IAAxB;AACA,gBAAIiE,KAAK,GAAG,CAAZ,CAHY,CAIZ;;AACA,gBAAIC,QAA4B,GAAG;AAClCC,cAAAA,UAAU,EAAE,KAAKhE,SADiB;AAElCiE,cAAAA,OAAO,EAAE;AAAA;AAAA,oCAAOC,WAFkB;AAGlCN,cAAAA,OAAO,EAAEA,OAHyB;AAIlCO,cAAAA,UAAU,EAAE,CAJsB;AAKlCC,cAAAA,MAAM,EAAE,KAL0B;AAMlCC,cAAAA,IAAI,EAAE,IAN4B;AAOlCC,cAAAA,KAAK,EAAE,IAAI5H,IAAJ,CAASoH,KAAT,EAAgB,CAAhB,EAAmB,CAAnB;AAP2B,aAAnC;AASA;AAAA;AAAA,8CAAaS,QAAb,CAAsB;AAAA;AAAA,sCAASC,YAA/B,EAA6CT,QAA7C;AACA,WAfD,MAeO;AACNvE,YAAAA,OAAO,CAACiF,IAAR,CAAa,cAAb,EAA4BlB,IAA5B;AACA;AACD;AAGD;;;AACA3E,QAAAA,WAAW,CAAC0C,KAAD,EAAQiC,IAAR,EAAsB;AAChC;AACF;AACA;AACA;AACA;AACE,cAAIrC,MAAyB,GAAG;AAAA;AAAA,sCAAUC,WAAV,GAAwBC,oBAAxB,CAA6CmC,IAAI,CAACH,GAAlD,CAAhC;;AACA,cAAI,KAAKjF,IAAL,KAAcoF,IAAI,CAACH,GAAvB,EAA4B;AAC3B,iBAAKrD,QAAL,CAAcF,MAAd,GAAuB,KAAvB;AACA;AACA;;AACD,cAAI6E,KAAY,GAAG;AAAA;AAAA,oCAASnD,mBAAT,CAA6B;AAAA;AAAA,kCAAQJ,WAAR,GAAsBK,QAAnD,EAA4DN,MAAM,CAACO,MAAnE,CAAnB,CAXgC,CAYhC;;AACA,cAAI;AAAA;AAAA,8BAAMkD,SAAN,CAAgBD,KAAhB,EAAuBnB,IAAI,CAACqB,GAA5B,CAAJ,EAAsC;AACrC,iBAAKC,iBAAL,CAAuB,KAAK5G,wBAA5B;AACA,iBAAKA,wBAAL,GAAgC,IAAhC;AACA,iBAAK8B,QAAL,CAAcF,MAAd,GAAuB,IAAvB;AACA,gBAAIiF,aAAa,GAAG,CAAC,OAAD,EAAU,MAAV,CAApB;AACA,gBAAIC,UAAU,GAAGD,aAAa,CAAC,CAAD,CAA9B;;AACA,gBAAIJ,KAAK,KAAK,CAAV,IAAeA,KAAK,KAAK,CAA7B,EAAgC;AAC/BK,cAAAA,UAAU,GAAGD,aAAa,CAAC,CAAD,CAA1B;AACA;;AACD,gBAAId,UAAU,GAAG,IAAjB;AACAc,YAAAA,aAAa,CAACE,OAAd,CAAsB,CAACC,QAAD,EAAWC,GAAX,KAAmB;AACxC,kBAAIC,KAAK,GAAG,KAAKpF,QAAL,CAAcqF,cAAd,CAA6BH,QAA7B,CAAZ;;AACA,kBAAIA,QAAQ,IAAIF,UAAhB,EAA4B;AAC3BI,gBAAAA,KAAK,CAACtF,MAAN,GAAe,IAAf;AACAmE,gBAAAA,UAAU,GAAGmB,KAAb;AACA,eAHD,MAGO;AACNA,gBAAAA,KAAK,CAACtF,MAAN,GAAe,KAAf;AACA;AACD,aARD;;AASA,gBAAI,CAACmE,UAAL,EAAiB;AAChB;AACA;;AACD,gBAAIqB,EAAE,GAAGrB,UAAU,CAACoB,cAAX,CAA0B,IAA1B,CAAT;AACA,gBAAIE,KAAK,GAAGD,EAAH,oBAAGA,EAAE,CAAED,cAAJ,CAAmB,OAAnB,CAAZ;;AACA,gBAAIE,KAAJ,EAAW;AACVA,cAAAA,KAAK,CAACnD,YAAN,CAAmB5F,KAAnB,EAA0BwG,MAA1B,GAAmCwC,MAAM,CAAChC,IAAI,CAACqB,GAAN,CAAzC;AACA;;AACD,iBAAK3G,wBAAL,GAAgC,KAAKuH,gBAAL,CAAsB;AAAA;AAAA,wCAAUC,gBAAhC,EAAkD;AAAA;AAAA,gCAAMC,OAAN,CAAc,IAAd,EAAoB,KAAKC,YAAzB,CAAlD,CAAhC;AACA,WAzC+B,CA6ChC;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;;AACA;;AACD;AACAA,QAAAA,YAAY,GAAG;AACd,cAAI,KAAK5F,QAAL,IAAiB,KAAKA,QAAL,CAAckB,OAAd,IAAyB,IAA9C,EAAoD;AACnD,iBAAKlB,QAAL,CAAcF,MAAd,GAAuB,KAAvB;AACA;;AACD,eAAK5B,wBAAL,GAAgC,IAAhC;AACA,SAvYmD,CAyYpD;;;AACA2H,QAAAA,eAAe,CAACtE,KAAD,EAAQ;AACtB,cAAIuB,MAAM,GAAG;AAAA;AAAA,sCAAU1B,WAAV,GAAwBC,oBAAxB,CAA6C,KAAKjD,IAAlD,CAAb;;AACA,cAAI,CAAC0E,MAAL,EAAa;AACZ;AACA;;AACD;AAAA;AAAA,4CAAa0B,QAAb,CAAsB;AAAA;AAAA,oCAASsB,eAA/B,EAAgD;AAAA;AAAA,oCAASC,SAAzD;;AACA,cAAI;AAAA;AAAA,gCAAOC,IAAP,CAAYC,QAAZ,IAAwB;AAAA;AAAA,0CAAYA,QAAZ,CAAqBC,KAAjD,EAAwD;AACvD;AAAA;AAAA,8CAAa1B,QAAb,CAAsB;AAAA;AAAA,sCAAS2B,aAA/B,EAA8C;AAAEC,cAAAA,OAAO,EAAE;AAAX,aAA9C;AACA;AACA;;AACD,cAAItD,MAAM,CAACd,MAAP,IAAiB;AAAA;AAAA,gCAAOM,IAAP,CAAYiB,UAAZ,EAArB,EAA+C;AAC9C;AAAA;AAAA,8CAAaiB,QAAb,CAAsB;AAAA;AAAA,sCAAS6B,YAA/B,EAA6C;AAAA;AAAA,oCAAQC,gBAArD,EAAuE,IAAvE,EAA6E,IAA7E,EAAmF,IAAnF,EAAyF,IAAzF;AACA,WAFD,MAEO;AACN,gBAAItF,IAAI,GAAG;AACVC,cAAAA,GAAG,EAAE6B,MAAM,CAACd,MADF;AAEVlB,cAAAA,KAAK,EAAEgC,MAAM,CAACpB;AAFJ,aAAX;AAIA;AAAA;AAAA,8CAAa8C,QAAb,CAAsB;AAAA;AAAA,sCAAS+B,eAA/B,EAAgD;AAAA;AAAA,oCAAQC,kBAAxD,EAA4ExF,IAA5E,EAAkF,EAAlF;AACA;AACD,SA7ZmD,CA+ZpD;;;AACAvC,QAAAA,UAAU,CAAC8C,KAAD,EAAQN,GAAW,GAAG,IAAtB,EAA4B;AACrC,cAAG;AAAA;AAAA,8BAAM2D,SAAN,CAAgB3D,GAAhB,CAAH,EAAyB;AACxB,gBAAIA,GAAG,IAAI,KAAK7C,IAAhB,EAAsB;AACrB,mBAAK8B,IAAL,CAAUJ,MAAV,GAAmB,KAAnB;AACA;AACD;AACD;;AAEDP,QAAAA,gBAAgB,CAACgC,KAAD,EAAQG,MAAc,GAAG,IAAzB,EAA+B;AAC9C,cAAG;AAAA;AAAA,8BAAMkD,SAAN,CAAgBlD,MAAhB,CAAH,EAA4B;AAC3B,iBAAKtB,UAAL,CAAgBN,MAAhB,GAAyB;AAAA;AAAA,sCAAS0B,mBAAT,CAA6B;AAAA;AAAA,oCAAQJ,WAAR,GAAsBK,QAAnD,EAA4DC,MAA5D,KAAuE,KAAKrD,MAArG;AACA;AAED,SA7amD,CA+apD;;;AACAoI,QAAAA,SAAS,GAAG,CAEX;;AAlbmD,O;;;;;iBAIhB,I;;;;;;;iBAID,I;;;;;;;iBAIA,I;;;;;;;iBAIlB,I;;;;;;;iBAIiB,I;;;;;;;iBAIF,I;;;;;;;iBAIC,I;;;;;;;iBAIN,I","sourcesContent":["\nimport { Label, Node, SpriteAtlas, Vec3, _decorator } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { inf_SpineAniCreate } from '../../../framework/InterfaceDefines';\nimport { Utils } from '../../../framework/Utils';\nimport SpriteLoad from '../../../framework/gui/sprite/SpriteLoad';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { PlayerMgr } from '../cache/PlayerMgr';\nimport { RoomMgr } from '../cache/RoomMgr';\nimport { FXJConfig } from '../common/FXJConfig';\nimport { FXJConstant } from '../common/FXJConstant';\nimport { FXJEvent } from '../common/FXJEvent';\nimport { FXJRes, FXJUIID } from '../common/FXJRes';\nimport { FXJSound } from '../common/FXJSound';\nimport { GameEvent } from '../common/GameEvent';\nimport { Common } from '../common/idl/Common';\nimport { FaceType, MsgType } from '../common/server/ChatServer';\nimport { CardUtil } from '../util/CardUtil';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = NodeUserPrefabCtr\n * URL = db://assets/package/game/scripts/NodeUserPrefabCtr.ts\n * Time = Fri Sep 16 2022 11:06:58 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * 玩家节点\n */\n\n@ccclass('NodeUserPrefabCtr')\n//方便编辑器识别的菜单项目\n@menu('prefab/game/NodeUserPrefabCtr')\nexport class NodeUserPrefabCtr extends BaseComponent {\n\n\t//玩家信息背景\n\t@property({ tooltip: \"玩家信息背景\", type: Node })\n\tprivate infoBgPlayer: Node | null = null;\n\n\t//玩家点击遮罩\n\t@property({ tooltip: \"玩家点击遮罩\", type: Node })\n\tprivate nodeBtnMask: Node | null = null;\n\n\t/** 玩家托管 */\n\t@property({ tooltip: \"玩家显示托管状态\", type: Node })\n\tprivate nodeDeposit: Node | null = null;\n\n\t//用户头像\n\t@property({ tooltip: \"用户头像\", type: Node })\n\theadNode: Node = null!;\n\n\t//银币\n\t@property({ tooltip: \"银币\", type: Label })\n\tprivate coinLabel: Label | null = null;\n\n\t//聊天气泡节点\n\t@property({ tooltip: \"聊天气泡节点\", type: Node })\n\tprivate nodeChat: Node | null = null;\n\n\t//表情动画节点\n\t@property({ tooltip: \"表情动画节点\", type: Node })\n\tprivate nodeEmoji: Node | null = null;\n\n\t//庄家节点\n\t@property({ tooltip: \"庄家节点\", type: Node })\n\tprivate nodeZhuang: Node = null!;\n\n\t/** 自动隐藏快捷聊天的句柄 */\n\tprivate _handlerChatTextAutoHide = null;\n\t//是否已经加载了\n\tprivate _isReload: boolean = false;\n\t//玩家id\n\tprivate _uid: number = null;\n\t//玩家座位号\n\tprivate _posID: number = null;\n\t/**初始化添加事件绑定 */\n\tprotected onInitModuleEvent(): void {\n\t\t//玩家退出\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_PLAYER_EXIT, this.palyerExit);\n\t\t// // 刷新坐下玩家数据\n\t\t// this.addModelListener(FXJEvent.VIEW_PLAYER_REFRESH, this.palyerRefresh);\n\t\t// //玩家资产有更新\n\t\tthis.addModelListener(FXJEvent.VIEW_PLAYER_UPDATE_PROPERTY, this.updateCoin);\n\t\t//玩家表情聊天通知\n\t\tthis.addModelListener(FXJEvent.VIEW_PLAYER_CHAT_SHOW, this.showChatMsg);\n\t\t\n\t\tthis.addModelListener(GameEvent.VIEW_PLAYER_EMOJ_SHOW, this.showEmojMsg);\n\t\t\n\n\t\t//通知:有玩家托管\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_PLAYER_AI_SHOW, this.palyerDeposit);\n\t\t//通知:有玩家取消托管 不传值表示取消所有玩家的托管状态\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_PLAYER_AI_HIDE, this.palyerCancelDeposit);\n\n\t\tthis.addModelListener(GameEvent.VIEW_PLAYER_AI_SHOW, this.modifyPlayerDeposit);\n\n\t\t\n\t\t// 定庄\n\t\tthis.addModelListener(GameEvent.VIEW_BROADCAST_DING_ZHUANG, this.palyerDingZhuang);\n\t}\n\n\tonLoad() {\n\t\tthis._isReload = true;\n\t\tconsole.log(\"NodeUser: onload==>\", this._uid);\n\t\tthis.preloadRes();\n\t\tthis.initUI();\n\t}\n\tinitUI() {\n\t\tthis.infoBgPlayer.active = true;\n\t\tthis.nodeBtnMask.active = true;\n\t\tthis.nodeChat.active = false;\n\t\tthis.nodeEmoji.active = true;\n\t\tthis.node.active = true;\n\t\tthis.nodeDeposit.active = false;\n\t\tthis.nodeZhuang.active = false;\n\t\tthis.palyerRefresh(null, this._uid);\n\t}\n\t/** 预加载 */\n\tpreloadRes() {\n\t\tthis.getPreLoaderRes(FXJRes.Atlas_Game_CardNum.bundle, FXJRes.Atlas_Game_CardNum.path, SpriteAtlas);\n\t\tthis.getPreLoaderRes(FXJRes.Atlas_Player_Common.bundle, FXJRes.Atlas_Player_Common.path, SpriteAtlas);\n\n\t}\n\tstart() {\n\n\t};\n\t/** get uid */\n\tget UID() {\n\t\treturn this._uid;\n\t}\n\t/** set PosID */\n\tset PosID(posID) {\n\t\tthis._posID = posID;\n\t}\n\t/** get PosID */\n\tget PosID() {\n\t\treturn this._posID;\n\t}\n\n\tpublic initData(data) {\n\t\tif (data) {\n\t\t\tthis._posID = data.posID;\n\t\t\tthis._uid = data.uid;\n\t\t}\n\t\tif (!this.node || this.node.isValid == false) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._uid) {\n\t\t\tlet player = PlayerMgr.getInstance().findPlayerWithUserId(this._uid);\n\t\t\tif (player != null) {\n\t\t\t\tthis.palyerRefresh(null, this._uid);\n\t\t\t} else {\n\t\t\t\tthis.node.destroy();\n\t\t\t}\n\t\t}\n\t}\n\t/** 用户刷新 */\n\tpalyerRefresh(event, uid: number) {\n\t\tif (!uid || uid != this._uid) {\n\t\t\treturn;\n\t\t}\n\t\tlet player = PlayerMgr.getInstance().findPlayerWithUserId(uid);\n\t\tif (player) {\n\t\t\tthis._posID = CardUtil.calculatePlayerSeat(RoomMgr.getInstance().mySeatId,player.seatId);\n\n\t\t\tthis.infoBgPlayer.active = true;\n\t\t\tthis.nodeBtnMask.active = true;\n\t\t\tthis.updatePos();\n\t\t\tthis.updateUserHead(player.gameUserInfo.sex, player.gameUserInfo.avatar_s)\n\t\t\tthis.updateCoin(null, player.userId);\n\t\t}\n\t}\n\n\t//更新用户头像\n\tupdateUserHead(sex: number, url: string) {\n\t\tlet spriteLoad = this.headNode.getComponent(SpriteLoad);\n\t\tlet headArray = GCache.User.getUserHeadArray();\n\t\t\n\t\tif (!Utils.string_isEmpty(url)) {\n\t\t\tspriteLoad.setRemoteUrl(headArray.s)\n\t\t} else { \n\t\t\tif (sex == 2) {\n\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_girl.bundle, FXJRes.Picture_UserBigHead_girl.path);\n\t\t\t} else {\n\t\t\t\tspriteLoad.setLocalLoad(FXJRes.Picture_UserBigHead_boy.bundle, FXJRes.Picture_UserBigHead_boy.path);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**更新玩家银币*/\n\tupdateCoin(event = null, uid: number = null) {\n\t\tif (uid && uid == this._uid) {\n\t\t\tlet palyer = PlayerMgr.getInstance().findPlayerWithUserId(uid);\n\t\t\tthis.coinLabel.string = Utils.string_moneyToShortNumber(palyer ? palyer.money : 0);\n\t\t}\n\t}\n\n\t/** 更新当前位置 */\n\tupdatePos() {\n\t\tswitch (this._posID) {\n\t\t\tcase 0:\n\t\t\t\tthis.node.position = new Vec3(-530, -300, 0);\n\t\t\t\t// this.nodeDeposit.position = new Vec3(168, 200, 0);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.node.position = new Vec3(500, 5, 0);\n\t\t\t\t// this.nodeDeposit.position = new Vec3(-168, 245, 0);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.node.position = new Vec3(250, 200, 0);\n\t\t\t\t// this.nodeDeposit.position = new Vec3(0, 245, 0);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.node.position = new Vec3(-500, 5, 0);\n\t\t\t\t// this.nodeDeposit.position = new Vec3(168, 245, 0);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tmodifyPlayerDeposit(event, respData){\n\t\t// 自己托管不用显示托管标志\n\t\tif (respData.mid != null) {\n\t\t\tif (respData.mid == this._uid) {\n\t\t\t\tthis.nodeDeposit.active = respData.ai;\n\t\t\t}\n\t\t}\n\t}\n\n\t/** 通知:有玩家托管 */\n\tpalyerDeposit(event, uid:number) {\n\t\t// 自己托管不用显示托管标志\n\t\tif (uid != null) {\n\t\t\tif (uid == this._uid && this._uid != GCache.User.getUserMid()) {\n\t\t\t\tthis.nodeDeposit.active = true;\n\t\t\t}\n\t\t}\n\n\t\t// PlayerMgr.getInstance().updatePlayerAiStatus(respData.mid,respData.ai);\n\t}\n\n\t/** 玩家取消托管  不传值表示取消所有玩家的托管状态 */\n\tpalyerCancelDeposit(event, uid: number) {\n\t\tif (uid == null) {\n\t\t\tthis.nodeDeposit.active = false;\n\t\t\treturn;\n\t\t} else {\n\t\t\tif (uid == this._uid && this._uid != GCache.User.getUserMid()) {\n\t\t\t\tthis.nodeDeposit.active = false;\n\t\t\t}\n\t\t}\n\t}\n\tshowEmojMsg(event, body:FaceType){\n\t\t/*\n\t\tnodeUserPrefabCtr.ts:238 显示聊天气泡或表情 \n\t\t{mid: 9465533, faceValue: 65549, vipType: -1}\n\t\t*/\n\t\tif (this._uid !== body.mid) {\n\t\t\tthis.nodeEmoji.active = false;\n\t\t\treturn;\n\t\t}\n\t\tif (body.faceValue == null) { \n\t\t\treturn;\n\t\t}\n\t\tlet mojiIndex = body.faceValue - Math.pow(2, 16)\n\t\t\n\t\tlet aniName = FXJConstant.ChatEmojiAniConf[mojiIndex]\n\t\tif (aniName) {\n\t\t\t//表情\n\t\t\tthis.nodeEmoji.active = true;\n\t\t\tlet movex = 0;\n\t\t\t//表情动画\n\t\t\tlet emojiAni: inf_SpineAniCreate = {\n\t\t\t\tparentNode: this.nodeEmoji,\n\t\t\t\tresConf: FXJRes.Spine_Emoji,\n\t\t\t\taniName: aniName,\n\t\t\t\ttrackIndex: 0,\n\t\t\t\tisLoop: false,\n\t\t\t\tskin: null,\n\t\t\t\ttoPos: new Vec3(movex, 0, 0)\n\t\t\t}\n\t\t\tEventManager.dispatch(FXJEvent.SYS_ANI_PLAY, emojiAni);\n\t\t} else { \n\t\t\tconsole.warn(\"Err:不支持的快捷表情\",body)\n\t\t}\n\t}\n\n\n\t/** 显示聊天气泡或表情 */\n\tshowChatMsg(event, body:MsgType) {\n\t\t/*\n\t\t显示聊天气泡或表情 \n\t\tnodeUserPrefabCtr.ts:238 显示聊天气泡或表情 \n\t\t{mid: 2503717, msg: '退退退', index: 2}\n\t\t*/\n\t\tlet player:Common.IPlayerInfo = PlayerMgr.getInstance().findPlayerWithUserId(body.mid);\n\t\tif (this._uid !== body.mid) {\n\t\t\tthis.nodeChat.active = false;\n\t\t\treturn;\n\t\t}\n\t\tlet PosId:number = CardUtil.calculatePlayerSeat(RoomMgr.getInstance().mySeatId,player.seatId);\n\t\t//快捷聊天\n\t\tif (Utils.isNotNull(PosId, body.msg)) {\n\t\t\tthis.stopSchedulerOnce(this._handlerChatTextAutoHide);\n\t\t\tthis._handlerChatTextAutoHide = null;\n\t\t\tthis.nodeChat.active = true;\n\t\t\tlet childNameList = [\"right\", \"left\"];\n\t\t\tlet currowName = childNameList[0];\n\t\t\tif (PosId === 2 || PosId === 3) {\n\t\t\t\tcurrowName = childNameList[1];\n\t\t\t}\n\t\t\tlet parentNode = null;\n\t\t\tchildNameList.forEach((nodeName, key) => {\n\t\t\t\tlet pNode = this.nodeChat.getChildByName(nodeName);\n\t\t\t\tif (nodeName == currowName) {\n\t\t\t\t\tpNode.active = true;\n\t\t\t\t\tparentNode = pNode;\n\t\t\t\t} else {\n\t\t\t\t\tpNode.active = false;\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (!parentNode) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet bg = parentNode.getChildByName(\"bg\");\n\t\t\tlet label = bg?.getChildByName(\"Label\");\n\t\t\tif (label) {\n\t\t\t\tlabel.getComponent(Label).string = String(body.msg);\n\t\t\t}\n\t\t\tthis._handlerChatTextAutoHide = this.addSchedulerOnce(FXJConfig.ChatTextAutoHide, Utils.handler(this, this.hideChatText))\n\t\t}\n\n\t\t\n\n\t\t// if (body[\"msg_type\"] == FXJConstant.ChatMsgType.CHAT_MSG_EMOJI) {\n\t\t// \tlet msgData = Encrypt.JsonDecode(body[\"msg_data\"]);\n\t\t// \t//快捷聊天\n\t\t// \tif (Utils.isNotNull(msgData.index, msgData.data)) {\n\t\t// \t\tthis.stopSchedulerOnce(this._handlerChatTextAutoHide);\n\t\t// \t\tthis._handlerChatTextAutoHide = null;\n\n\t\t// \t\tthis.nodeChat.active = true;\n\n\t\t// \t\tlet childNameList = [\"right\", \"left\"];\n\t\t// \t\tlet currowName = childNameList[0];\n\t\t// \t\tif (player.PosID == 2) {\n\t\t// \t\t\tcurrowName = childNameList[1];\n\t\t// \t\t}\n\t\t// \t\tlet parentNode = null;\n\t\t// \t\tchildNameList.forEach((nodeName, key) => {\n\t\t// \t\t\tlet pNode = this.nodeChat.getChildByName(nodeName);\n\t\t// \t\t\tif (nodeName == currowName) {\n\t\t// \t\t\t\tpNode.active = true;\n\t\t// \t\t\t\tparentNode = pNode;\n\t\t// \t\t\t} else {\n\t\t// \t\t\t\tpNode.active = false;\n\t\t// \t\t\t}\n\t\t// \t\t})\n\t\t// \t\tif (!parentNode) {\n\t\t// \t\t\treturn;\n\t\t// \t\t}\n\t\t// \t\tlet bg = parentNode.getChildByName(\"bg\");\n\t\t// \t\tlet Label = bg?.getChildByName(\"Label\");\n\t\t// \t\tif (bg && player.OrnamentIds) {\n\t\t// \t\t\t//特殊聊天背景框\n\t\t// \t\t\tlet id = player.OrnamentIds[FXJConstant.OrnamentBagKind.CHAT_FRAME];\n\t\t// \t\t\tlet info = GCache.GoodsData.getGoodsByID(id);\n\t\t// \t\t\tif (info && info.item_res_url) {\n\t\t// \t\t\t\tthis.getPreLoaderRemoteRes(info.item_res_url, \".jpg\", (imageAsset) => {\n\t\t// \t\t\t\t\tif (!imageAsset) { //资源可能还在加载中\n\t\t// \t\t\t\t\t\treturn\n\t\t// \t\t\t\t\t}\n\t\t// \t\t\t\t\tif (!bg || bg.isValid == false) {\n\t\t// \t\t\t\t\t\treturn;\n\t\t// \t\t\t\t\t}\n\t\t// \t\t\t\t\tlet spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n\t\t// \t\t\t\t\tif (spriteFrame) {\n\t\t// \t\t\t\t\t\t//设置九宫格\n\t\t// \t\t\t\t\t\tspriteFrame.insetLeft = 40;\n\t\t// \t\t\t\t\t\tspriteFrame.insetRight = 25;\n\t\t// \t\t\t\t\t\tspriteFrame.insetBottom = 50;\n\t\t// \t\t\t\t\t\tspriteFrame.insetTop = 50;\n\t\t// \t\t\t\t\t\tlet spriteComponent = bg.getComponent(Sprite);\n\t\t// \t\t\t\t\t\tspriteComponent.spriteFrame = spriteFrame;\n\t\t// \t\t\t\t\t}\n\t\t// \t\t\t\t})\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t\tif (Label) {\n\t\t// \t\t\tLabel.getComponent(LabelComponent).string = String(msgData.data);\n\t\t// \t\t}\n\t\t// \t\tthis._handlerChatTextAutoHide = this.addSchedulerOnce(FXJConfig.ChatTextAutoHide, Utils.handler(this, this.hideChatText))\n\n\t\t// \t\t//音效\n\t\t// \t\tlet tag = \"\";\n\t\t// \t\tlet tags = String(msgData.index).split(\"_\");\n\t\t// \t\tif (tags && tags.length == 3) {\n\t\t// \t\t\ttag = msgData.index;\n\t\t// \t\t} else {\n\t\t// \t\t\tlet roleConfig = GCache.RoleList.getRoleInfoByID(player.RoleData[\"role_id\"]);\n\t\t// \t\t\tlet gender = 1;\n\t\t// \t\t\tif (Utils.table_isEmpty(roleConfig[0]) == false) {\n\t\t// \t\t\t\tgender = Utils.number_valueOf(roleConfig[0][\"Sex\"], gender);\n\t\t// \t\t\t}\n\t\t// \t\t\tlet sex = (gender == 1) ? \"_M\" : \"_W\";\n\t\t// \t\t\ttag = msgData.index + sex;\n\t\t// \t\t}\n\t\t// \t\tif (tag == \"\") {\n\t\t// \t\t\treturn;\n\t\t// \t\t}\n\t\t// \t\tlet audioPath = Utils.string_format(FXJSound.Quick.path, tag);\n\t\t// \t\tconsole.log(\"输出音效路径：===>\", audioPath)\n\t\t// \t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, { bundle: FXJSound.Quick.bundle, path: audioPath, })\n\n\t\t// \t} else if (Utils.isNotNull(msgData.index)) {\n\n\t\t// \t}\n\t\t// }\n\t};\n\t/** 隐藏快捷聊天 */\n\thideChatText() {\n\t\tif (this.nodeChat && this.nodeChat.isValid == true) {\n\t\t\tthis.nodeChat.active = false;\n\t\t}\n\t\tthis._handlerChatTextAutoHide = null;\n\t}\n\n\t//点击个人信息\n\tonClickUserInfo(event) {\n\t\tlet palyer = PlayerMgr.getInstance().findPlayerWithUserId(this._uid);\n\t\tif (!palyer) {\n\t\t\treturn;\n\t\t}\n\t\tEventManager.dispatch(FXJEvent.SYS_PLAY_EFFECT, FXJSound.CommClick);\n\t\tif (GCache.Desk.PlayType == FXJConstant.PlayType.MATCH) {\n\t\t\tEventManager.dispatch(FXJEvent.SYS_TOAST_TIP, { content: \"比赛中无法查看玩家信息\" });\n\t\t\treturn;\n\t\t}\n\t\tif (palyer.userId == GCache.User.getUserMid()) {\n\t\t\tEventManager.dispatch(FXJEvent.VIEW_UI_OPEN, FXJUIID.PlayerInfoCenter, null, null, null, true);\n\t\t} else {\n\t\t\tlet data = {\n\t\t\t\tuid: palyer.userId,\t\t\t\n\t\t\t\tposID: palyer.seatId,\n\t\t\t}\n\t\t\tEventManager.dispatch(FXJEvent.GAME_OPEN_POPUP, FXJUIID.GameHeadInfoPrefab, data, {});\n\t\t}\n\t}\n\n\t//玩家退出房间\n\tpalyerExit(event, uid: number = null) {\n\t\tif(Utils.isNotNull(uid)) {\n\t\t\tif (uid == this._uid) {\n\t\t\t\tthis.node.active = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tpalyerDingZhuang(event, seatId: number = null) {\n\t\tif(Utils.isNotNull(seatId)) {\n\t\t\tthis.nodeZhuang.active = CardUtil.calculatePlayerSeat(RoomMgr.getInstance().mySeatId,seatId) == this._posID;\n\t\t}\n\t\t\n\t}\n\n\t//销毁\n\tonDestroy() {\n\n\t};\n\n}\n\n"]}
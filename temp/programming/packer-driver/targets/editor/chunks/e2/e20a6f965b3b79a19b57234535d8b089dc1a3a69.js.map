{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/scripts/NodeUserCtr.ts"],"names":["Prefab","_decorator","BaseComponent","RoomMgr","FXJRes","CardUtil","NodeUserPrefabCtr","ccclass","property","menu","NodeUserCtr","userSeats","userNodes","onInitModuleEvent","onLoad","start","showUserView","data","self","getPreLoaderRes","Prefab_NodeUser","bundle","path","res","comp","getComponent","node","isValid","seatID","calculatePlayerSeat","getInstance","mySeatId","posID","indexOf","push","addChild","active","initData","console","log","forEach","onClickClose","event","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAC2BA,MAAAA,M,OAAAA,M;AAAQC,MAAAA,U,OAAAA,U;;AAC1BC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,iB,iBAAAA,iB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA8BR,U;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;6BAKaS,W,WAHZH,OAAO,CAAC,aAAD,C,UAEPE,IAAI,CAAC,yBAAD,C,+BAFL,MAGaC,WAHb;AAAA;AAAA,0CAG+C;AAAA;AAAA;AAAA,eACnCC,SADmC,GACb,EADa;AAAA,eAEnCC,SAFmC,GAEf,EAFe;AAAA;;AAG3C;AACUC,QAAAA,iBAAiB,GAAG,CAE7B;;AAEDC,QAAAA,MAAM,GAAG,CAER;;AAGDC,QAAAA,KAAK,GAAG,CAEP;;AAED;AACAC,QAAAA,YAAY,CAACC,IAAD,EAAO;AACf,cAAIC,IAAI,GAAG,IAAX;AACA,eAAKC,eAAL,CAAqB;AAAA;AAAA,gCAAOC,eAAP,CAAuBC,MAA5C,EAAoD;AAAA;AAAA,gCAAOD,eAAP,CAAuBE,IAA3E,EAAiFtB,MAAjF,EAA0FuB,GAAD,IAAS;AAC9F,gBAAIC,IAAuB,GAAGD,GAAG,CAACE,YAAJ;AAAA;AAAA,uDAA9B;;AACA,gBAAI,CAACP,IAAI,CAACQ,IAAN,IAAcR,IAAI,CAACQ,IAAL,CAAUC,OAAV,IAAqB,KAAvC,EAA8C;AAC1C;AACH;;AACD,gBAAIC,MAAc,GAAG;AAAA;AAAA,sCAASC,mBAAT,CAA6B;AAAA;AAAA,oCAAQC,WAAR,GAAsBC,QAAnD,EAA6Dd,IAAI,CAACe,KAAlE,CAArB;;AAEA,gBAAI,KAAKrB,SAAL,CAAesB,OAAf,CAAuBL,MAAvB,MAAmC,CAAC,CAAxC,EAA2C;AACvC,mBAAKjB,SAAL,CAAeuB,IAAf,CAAoBN,MAApB;AACAV,cAAAA,IAAI,CAACQ,IAAL,CAAUS,QAAV,CAAmBZ,GAAnB;AACA,mBAAKX,SAAL,CAAesB,IAAf,CAAoBX,GAApB;AACAA,cAAAA,GAAG,CAACa,MAAJ,GAAa,IAAb;AACAnB,cAAAA,IAAI,CAACe,KAAL,GAAaJ,MAAb;AACAJ,cAAAA,IAAI,CAACa,QAAL,CAAcpB,IAAd,EANuC,CAMnB;AACvB;;AACDqB,YAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA6C,KAAK3B,SAAlD;AACA,iBAAKA,SAAL,CAAe4B,OAAf,CAAuBd,IAAI,IAAI;AAC3BA,cAAAA,IAAI,CAACU,MAAL,GAAc,IAAd;AACH,aAFD,EAhB8F,CAsB9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEH,WAvCD;AAwCH;AAED;;;AACAK,QAAAA,YAAY,CAACC,KAAD,EAAoB,CAE/B;;AAED;AACAC,QAAAA,SAAS,GAAG,CAEX;;AAtE0C,O","sourcesContent":["\nimport { EventTouch, Node, Prefab, _decorator } from 'cc';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { RoomMgr } from '../cache/RoomMgr';\nimport { FXJRes } from '../common/FXJRes';\nimport { CardUtil } from '../util/CardUtil';\nimport { NodeUserPrefabCtr } from './NodeUserPrefabCtr';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = NodeUserCtr\n * URL = db://assets/package/game/scripts/NodeUserCtr.ts\n * Time = Mon Jul 31 2023 15:54:59 GMT+0800 (中国标准时间)\n * Author = harvyson\n *\n * Life: onLoad-->onInitModuleEvent-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * \n */\n\n@ccclass('NodeUserCtr')\n//方便编辑器识别的菜单项目\n@menu('prefab/game/NodeUserCtr')\nexport class NodeUserCtr extends BaseComponent {\n    private userSeats: number[] = [];\n    private userNodes: Node[] = [];\n    /** override 初始化模块事件 */\n    protected onInitModuleEvent() {\n\n    };\n\n    onLoad() {\n\n    };\n\n\n    start() {\n\n    };\n\n    /** 显示人物信息 */\n    showUserView(data) {\n        let self = this;\n        this.getPreLoaderRes(FXJRes.Prefab_NodeUser.bundle, FXJRes.Prefab_NodeUser.path, Prefab, (res) => {\n            let comp: NodeUserPrefabCtr = res.getComponent(NodeUserPrefabCtr);\n            if (!self.node || self.node.isValid == false) {\n                return;\n            }\n            let seatID: number = CardUtil.calculatePlayerSeat(RoomMgr.getInstance().mySeatId, data.posID);\n\n            if (this.userSeats.indexOf(seatID) === -1) {\n                this.userSeats.push(seatID);\n                self.node.addChild(res);\n                this.userNodes.push(res);\n                res.active = true;\n                data.posID = seatID;\n                comp.initData(data);//此处做刷新\n            }\n            console.log(\"showUserView__________________\",this.userNodes);\n            this.userNodes.forEach(node => {\n                node.active = true;\n            });\n\n\n\n            // comp.initData(data);//此处做刷新\n            // for (let i = 0; i < self.node.children.length; i++) {\n            // \tlet node = self.node.children[i];\n            // \tlet nodeComp = node.getComponent(NodeUserPrefabCtr);\n            // \tif (nodeComp.PosID == seatID) {\n            // \t\tnode.active = true;\n            // \t\tisAdd = true;\n            // \t\tcomp = nodeComp;\n            // \t\tbreak;\n            // \t}\n            // }\n\n            // if (isAdd == false) {\n\n            // }\n            // comp.node.active = true;\n\n        })\n    }\n\n    /** 点击了关闭 */\n    onClickClose(event: EventTouch) {\n\n    };\n\n    //销毁\n    onDestroy() {\n\n    };\n\n}\n\n"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/hall/scripts/buyDialogCtr.ts"],"names":["Label","Node","Sprite","SpriteAtlas","SpriteFrame","UITransform","_decorator","AppEvent","AppSound","GConstants","GameRes","Utils","resLoader","EventManager","BaseComponent","PayAgent","ccclass","property","menu","buyDialogCtr","tooltip","type","_needBackGoodList","_isSureNeedBack","_param","title","itemData","callFunc","isConfirm","preLoad","getPreLoaderRes","Atlas_DialogTitle","bundle","path","Atlas_Common1","onLoad","getCompParam","cloneItem","active","node_confirmBack","console","log","comp","node","getComponent","getParams","table_verify","start","updateView","updateTitle","string_isEmpty","titleKey","self","res","isValid","sprite_title","spriteFrame","spriteFrames","table_isEmpty","updateOnSureView","updateGoodInfoView","checkIsBack","resID","node_scrollContent","removeAllChildren","node_Scroll","node_ScrollView","node_sureconfirm","node_btnSure","node_btnClose","width","node_jiaZen","label_jiaZenGoosName","string","setSpriteFrame","node_jiaZenGoosImg","node_jiaZenGoosDesc","PayWay","currency","PayPrice","price","PayType","RMB","node_Exchange","label_Rmb","SILVER","FREE","TICKET","dispatch","SYS_TOAST_TIP","content","node_btnBuy","string_isHttp","loadRemote","ext","err","imageAsset","image_ImageAssetToSpriteFrame","label_sureName","nullToDefault","payGold","crystal","payData","iconUITransform","sprite_sureIcon","isRMB","height","label_surePrice","spriFrame_Diamond","setSpriteFrameByRemote","changeToNeedBackView","onClickBuy","event","SYS_PLAY_EFFECT","CommClick","destroy","onClickSure","onClickClose","onDestroy"],"mappings":"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","sourcesContent":["\nimport { EventTouch, Label, Node, ScrollView, Sprite, SpriteAtlas, SpriteFrame, UITransform, _decorator, instantiate } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { AppSound } from '../../../config/AppSound';\nimport { GConstants } from '../../../config/GameConstant';\nimport { GameRes } from '../../../config/GameRes';\nimport { Utils } from '../../../framework/Utils';\nimport { resLoader } from '../../../framework/loader/ResLoader';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nimport { PayAgent } from '../../../proj/PayAgent';\n\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = buyDialogCtr\n * Time = Wed Apr 13 2022 16:27:07 GMT+0800 (中国标准时间)\n * Author = Aby\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * 购买弹窗\n */\n\n@ccclass('buyDialogCtr')\n\n//方便编辑器识别的菜单项目\n@menu('vc/buyDialogCtr')\n\nexport class buyDialogCtr extends BaseComponent {\n\n    //标题sprite\n    @property({ tooltip: \"标题sprite\", type: Sprite })\n    private sprite_title: Sprite | null = null;\n\n    //滚动容器节点\n    @property({ tooltip: \"滚动容器节点\", type: Node })\n    private node_Scroll: Node | null = null;\n\n    //滚动容器View\n    @property({ tooltip: \"滚动容器View\", type: Node })\n    private node_ScrollView: Node | null = null;\n\n    //滚动容器内容父节点\n    @property({ tooltip: \"滚动容器内容父节点\", type: Node })\n    private node_scrollContent: Node | null = null;\n\n    //二次确认父节点\n    @property({ tooltip: \"二次确认父节点\", type: Node })\n    private node_sureconfirm: Node | null = null;\n    //二次确认价格\n    @property({ tooltip: \"二次确认价格\", type: Label })\n    private label_surePrice: Label | null = null;\n    //二次确认货币ICON\n    @property({ tooltip: \"二次确认货币ICON\", type: Sprite })\n    private sprite_sureIcon: Sprite | null = null;\n    //二次确认商品名称\n    @property({ tooltip: \"二次确认商品名称\", type: Label })\n    private label_sureName: Label | null = null;\n\n    //确认返还父节点\n    @property({ tooltip: \"确认返还父节点\", type: Node })\n    private node_confirmBack: Node | null = null;\n    //确认返还价格\n    @property({ tooltip: \"确认返还价格\", type: Label })\n    private label_confirmBackPrice: Label | null = null;\n    //确认返还货币ICON\n    @property({ tooltip: \"确认返还货币ICON\", type: Sprite })\n    private sprite_confirmBackIcon: Sprite | null = null;\n    //确认返还商品名称\n    @property({ tooltip: \"确认返还商品名称\", type: Label })\n    private label_confirmBackName: Label | null = null;\n\n    //点击关闭按钮节点\n    @property({ tooltip: \"点击关闭按钮节点\", type: Node })\n    private node_btnClose: Node | null = null;\n    //点击购买按钮节点\n    @property({ tooltip: \"点击购买按钮节点\", type: Node })\n    private node_btnBuy: Node | null = null;\n    //点击确定按钮节点\n    @property({ tooltip: \"点击确定按钮节点\", type: Node })\n    private node_btnSure: Node | null = null;\n\n    //兑换节点\n    @property({ tooltip: \"兑换节点\", type: Node })\n    private node_Exchange: Node | null = null;\n\n    //兑换icon节点\n    @property({ tooltip: \"兑换icon节点\", type: Sprite })\n    private sprite_ExchangeIcon: Sprite | null = null;\n    //兑换价格label\n    @property({ tooltip: \"兑换价格label\", type: Label })\n    private label_Exchange: Label | null = null;\n\n    //rmb购买节点\n    @property({ tooltip: \"rmb购买label\", type: Label })\n    private label_Rmb: Label | null = null;\n\n    /** 用于克隆的道具 */\n    @property({ tooltip: \"用于克隆的道具\", type: Node })\n    private cloneItem: Node | null = null;\n\n    //钻石Icon图片\n    @property({ tooltip: \"钻石Icon图片\", type: SpriteFrame })\n    private spriFrame_Diamond: SpriteFrame | null = null;\n\n    //金豆Icon图片\n    @property({ tooltip: \"金豆Icon图片\", type: SpriteFrame })\n    private spriFrame_Gold: SpriteFrame | null = null;\n\n    /** 加赠新的布局 */\n    /** 最外层节点 */\n    @property({ tooltip: \"加赠节点\", type: Node })\n    private node_jiaZen: Node | null = null;\n    /** 加赠加赠商品 */\n    @property({ tooltip: \"加赠商品\", type: Node })\n    private node_jiaZenGoos: Node | null = null;\n    /** 加赠商品名字 */\n    @property({ tooltip: \"加赠商品名字\", type: Label })\n    private label_jiaZenGoosName: Label | null = null;\n    /** 加赠商品图片 */\n    @property({ tooltip: \"加赠商品图片\", type: Node })\n    private node_jiaZenGoosImg: Node | null = null;\n    /** 加赠商品描述 */\n    @property({ tooltip: \"加赠商品图片\", type: Label })\n    private node_jiaZenGoosDesc: Label | null = null;\n\n    /** 需要返还的商品数据 */\n    private _needBackGoodList = [];\n    /** 是否确认过了返还 */\n    private _isSureNeedBack: boolean = false;\n    /** 商品数据 */\n    private _param = {\n        /** 标题 */\n        title: \"\",\n        /** s商品数据 */\n        itemData: null,\n        /** 点击的回调函数 */\n        callFunc: null,\n        /** 是否为确认购买的弹窗 */\n        isConfirm: false,\n    };\n    /** 预加载 */\n    preLoad() {\n        this.getPreLoaderRes(GameRes.Atlas_DialogTitle.bundle, GameRes.Atlas_DialogTitle.path, SpriteAtlas)\n        this.getPreLoaderRes(GameRes.Atlas_Common1.bundle, GameRes.Atlas_Common1.path, SpriteAtlas)\n    }\n    onLoad() {\n        this.preLoad();\n        this.getCompParam();\n        this.cloneItem.active = false;\n        this.node_confirmBack.active = false;\n        this._isSureNeedBack = false;\n        console.log(\"购买弹窗 参数内容:>>>\", this._param)\n    };\n\n    getCompParam() {\n        let comp = null;\n        comp = this.node.getComponent(\"DelegateComponent\")\n        if (comp) {\n            this._param = comp.getParams();\n        }\n        this._param = Utils.table_verify(this._param);\n    }\n    start() {\n        this.updateView();\n    };\n    //更新Title\n    updateTitle() {\n        if (Utils.string_isEmpty(this._param.title)) {\n            return;\n        }\n        let titleKey = `dialog_title/${this._param.title}`;\n        let self = this;\n        this.getPreLoaderRes(GameRes.Atlas_DialogTitle.bundle, GameRes.Atlas_DialogTitle.path, SpriteAtlas, (res) => {\n            if (self.node && self.node.isValid == true) {\n                self.sprite_title.spriteFrame = res.spriteFrames[titleKey];\n            }\n        })\n    }\n    //更新界面\n    updateView() {\n        this.updateTitle();\n        if (Utils.table_isEmpty(this._param.itemData)) {\n            return\n        }\n        if (this._param.isConfirm == true) {\n            this.updateOnSureView();\n        } else {\n            this.updateGoodInfoView();\n        }\n    }\n    /** 检测是否有返还 */\n    checkIsBack(resID) {\n    }\n    /** 更新加赠/物品列表详情界面 */\n    updateGoodInfoView() {\n        //判空确保有数据\n        this._param.itemData = Utils.table_verify(this._param.itemData);\n        this.node_scrollContent.removeAllChildren();\n        this.node_Scroll.active = true;\n        this.node_ScrollView.active = true;\n        this.node_scrollContent.active = true;\n        this.node_sureconfirm.active = false;\n        this.node_confirmBack.active = false;\n        this.node_btnSure.active = false;\n        this.node_btnClose.active = true;\n        this.node_scrollContent.getComponent(UITransform).width = 0;\n        console.log('有加赠的数据', this._param.itemData)\n        // \t//判断是否存在加赠信息\n        if (Utils.table_isEmpty(this._param.itemData[\"specialDesc\"])) {\n            //打开加赠节点\n            this.node_jiaZen.active = true;\n            //设置名称\n            this.label_jiaZenGoosName.string = this._param.itemData[\"name\"]\n            //设置图片\n            this.setSpriteFrame(this.node_jiaZenGoosImg, this._param.itemData[\"icon\"])\n            this.node_jiaZenGoosDesc.string = this._param.itemData[\"name\"] + \",\" + this._param.itemData[\"specialDesc\"];\n        } else {\n            this.node_jiaZen.active = false;\n        }\n        //金条支付 待完善\n        let PayWay = this._param.itemData.currency || 0\n        let PayPrice = this._param.itemData.price || 0\n        if (PayWay) {//商品价格\n            switch (PayWay) {\n                case GConstants.PayType.RMB:\n                    this.node_Exchange.active = false;\n                    this.label_Rmb.node.active = true;\n                    this.label_Rmb.string = `${PayPrice}元`;\n                    break;\n                case GConstants.PayType.SILVER:\n                    this.node_Exchange.active = false;\n                    this.label_Rmb.node.active = true;\n                    this.label_Rmb.string = `${PayPrice}银币`;\n                    break;\n                case GConstants.PayType.FREE:\n                    this.node_Exchange.active = false;\n                    this.label_Rmb.node.active = true;\n                    this.label_Rmb.string = \"免费\";\n                    break;\n                case GConstants.PayType.TICKET:\n                    this.node_Exchange.active = false;\n                    this.label_Rmb.node.active = true;\n                    this.label_Rmb.string = `${PayPrice}兑换券`;\n                    break;\n                default:\n                    EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: \"当前支付方式不存在\" })\n                    break;\n            }\n            this.node_btnBuy.active = true;\n            return;\n        } else {\n            this.node_btnBuy.active = true;\n        }\n    }\n\n    /**设置远端图片 */\n    setSpriteFrame(node, path) {\n        if (!path) {\n            return\n        }\n        if (Utils.string_isHttp(path)) {\n            let self = this;\n            resLoader.loadRemote(path, { ext: '.jpg' }, (err, imageAsset) => {\n                if (!imageAsset) { //资源可能还在加载中\n                    return\n                }\n                if (!self.node || self.node.isValid == false) {\n                    return;\n                }\n                let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n                if (spriteFrame) {\n                    node.getComponent(Sprite).spriteFrame = spriteFrame;\n                }\n            })\n        }\n    }\n    /** 更新确认购买的界面 */\n    updateOnSureView() {\n        this.node_jiaZen.active = false;\n        this.node_scrollContent.active = false;\n        this.node_sureconfirm.active = true;\n        this.node_btnBuy.active = false;\n        this.node_btnSure.active = true;\n        this.node_btnClose.active = true;\n        this.label_sureName.string = Utils.nullToDefault(this._param.itemData[\"name\"], \"\");\n        let payGold = this._param.itemData.crystal;\n        let payData = this._param.itemData.currency;\n        if (payData) {\n            let iconUITransform = this.sprite_sureIcon.node.getComponent(UITransform);\n            if (PayAgent.isRMB(payData)) {\n                iconUITransform.width = 0;\n                iconUITransform.height = 0;\n                this.label_surePrice.string = `${this._param.itemData.price}元`;\n            } else if (payData == GConstants.PayType.SILVER) {\n                this.label_surePrice.string = `${this._param.itemData.price}银币`;\n                this.sprite_sureIcon.spriteFrame = this.spriFrame_Diamond;\n                this.sprite_sureIcon.node.active = true;\n            } else {\n                iconUITransform.width = 0;\n                iconUITransform.height = 0;\n            }\n        }\n    }\n\n    /**设置远端图片 */\n    setSpriteFrameByRemote(node, path) {\n        if (!path) {\n            return\n        }\n        if (Utils.string_isHttp(path)) {\n            let self = this;\n            resLoader.loadRemote(path, { ext: '.jpg' }, (err, imageAsset) => {\n                if (!imageAsset) { //资源可能还在加载中\n                    return\n                }\n                if (!self.node || self.node.isValid == false) {\n                    return;\n                }\n                let spriteFrame = Utils.image_ImageAssetToSpriteFrame(imageAsset)\n                if (spriteFrame) {\n                    node.getComponent(Sprite).spriteFrame = spriteFrame;\n                }\n            })\n        }\n    }\n    /** 切换到确认返还界面 */\n    changeToNeedBackView() {\n        // 暂无返还的概念\n        // this.node_Scroll.active = false;\n        // this.node_sureconfirm.active = false;\n        // this.node_btnBuy.active = false;\n\n        // let txtGoodName = \"\";\n        // let num = 0;\n        // let ty = null;\n        // for (let i = 0; i < this._needBackGoodList.length; i++) {\n        //     let v = this._needBackGoodList[i];\n        //     txtGoodName = txtGoodName + \"[\" + v[\"item_name\"] + \"]\";\n        //     num = num + v[\"back_assets_number\"];\n        //     if (ty == null) {\n        //         ty = v[\"back_assets_type\"];\n        //     }\n        // }\n\n\n\n        // this.node_confirmBack.active = true;\n        // this.node_btnSure.active = true;\n        // this.addSchedulerOnce(2, () => {\n        //     this._isSureNeedBack = true;\n        // })\n\n    }\n    /** 点击购买按钮 */\n    onClickBuy(event: EventTouch) {\n        console.log('点击了购买按钮', this._param.callFunc, this._param.itemData)\n        EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n        // if (this._needBackGoodList.length > 0 && this._isSureNeedBack == false) {\n        // \tthis.changeToNeedBackView();\n        // \treturn;\n        // }\n        this.node.destroy();\n        if (this._param.callFunc) {\n            this._param.callFunc(this._param.itemData);\n        }\n    }\n    /** 点击确定按钮 */\n    onClickSure(event: EventTouch) {\n        EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n        this.node.destroy();\n        if (this._param.callFunc) {\n            this._param.callFunc(this._param.itemData);\n        }\n    }\n    /** 点击了关闭 */\n    onClickClose(event: EventTouch) {\n        EventManager.dispatch(AppEvent.SYS_PLAY_EFFECT, AppSound.CommClick);\n        this.node.destroy();\n    }\n    //销毁\n    onDestroy() {\n\n\t};\n}\n\n"]}
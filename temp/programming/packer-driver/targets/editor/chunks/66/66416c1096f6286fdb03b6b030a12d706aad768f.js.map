{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/activity/scripts/newPlayerBagCtr.ts"],"names":["Node","_decorator","GCache","AppEvent","EventManager","Utils","BaseComponent","ccclass","property","menu","newPlayerBagCtr","_mainData","_newPlayerConfig","onLoad","RedDot","update_reddot_newuserActivity","dispatchEvent","NET_REQ_NEW_PLAYER_GIFT_LIST","updateGiftList","onInitModuleEvent","addModelListener","ACTIVITY_UPDATE_NEW_PLAYER_GIFT","NET_FORWARD_NEW_PLAYER_REWARD","respNewPlayerReward","onEnable","start","event","isSuccess","respData","reqData","node","destroy","param","mainData","Activity","getNewPlayerActivityMain","isNull","table_verify","giftList","console","log","updateItem","onClick","e","custom","dispatch","NET_REQ_NEW_PLAYER_REWARD","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AACNC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA8BR,U;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;iCAOaS,e,WALZH,OAAO,CAAC,iBAAD,C,UAGPE,IAAI,CAAC,2BAAD,C,UAIHD,QAAQ,CAACR,IAAD,C,0CAPV,MAKaU,eALb;AAAA;AAAA,0CAKmD;AAAA;AAAA;;AAAA;;AAAA,eAKlDC,SALkD,GAKtC,IALsC;AAAA,eAOlDC,gBAPkD,GAO/B,IAP+B;AAAA;;AASlDC,QAAAA,MAAM,GAAG;AACR;AAAA;AAAA,gCAAOC,MAAP,CAAcC,6BAAd,GADQ,CAER;;AACA,eAAKC,aAAL,CAAmB;AAAA;AAAA,oCAASC,4BAA5B;AAEA,eAAKC,cAAL;AACA;;AACD;AACAC,QAAAA,iBAAiB,GAAG;AACnB;AACA,eAAKC,gBAAL,CAAsB;AAAA;AAAA,oCAASC,+BAA/B,EAAgE,KAAKH,cAArE,EAFmB,CAGnB;;AACA,eAAKE,gBAAL,CAAsB;AAAA;AAAA,oCAASE,6BAA/B,EAA8D,KAAKC,mBAAnE;AAGA;;AAEDC,QAAAA,QAAQ,GAAG,CAEV;;AAEDC,QAAAA,KAAK,GAAG,CAEP;;AAED;AACAF,QAAAA,mBAAmB,CAACG,KAAD,EAAQC,SAAR,EAAmBC,QAAnB,EAA6BC,OAA7B,EAAsC;AAExD,cAAIF,SAAJ,EAAe;AACd,iBAAKG,IAAL,CAAUC,OAAV;AACA;AACD,SAxCiD,CA0ClD;;;AACAb,QAAAA,cAAc,CAACQ,KAAa,GAAG,IAAjB,EAAuBM,KAAK,GAAG,IAA/B,EAAqC;AAClD;AACA,cAAIC,QAAQ,GAAG;AAAA;AAAA,gCAAOC,QAAP,CAAgBC,wBAAhB,EAAf;;AACA,cAAI;AAAA;AAAA,8BAAMC,MAAN,CAAaH,QAAb,CAAJ,EAA4B;AAC3B;AACA;;AACDA,UAAAA,QAAQ,GAAG;AAAA;AAAA,8BAAMI,YAAN,CAAmBJ,QAAnB,CAAX;;AACA,cAAI,CAAC;AAAA;AAAA,8BAAMG,MAAN,CAAaH,QAAQ,CAAC,WAAD,CAArB,CAAL,EAA0C;AACzC,gBAAIK,QAAQ,GAAGL,QAAQ,CAAC,WAAD,CAAvB;AACAM,YAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,QAA7B;AACA,iBAAKG,UAAL,CAAgBH,QAAhB;AACA;AACD;;AAEDG,QAAAA,UAAU,CAACH,QAAD,EAAgB,CAEzB;;AAGDI,QAAAA,OAAO,CAACC,CAAD,EAASC,MAAT,EAAyB;AAC/B,cAAIA,MAAM,IAAI,SAAd,EAAyB;AAAG;AAC3B;AAAA;AAAA,8CAAaC,QAAb,CAAsB;AAAA;AAAA,sCAASC,yBAA/B,EAA0D,CAA1D;AACA,iBAAKhB,IAAL,CAAUC,OAAV;AACA;AACD,SAnEiD,CAqElD;;;AACAgB,QAAAA,SAAS,GAAG,CACX;;AAvEiD,O;;;;;iBAGjC,I","sourcesContent":["\nimport { Node, _decorator } from 'cc';\nimport { GCache } from '../../../cache/GCache';\nimport { AppEvent } from '../../../config/AppEvent';\nimport { EventManager } from '../../../framework/manager/EventManager';\nimport { Utils } from '../../../framework/Utils';\nimport { BaseComponent } from '../../../framework/vc/BaseComponent';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = newPlayerBagCtr\n * URL = db://assets/resources/prefab/newPlayerBagCtr.ts\n * Time = Thu Apr 07 2022 17:23:43 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('newPlayerBagCtr')\n\n//方便编辑器识别的菜单项目\n@menu('prefab/activity/newPlater')\n\nexport class newPlayerBagCtr extends BaseComponent {\n\n\t@property(Node)\n\tmainNode: Node = null!;\n\t//数据\n\t_mainData = null;\n\t//配置\n\t_newPlayerConfig = null;\n\n\tonLoad() {\n\t\tGCache.RedDot.update_reddot_newuserActivity();\n\t\t//请求获取奖励道具\n\t\tthis.dispatchEvent(AppEvent.NET_REQ_NEW_PLAYER_GIFT_LIST)\n\n\t\tthis.updateGiftList()\n\t};\n\t//模块事件\n\tonInitModuleEvent() {\n\t\t//更新道具列表\n\t\tthis.addModelListener(AppEvent.ACTIVITY_UPDATE_NEW_PLAYER_GIFT, this.updateGiftList)\n\t\t//新手奖励/邀请奖励返回\n\t\tthis.addModelListener(AppEvent.NET_FORWARD_NEW_PLAYER_REWARD, this.respNewPlayerReward)\n\n\n\t}\n\n\tonEnable() {\n\n\t}\n\n\tstart() {\n\n\t};\n\n\t//新手奖励/邀请奖励返回\n\trespNewPlayerReward(event, isSuccess, respData, reqData) {\n\n\t\tif (isSuccess) {\n\t\t\tthis.node.destroy();\n\t\t}\n\t}\n\n\t//更新道具列表\n\tupdateGiftList(event: string = null, param = null) {\n\t\t// alert(\"收到消息，更新道具列表\")\n\t\tlet mainData = GCache.Activity.getNewPlayerActivityMain()\n\t\tif (Utils.isNull(mainData)) {\n\t\t\treturn\n\t\t}\n\t\tmainData = Utils.table_verify(mainData)\n\t\tif (!Utils.isNull(mainData[\"newPeople\"])) {\n\t\t\tlet giftList = mainData[\"newPeople\"]\n\t\t\tconsole.log(\"=======>>道具列表\", giftList);\n\t\t\tthis.updateItem(giftList);\n\t\t}\n\t}\n\n\tupdateItem(giftList: any) {\n\n\t}\n\n\n\tonClick(e: any, custom: string) {\n\t\tif (custom == \"getGift\") {  //点击领取礼包\n\t\t\tEventManager.dispatch(AppEvent.NET_REQ_NEW_PLAYER_REWARD, 1);\n\t\t\tthis.node.destroy();\n\t\t}\n\t}\n\n\t//销毁\n\tonDestroy() {\n\t};\n\n}\n\n"]}
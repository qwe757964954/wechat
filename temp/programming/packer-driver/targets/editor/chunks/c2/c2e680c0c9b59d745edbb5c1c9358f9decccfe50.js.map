{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/module/bugang/src/BugangBottom.ts"],"names":["Node","_decorator","EventManager","Utils","BaseComponent","RoomMgr","GameStatus","FXJEvent","FXJCMDHead","Card","ccclass","property","BugangBottom","_handlerTimeUpdate","onInitModuleEvent","onLoad","updateBuGangPai","resp","cardArray","leftCard","rightCard","cards","forEach","byte","index","setCardByte","node","off","EventType","TOUCH_END","on","event","opClick","startOperationTime","stopSchedulerOnce","timeOut","getInstance","getTimeOut","OPERATION","addSchedulerOnce","handler","resetView","active","info","card","sendMsg","cmd","C2S","USER_SELECT_FAN_GANG_PAI","body","dispatch","NET_SEND_MSG"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AACNC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,I,iBAAAA,I;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;8BAGaW,Y,WADZF,OAAO,CAAC,cAAD,C,UAENC,QAAQ;AAAA;AAAA,uB,UAGRA,QAAQ;AAAA;AAAA,uB,2BALV,MACaC,YADb;AAAA;AAAA,0CACgD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQ/CC,kBAR+C,GAQ1B,IAR0B;AAAA;;AAU/C;AACUC,QAAAA,iBAAiB,GAAG,CAE7B;;AAEDC,QAAAA,MAAM,GAAG,CAER;;AAEMC,QAAAA,eAAe,CAACC,IAAD,EAA+B;AACpD;AACA,gBAAMC,SAA0B,GAAG,CAAC,KAAKC,QAAN,EAAgB,KAAKC,SAArB,CAAnC;AACAH,UAAAA,IAAI,CAACI,KAAL,CAAWC,OAAX,CAAmB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACnC;AACAN,YAAAA,SAAS,CAACM,KAAD,CAAT,CAAiBC,WAAjB,CAA6BF,IAA7B;AACAL,YAAAA,SAAS,CAACM,KAAD,CAAT,CAAiBE,IAAjB,CAAsBC,GAAtB,CAA0B3B,IAAI,CAAC4B,SAAL,CAAeC,SAAzC;AACAX,YAAAA,SAAS,CAACM,KAAD,CAAT,CAAiBE,IAAjB,CAAsBI,EAAtB,CAAyB9B,IAAI,CAAC4B,SAAL,CAAeC,SAAxC,EAAoDE,KAAD,IAAW;AAC7D,mBAAKC,OAAL,CAAaT,IAAb;AACA,aAFD,EAEG,IAFH;AAGA,WAPD;AAQA,eAAKU,kBAAL;AACA;AACD;;;AACAA,QAAAA,kBAAkB,GAAG;AACpB,eAAKC,iBAAL,CAAuB,KAAKrB,kBAA5B;AACA,eAAKA,kBAAL,GAA0B,IAA1B;AACA,cAAIsB,OAAe,GAAG;AAAA;AAAA,kCAAQC,WAAR,GAAsBC,UAAtB,CAAiC;AAAA;AAAA,wCAAWC,SAA5C,CAAtB;AACA,eAAKzB,kBAAL,GAA0B,KAAK0B,gBAAL,CAAsBJ,OAAtB,EAA+B;AAAA;AAAA,8BAAMK,OAAN,CAAc,IAAd,EAAoB,KAAKC,SAAzB,CAA/B,CAA1B;AACA;;AACDA,QAAAA,SAAS,GAAG;AACX,eAAKf,IAAL,CAAUgB,MAAV,GAAmB,KAAnB;AACA,eAAKR,iBAAL,CAAuB,KAAKrB,kBAA5B;AACA,eAAKA,kBAAL,GAA0B,IAA1B;AACA;;AAEDmB,QAAAA,OAAO,CAACT,IAAD,EAAe;AACrB,cAAIoB,IAA4B,GAAG;AAAEC,YAAAA,IAAI,EAAErB;AAAR,WAAnC;AACA,cAAIsB,OAAO,GAAG;AACbC,YAAAA,GAAG,EAAE;AAAA;AAAA,0CAAWC,GAAX,CAAeC,wBADP;AAEbC,YAAAA,IAAI,EAAEN;AAFO,WAAd;AAIA;AAAA;AAAA,4CAAaO,QAAb,CAAsB;AAAA;AAAA,oCAASC,YAA/B,EAA6CN,OAA7C;AACA,eAAKnB,IAAL,CAAUgB,MAAV,GAAmB,KAAnB;AACA;;AArD8C,O;;;;;iBAEhB,I;;;;;;;iBAGC,I","sourcesContent":["\nimport { Node, _decorator } from 'cc';\nimport { EventManager } from '../../../../../framework/manager/EventManager';\nimport { Utils } from '../../../../../framework/Utils';\nimport { BaseComponent } from '../../../../../framework/vc/BaseComponent';\nimport { RoomMgr } from '../../../cache/RoomMgr';\nimport { GameStatus } from '../../../common/FXJConfig';\nimport { FXJEvent } from '../../../common/FXJEvent';\nimport { Game } from '../../../common/idl/Game';\nimport { FXJCMDHead } from '../../../net/FXJCmd';\nimport { Card } from '../../card/src/Card';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = BugangBottom\n * URL = db://assets/package/game/module/bugang/src/BugangBottom.ts\n * Time = Wed Aug 09 2023 21:31:35 GMT+0800 (中国标准时间)\n * Author = qwe757964\n *\n * Life: onLoad-->onInitModuleEvent-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * \n */\n\n@ccclass('BugangBottom')\nexport class BugangBottom extends BaseComponent {\n\t@property(Card)\n\tpublic leftCard: Card | null = null;;\n\n\t@property(Card)\n\tpublic rightCard: Card | null = null;\n\n\t/** 时间更新句柄 */\n\t_handlerTimeUpdate = null;\n\n\t/** override 初始化模块事件 */\n\tprotected onInitModuleEvent() {\n\n\t};\n\n\tonLoad() {\n\n\t};\n\n\tpublic updateBuGangPai(resp: Game.IUpdateFanGangPai) {\n\t\t//card\n\t\tconst cardArray: (Card | null)[] = [this.leftCard, this.rightCard];\n\t\tresp.cards.forEach((byte, index) => {\n\t\t\t// 执行循环体操作，element是当前元素的值\n\t\t\tcardArray[index].setCardByte(byte);\n\t\t\tcardArray[index].node.off(Node.EventType.TOUCH_END);\n\t\t\tcardArray[index].node.on(Node.EventType.TOUCH_END, (event) => {\n\t\t\t\tthis.opClick(byte);\n\t\t\t}, this);\n\t\t});\n\t\tthis.startOperationTime();\n\t}\n\t/** 开始更新时间 */\n\tstartOperationTime() {\n\t\tthis.stopSchedulerOnce(this._handlerTimeUpdate);\n\t\tthis._handlerTimeUpdate = null;\n\t\tlet timeOut: number = RoomMgr.getInstance().getTimeOut(GameStatus.OPERATION);\n\t\tthis._handlerTimeUpdate = this.addSchedulerOnce(timeOut, Utils.handler(this, this.resetView))\n\t}\n\tresetView() {\n\t\tthis.node.active = false;\n\t\tthis.stopSchedulerOnce(this._handlerTimeUpdate);\n\t\tthis._handlerTimeUpdate = null;\n\t}\n\n\topClick(byte: number) {\n\t\tlet info: Game.ISelectFanGangPai = { card: byte };\n\t\tlet sendMsg = {\n\t\t\tcmd: FXJCMDHead.C2S.USER_SELECT_FAN_GANG_PAI,\n\t\t\tbody: info,\n\t\t}\n\t\tEventManager.dispatch(FXJEvent.NET_SEND_MSG, sendMsg);\n\t\tthis.node.active = false;\n\t}\n\n}\n\n"]}
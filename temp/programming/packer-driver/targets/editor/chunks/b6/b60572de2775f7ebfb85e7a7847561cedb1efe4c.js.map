{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/scenes/main/mainSceneCtr.ts"],"names":["Node","setDisplayStats","_decorator","DEBUG","AppEvent","APPState","GameConfig","GConstants","UIConfigData","LayerManager","EventManager","SchedulerManager","Network","BaseComponent","Platform","GlobalHeadCmdBinding","GPBWriteAndRead","ccclass","property","menu","mainSceneCtr","nextScene","onLoad","unscheduleAll","dispatch","SYS_APP_LIFE","AppRunLife","MainScence","SYS_SHOW_OR_HIDE","SHOW","bg","active","logo","initBase","start","reload","gui","enterGameScene","onDestroy","VIEW_SCENE_TO_CHANGE","next","success","fail","name","console","log","instance","initUIConfig","Write","initCommonCmd","Read"],"mappings":"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","sourcesContent":["import { Node, setDisplayStats, _decorator } from 'cc';\nimport { DEBUG } from 'cc/env';\nimport { AppEvent } from '../../config/AppEvent';\nimport { APPState, GameConfig } from '../../config/GameConfig';\nimport { GConstants } from '../../config/GameConstant';\nimport { UIConfigData } from '../../config/UIConfig';\nimport { LayerManager } from '../../framework/layer/LayerManager';\nimport { EventManager } from '../../framework/manager/EventManager';\nimport { SchedulerManager } from '../../framework/manager/SchedulerManager';\nimport { Network } from '../../framework/network/NetState';\nimport { BaseComponent } from '../../framework/vc/BaseComponent';\nimport { Platform } from '../../platform/Platform';\nimport { GlobalHeadCmdBinding } from '../../proj/gnet/GlobalCMD';\nimport { GPBWriteAndRead } from '../../proj/gnet/GPBWriteAndRead';\nconst { ccclass, property, menu } = _decorator;\n\n\n\n/**\n * Name = mainSceneCtr\n * URL = db://assets/launcher/mainSceneCtr.ts\n * Time = Sat Apr 02 2022 17:39:10 GMT+0800 (中国标准时间)\n * Author = xueya\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('mainSceneCtr')\n\n//方便编辑器识别的菜单项目\n@menu('scenes/mainSceneCtr')\n\nexport class mainSceneCtr extends BaseComponent {\n\n    //游戏根节点\n    @property(Node)\n    gui: Node = null!;\n\n    //bg\n    @property(Node)\n    bg: Node = null!;\n\n    //logo\n    @property(Node)\n    logo: Node = null!;\n\n\n    nextScene: string;\n\n    onLoad() {\n        SchedulerManager.unscheduleAll();\n        //通知:sys周期变化\n        EventManager.dispatch(AppEvent.SYS_APP_LIFE, GConstants.AppRunLife.MainScence);\n        EventManager.dispatch(AppEvent.SYS_SHOW_OR_HIDE, APPState.SHOW)\n        this.bg.active = true\n        this.logo.active = true\n        this.initBase();\n        this.nextScene = \"runScene\"\n        //预加载\n        // director.preloadScene(this.nextScene);\n    };\n\n    start() {\n        LayerManager.reload(this.gui)\n        this.enterGameScene();\n\n    };\n\n    //销毁\n    onDestroy() {\n    };\n    //进入场景\n    enterGameScene() {\n        EventManager.dispatch(AppEvent.VIEW_SCENE_TO_CHANGE, {\n            next: this.nextScene,\n            success: () => {\n            },\n            fail: (name: string) => {\n                console.log(`进入场景${name}失败`)\n            }\n        })\n    };\n\n    //初始化基础配置\n    initBase() {\n        /**设置FPS是否显示 */\n        if (DEBUG) {\n            setDisplayStats(false);\n        };\n        Platform.initBase();\n        Network.instance;\n        GameConfig.instance;\n        LayerManager.initUIConfig(UIConfigData)\n        GPBWriteAndRead.Write.initCommonCmd(GlobalHeadCmdBinding, true)\n        GPBWriteAndRead.Read.initCommonCmd(GlobalHeadCmdBinding, true)\n    }\n}\n"]}
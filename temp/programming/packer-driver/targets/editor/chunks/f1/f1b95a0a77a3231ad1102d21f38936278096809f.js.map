{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/package/game/module/settle/src/BottomItem.ts"],"names":["Color","Label","Node","Sprite","SpriteAtlas","_decorator","Utils","RoomMgr","FXJRes","CardUtil","ListItem","NodeHead","ccclass","property","winningColor","losingColor","BottomItem","upDownMap","Map","onInitModuleEvent","updateItemProps","info","gameUserInfo","JSON","parse","strUserInfo","nodeHeadCtr","node_head","getComponent","updateUserHead","updateUserHeadBox","nick_name","string","nickName","money","winMoney","toString","bankruptcy_tag","node","active","nMoney","up_down","calculatePlayerPosition","getInstance","mySeatId","seatId","colorStr","bWin","normalColor","color","bgStr","frameBg","string_format","Prefab_Settle_Image","plistKey","getPreLoaderRes","bundle","path","atlas","bgAtlas","getSpriteFrame","player_bg","spriteFrame"],"mappings":"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","sourcesContent":["\nimport { Color, Label, Node, Sprite, SpriteAtlas, _decorator } from 'cc';\nimport { Utils } from '../../../../../framework/Utils';\nimport { RoomMgr } from '../../../cache/RoomMgr';\nimport { FXJRes } from '../../../common/FXJRes';\nimport { Common } from '../../../common/idl/Common';\nimport { Game } from '../../../common/idl/Game';\nimport { CardUtil } from '../../../util/CardUtil';\nimport ListItem from './list/ListItem';\nimport { NodeHead } from './NodeHead';\nconst { ccclass, property } = _decorator;\n\n/**\n * Name = BottomItem\n * URL = db://assets/package/game/module/settle/src/BottomItem.ts\n * Time = Tue Aug 08 2023 16:15:04 GMT+0800 (中国标准时间)\n * Author = qwe757964\n *\n * Life: onLoad-->onInitModuleEvent-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n * \n */\n\nconst winningColor: string = \"#D56D44\";\nconst losingColor: string = \"#6585CA\";\n\n@ccclass('BottomItem')\nexport class BottomItem extends ListItem {\n\t@property(Sprite)\n\tpublic player_bg: Sprite | null = null;\n\n\t@property(Label)\n\tpublic up_down: Label | null = null;\n\n\t@property(Label)\n\tpublic nick_name: Label | null = null;\n\n\t@property(Label)\n\tpublic money: Label | null = null;\n\n\t@property(Sprite)\n\tpublic bankruptcy_tag: Sprite | null = null;\n\n\t@property(Node)\n\tpublic node_head: Node | null = null;\n\n\t//code 对应的图集\n\tupDownMap = new Map<number, string>();\n\n\t/** override 初始化模块事件 */\n\tprotected onInitModuleEvent() {\n\n\t};\n\n\n\tupdateItemProps(info: Game.ITotalInfo) {\n\t\tlet gameUserInfo: Common.GameUserInfo = JSON.parse(info.strUserInfo)\n\t\tlet nodeHeadCtr = this.node_head.getComponent(NodeHead)\n\t\tnodeHeadCtr.updateUserHead(gameUserInfo);\n\t\tnodeHeadCtr.updateUserHeadBox(gameUserInfo);\n\n\t\tthis.nick_name.string = gameUserInfo.nickName;\n\t\tthis.money.string = info.winMoney.toString();\n\t\tthis.bankruptcy_tag.node.active = info.nMoney <= 0;\n\t\tthis.up_down.string = CardUtil.calculatePlayerPosition(RoomMgr.getInstance().mySeatId, info.seatId);\n\t\tconst colorStr: string = info.bWin === -1 ? losingColor : winningColor;\n\t\tlet normalColor = new Color(colorStr);\n\t\tthis.money.color = normalColor;\n\t\tlet bgStr: string = info.bWin === -1 ? \"player_fail_bg\" : \"player_win_bg\";\n\t\tlet frameBg = Utils.string_format(FXJRes.Prefab_Settle_Image.plistKey, bgStr);\n\n\t\tthis.getPreLoaderRes(FXJRes.Prefab_Settle_Image.bundle, FXJRes.Prefab_Settle_Image.path, SpriteAtlas, (atlas) => {\n\t\t\tif (!atlas) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet bgAtlas = atlas.getSpriteFrame(frameBg);\n\t\t\tif (bgAtlas) {\n\t\t\t\tthis.player_bg.spriteFrame = bgAtlas;\n\t\t\t}\n\t\t});\n\t}\n}\n\n"]}
{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/proj/ActivityController.ts"],"names":["ActivityController","GCache","AppEvent","GConstants","GameTxt","UIID","EventManager","Utils","BaseControll","GameRoomHelper","GlobalCMD","GlobalCMDHead","getInstance","_instance","constructor","name","reqBankUpFrom","init","clear","onInitModuleEvent","addModelListener","NET_REQ_NEW_PLAYER_CONFIG","reqNewPlayerActivity","NET_FORWARD_NEW_PLAYER_CONFIG","respNewPlayerActivity","NET_REQ_NEW_PLAYER_GIFT_LIST","reqNewPlayerActivityGiftList","NET_FORWARD_NEW_PLAYER_GIFT_LIST","respNewPlayerActivityGiftList","NET_REQ_NEW_PLAYER_REWARD","reqNewPlayerReward","NET_FORWARD_NEW_PLAYER_REWARD","respNewPlayerReward","NET_REQ_HOLIDAYS_GIFTPACKAGE","reqHolidaysGiftPackage","NET_FORWARD_HOLIDAYS_GIFTPACKAGE","respHolidaysGiftPackage","NET_REQ_SIGNIN_CONFIG","reqSigninConfig","NET_FORWARD_SIGNIN_CONFIG","respSigninConfig","NET_REQ_SIGNIN_AWARD","reqSignin","NET_FORWARD_SIGNIN_AWARD","respSignin","NET_REQ_SIGNIN_CONTINU_AWARD","reqContinusAward","NET_FORWARD_SIGNIN_CONTINU_AWARD","respSignContinusAward","NET_REQ_BANKRUPT_GIFT_CONF","reqBankUpGiftConf","NET_RESP_BANKRUPT_GIFT_CONF","respBankUpGiftConf","NET_REQ_BANKRUPT_CONFIG","reqBankUpData","NET_RESP_BANKRUPT_CONFIG","respBankUpData","NET_REQ_BANKRUPT_COUNT","reqBankUpCount","NET_RESP_BANKRUPT_COUNT","respBankUpCount","NET_FORWARD_BANKRUPT_TOAST","receiveBankUpToast","NET_REQ_BANKRUPT","reqBankUpMoney","NET_RESP_BANKRUPT","respBankUpMoney","NET_REQ_FIRST_PAY_CONFIG","reqFirstPayConfig","NET_RESP_FIRST_PAY_CONFIG","respFirstPayConfig","event","sendMsg","cmd","PHP_ACTIVITY_PULL_NEW_PEOPLE_GET_CFG","body","dispatch","NET_SEND_MSG","isSuccess","respData","reqData","PHP_ACTIVITY_PULL_NEW_PEOPLE_LIST","dump","Activity","updateNewPlayerActivityMain","ACTIVITY_UPDATE_NEW_PLAYER_GIFT","string_isEmpty","SYS_TOAST_TIP","content","types","code","isNull","PHP_ACTIVITY_PULL_NEW_PEOPLE_GET_REWARD_NEW","type","reqArray","awardData","Object","prototype","hasOwnProperty","call","data","icon","num","push","VIEW_UI_OPEN","GongXiHuoDePrefab","gameID","levelID","console","log","PHP_GET_BANKRUPTPACK","gameid","levelid","newBankruptGiftData","isTrueData","splice","BankrupData","updateNewBankUpGiftConf","checkShowBankruptParam","toData","checkShowBankruptView","SEND_BANKRUPT_CONFIG","updateBankruptConfig","hasShard","isCanCheckUpdateCount","SEND_BANKRUPT_COUNT","mid","User","getUserMid","updateLastTimeBankUpCount","isLoginSuccesed","setCurBankruptInfo","isPayUser","getIsPayUser","setIdentity","UserIdentity","Rmb","Normal","setVipTime","RmbAndVip","Vip","reqBankUpToast","curBankruptCount","PHP_BANKRUPT_TOAST","id","bankToast","print","param","isMineBankrupt","bank_receive_fail","isBankruptRewardRemain","bankruptErrTips2","SEND_BANKRUPT_MONEY","packetInfo","flag","brokeMoney","curBankruptReward","moneyType","Desk","MoneyTypeID","money","number_valueOf","updateUserMoneyByID","string_format","bank_receive_success","errType","ACTIVITY_BANKUP_BACK","PHP_SIGNINAWARD_SIGNINDATA","updateSigninData","ACTIVITY_UPDATE_SIGNIN_CONF","day","PHP_SIGNINAWARD_NEWSIGNIN","isBuSignin","isAdSignin","updateSigninBySuccess","obj","arr","PHP_SIGNINAWARD_CONTINUAWARD","setContinusAwardDay","getContinusAwardDay","updateContinusAward","isNotNull","PHP_HOLIDAYS_GIFTPACKAGE","updateHolidaysGiftPackage","ACTIVITY_UPDATE_HOLIDAYSGIFTPACKAGE","PHP_FIRST_PAY_CONFIG","updateFirstPayPackage","ACTIVITY_UPDATE_FIRSTPAY_CONF"],"mappings":"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","sourcesContent":["/**\n * Name = ActivityController\n * URL = db://assets/proj/ActivityController.ts\n * Time = Wed Jun 22 2022 19:03:18 GMT+0800 (中国标准时间)\n * Author = xueya\n * 活动控制器\n */\n\nimport { GCache } from \"../cache/GCache\";\nimport { AppEvent } from \"../config/AppEvent\";\nimport { GConstants } from \"../config/GameConstant\";\nimport { GameTxt } from \"../config/GameTxt\";\nimport { UIID } from \"../config/UIConfig\";\nimport { inf_GetPropItem } from \"../framework/InterfaceDefines\";\nimport { EventManager } from \"../framework/manager/EventManager\";\nimport { Utils } from \"../framework/Utils\";\nimport { BaseControll } from \"../framework/vc/BaseController\";\nimport { GameRoomHelper } from \"./GameRoomHelper\";\nimport { GlobalCMD, GlobalCMDHead } from \"./gnet/GlobalCMD\";\n\n\nexport class ActivityController extends BaseControll {\n    private static _instance = null;\n    public static getInstance(): ActivityController {\n        if (!this._instance || this._instance == null) {\n            this._instance = new ActivityController(\"ActivityController\");\n        }\n        return this._instance;\n    }\n    //破产来自:\n    reqBankUpFrom = null;\n    //实例化\n    constructor(name: string) {\n        super(name)\n    };\n    public static init(): ActivityController {\n        if (this._instance) {\n            this._instance.clear()\n        }\n        this._instance = null\n        ActivityController.getInstance();\n        return\n    }\n\n    /**初始化添加事件绑定 */\n    protected onInitModuleEvent(): void {\n        //请求新手活动信息\n        this.addModelListener(AppEvent.NET_REQ_NEW_PLAYER_CONFIG, this.reqNewPlayerActivity)\n        //新手活动信息返回\n        this.addModelListener(AppEvent.NET_FORWARD_NEW_PLAYER_CONFIG, this.respNewPlayerActivity)\n        //请求新手活动奖励列表\n        this.addModelListener(AppEvent.NET_REQ_NEW_PLAYER_GIFT_LIST, this.reqNewPlayerActivityGiftList)\n        //新手活动奖励列表返回\n        this.addModelListener(AppEvent.NET_FORWARD_NEW_PLAYER_GIFT_LIST, this.respNewPlayerActivityGiftList)\n\n        //请求新手奖励/邀请奖励\n        this.addModelListener(AppEvent.NET_REQ_NEW_PLAYER_REWARD, this.reqNewPlayerReward)\n        //新手奖励/邀请奖励返回\n        this.addModelListener(AppEvent.NET_FORWARD_NEW_PLAYER_REWARD, this.respNewPlayerReward)\n        //请求限时折扣\n        this.addModelListener(AppEvent.NET_REQ_HOLIDAYS_GIFTPACKAGE, this.reqHolidaysGiftPackage)\n        //限时折扣返回\n        this.addModelListener(AppEvent.NET_FORWARD_HOLIDAYS_GIFTPACKAGE, this.respHolidaysGiftPackage)\n\n        //请求签到配置数据\n        this.addModelListener(AppEvent.NET_REQ_SIGNIN_CONFIG, this.reqSigninConfig)\n        //请求签到配置数据返回\n        this.addModelListener(AppEvent.NET_FORWARD_SIGNIN_CONFIG, this.respSigninConfig)\n        //请求签到\n        this.addModelListener(AppEvent.NET_REQ_SIGNIN_AWARD, this.reqSignin)\n        //请求签到返回\n        this.addModelListener(AppEvent.NET_FORWARD_SIGNIN_AWARD, this.respSignin)\n        //请求连续签到奖励\n        this.addModelListener(AppEvent.NET_REQ_SIGNIN_CONTINU_AWARD, this.reqContinusAward)\n        //请求连续签到奖励返回\n        this.addModelListener(AppEvent.NET_FORWARD_SIGNIN_CONTINU_AWARD, this.respSignContinusAward)\n\n        /************************破产礼包相关************************/\n        //请求新版破产礼包配置\n        this.addModelListener(AppEvent.NET_REQ_BANKRUPT_GIFT_CONF, this.reqBankUpGiftConf)\n        //返回新版破产礼包配置\n        this.addModelListener(AppEvent.NET_RESP_BANKRUPT_GIFT_CONF, this.respBankUpGiftConf)\n\n        /************************破产相关************************/\n        //请求获取破产线\n        this.addModelListener(AppEvent.NET_REQ_BANKRUPT_CONFIG, this.reqBankUpData)\n        //返回获取破产线\n        this.addModelListener(AppEvent.NET_RESP_BANKRUPT_CONFIG, this.respBankUpData)\n\n        //请求获取破产次数\n        this.addModelListener(AppEvent.NET_REQ_BANKRUPT_COUNT, this.reqBankUpCount)\n        //返回获取破产次数\n        this.addModelListener(AppEvent.NET_RESP_BANKRUPT_COUNT, this.respBankUpCount)\n        //破产文案显示\n        this.addModelListener(AppEvent.NET_FORWARD_BANKRUPT_TOAST, this.receiveBankUpToast)\n\n        //请求救济金\n        this.addModelListener(AppEvent.NET_REQ_BANKRUPT, this.reqBankUpMoney)\n        //返回用户破产请求\n        this.addModelListener(AppEvent.NET_RESP_BANKRUPT, this.respBankUpMoney)\n\n        //请求首充礼包配置\n        this.addModelListener(AppEvent.NET_REQ_FIRST_PAY_CONFIG, this.reqFirstPayConfig)\n        //请求首充礼包配置返回\n        this.addModelListener(AppEvent.NET_RESP_FIRST_PAY_CONFIG, this.respFirstPayConfig)\n\n    }\n\n\n    //请求新手活动信息\n    reqNewPlayerActivity(event) {\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_ACTIVITY_PULL_NEW_PEOPLE_GET_CFG,\n            body: null,\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n\n    //新手活动信息返回\n    respNewPlayerActivity(event, isSuccess, respData, reqData) {\n    }\n    //请求新手活动奖励列表\n    reqNewPlayerActivityGiftList(event) {\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_ACTIVITY_PULL_NEW_PEOPLE_LIST,\n            body: null,\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n    //新手活动奖励列表返回\n    respNewPlayerActivityGiftList(event, isSuccess, respData, reqData) {\n        this.dump(respData, \"新手活动奖励列表返回\" + isSuccess)\n\n        if (isSuccess) {\n            GCache.Activity.updateNewPlayerActivityMain(respData)\n            EventManager.dispatch(AppEvent.ACTIVITY_UPDATE_NEW_PLAYER_GIFT)\n\n        } else {\n            if (respData && !Utils.string_isEmpty(respData[\"errorTips\"])) {\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: respData[\"errorTips\"] })\n            }\n        }\n    }\n\n    //请求新手奖励/邀请奖励\n    reqNewPlayerReward(event, types, code) {\n        if (Utils.isNull(types)) {\n            return\n        }\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_ACTIVITY_PULL_NEW_PEOPLE_GET_REWARD_NEW,\n            body: {\n                type: types,\n                code: code,\n            },\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n    //新手奖励/邀请奖励返回\n    respNewPlayerReward(event, isSuccess, respData, reqData) {\n        this.dump(respData, \"新手奖励/邀请奖励返回\" + isSuccess)\n        if (isSuccess) {\n            let reqArray = {\n                type: reqData[\"type\"],\n                code: reqData[\"code\"],\n            }\n            let awardData: Array<inf_GetPropItem> = [];\n            for (let type in respData) {\n                if (Object.prototype.hasOwnProperty.call(respData, type)) {\n                    let data: inf_GetPropItem = {\n                        icon: respData[type][\"gicon\"],\n                        name: respData[type][\"gname\"],\n                        num: respData[type][\"gnum\"],\n                    }\n                    awardData.push(data);\n                }\n            }\n            //通知:恭喜获得\n            EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.GongXiHuoDePrefab, awardData)\n            this.reqNewPlayerActivityGiftList(null)\n        } else {\n            if (respData && !Utils.string_isEmpty(respData[\"errorTips\"])) {\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: respData[\"errorTips\"] })\n            }\n        }\n    }\n    /**\n     * 请求破产礼包配置，不传时，返回是否有破产礼包 有值时，返回游戏指定场次的破产礼包信息\n     * @param event \n     * @param gameID 游戏ID\n     * @param levelID 房间level\n     */\n    protected reqBankUpGiftConf(event = null, gameID: number = null, levelID: number = null) {\n        console.log('广播:请求破产礼包')\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_GET_BANKRUPTPACK,\n\n            body: { gameid: gameID, levelid: levelID },\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n\n    /** 返回破产礼包配置 */\n    protected respBankUpGiftConf(event, isSuccess, respData, reqData) {\n        this.dump(\"返回破产礼包\" + isSuccess, respData,)\n        this.dump(\"广播:respData=>\", respData,)\n        let newBankruptGiftData = {};\n        let isTrueData = false;\n        if (isSuccess && respData) {\n            if (respData[\"giftPack\"]) {\n                newBankruptGiftData = respData;\n                if (respData[\"goods\"] && respData[\"goods\"][\"id\"] != null) {\n                    //破产首冲礼包，读取破产首充商品信息，不是大厅的首充商品信息\n                    newBankruptGiftData[\"isFirstPay\"] = true;\n                    newBankruptGiftData[\"goodsId\"] = respData[\"goods\"][\"id\"]; //礼包对应的商品id\n                    newBankruptGiftData[\"giftPack\"].splice(0, 0, respData[\"goods\"]);\n                }\n                isTrueData = true;\n            }\n\n        }\n        //更新礼包配置\n        GCache.BankrupData.updateNewBankUpGiftConf(newBankruptGiftData);\n        if (isTrueData && GameRoomHelper.checkShowBankruptParam) {\n            let toData = GameRoomHelper.checkShowBankruptParam;\n            GameRoomHelper.checkShowBankruptView(toData[\"gameID\"], toData[\"levelID\"], toData[\"moneyID\"], toData[\"status\"], toData[\"time\"])\n        }\n        GameRoomHelper.checkShowBankruptParam = null;\n    }\n    /** 请求破产信息 */\n    protected reqBankUpData(event = null) {\n        this.dump(\"请求破产线数据\")\n        let sendMsg = {\n            cmd: GlobalCMDHead.SEND_BANKRUPT_CONFIG,\n            body: null,\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n\n    /** 返回破产线 */\n    protected respBankUpData(event = null, respData = null) {\n        this.dump(respData, \"破产线数据返回\")\n        if (respData) {\n            GCache.BankrupData.updateBankruptConfig(respData);\n            this.reqBankUpCount();\n        }\n    }\n    /** 请求获取破产次数 */\n    protected reqBankUpCount(event = null, hasShard: number = 0) {\n        this.dump(\"请求获取破产次数\")\n        if (GCache.BankrupData.isCanCheckUpdateCount() == false) {\n            return;\n        }\n        let sendMsg = {\n            cmd: GlobalCMDHead.SEND_BANKRUPT_COUNT,\n            body: { mid: GCache.User.getUserMid(), hasShard: hasShard },\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n        GCache.BankrupData.updateLastTimeBankUpCount();\n    }\n\n    /** 返回获取破产次数 */\n    protected respBankUpCount(event = null, respData = null) {\n        this.dump(respData, \"获取破产次数返回\")\n        if (respData) {\n            if (GCache.User.isLoginSuccesed() == false) {\n                return;\n            }\n            GCache.BankrupData.setCurBankruptInfo(respData);\n            let isPayUser = GCache.User.getIsPayUser();\n            if (respData[\"vipExpires\"] == 0 || respData[\"vipExpires\"] < -1) {//过期\n                if (isPayUser) {\n                    GCache.User.setIdentity(GConstants.UserIdentity.Rmb);\n                } else {\n                    GCache.User.setIdentity(GConstants.UserIdentity.Normal);\n                }\n                GCache.User.setVipTime(0);\n            } else {//没有过期\n                if (isPayUser) {\n                    GCache.User.setIdentity(GConstants.UserIdentity.RmbAndVip);\n                } else {\n                    GCache.User.setIdentity(GConstants.UserIdentity.Vip);\n                }\n                GCache.User.setVipTime(respData[\"vipExpires\"]);\n            }\n            this.reqBankUpToast(null, GCache.BankrupData.curBankruptCount);\n\n        }\n    }\n    /** 请求破产文案 */\n    protected reqBankUpToast(event = null, num = null) {\n        if (Utils.isNull(num)) {\n            return;\n        }\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_BANKRUPT_TOAST,\n            body: { id: num },\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n    /** 破产文案显示 */\n    protected receiveBankUpToast(event, isSuccess, respData, reqData) {\n        if (isSuccess) {\n            if (respData[\"info\"]) {\n                GCache.BankrupData.bankToast = respData[\"info\"][\"copywriting\"];\n                this.print(\"破产文案内容：\", GCache.BankrupData.bankToast)\n            }\n        }\n    }\n    /** 领取破产救济金 */\n    protected reqBankUpMoney(event = null, param = null) {\n        this.print(\"主动点击领取破产救济金===>\");\n        if (GCache.BankrupData.isMineBankrupt() == false) {\n            if (param == null) {\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.bank_receive_fail });\n            }\n            return;\n        }\n        if (GCache.BankrupData.isBankruptRewardRemain() == false) {//补助已领取完毕\n            if (param == null) {\n                EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: GameTxt.bankruptErrTips2 });\n            }\n            return;\n        }\n        this.reqBankUpFrom = param;\n\n        let sendMsg = {\n            cmd: GlobalCMDHead.SEND_BANKRUPT_MONEY,\n            body: { mid: GCache.User.getUserMid() },\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n    /** 破产返回 */\n    protected respBankUpMoney(event = null, respData = null) {\n        this.dump(\"领取破产救济金返回==>\", respData)\n        if (respData) {\n            let packetInfo = {\n                \"flag\": respData[\"flag\"],                  //请求破产是否成功(1.成功 0失败)\n                \"brokeMoney\": respData[\"brokeMoney\"],      //破产领取的钱数\n                \"money\": respData[\"money\"],                //用户当前的钱数\n                \"errType\": respData[\"errType\"],            //失败原因：1、server记没有破产2、已经领取完了所有破产奖励3、还没有到领取破产奖励的时间4、其他原因 \n            };\n            let isSuccess = (packetInfo.flag == 1);\n\n            let content = GCache.BankrupData.bankToast;\n\n            if (isSuccess && packetInfo.brokeMoney > 0) {\n                GCache.BankrupData.curBankruptReward = packetInfo.brokeMoney;\n                let moneyType = 0;\n                if (GCache.Desk) {\n                    moneyType = GCache.Desk.MoneyTypeID\n                }\n                let money = Utils.number_valueOf(packetInfo.money) + Utils.number_valueOf(packetInfo.brokeMoney);\n                GCache.User.updateUserMoneyByID(moneyType, money);\n                content = Utils.string_format(GameTxt.bank_receive_success, packetInfo.brokeMoney);\n\n            } else {\n                this.print(\"领取破产救济金失败！失败原因: \" + packetInfo.errType)\n                if (this.reqBankUpFrom == null) {\n                    content = GameTxt[`\"bankruptErrTips\"${packetInfo.errType}`];\n                }\n            }\n            //刷新破产次数\n            this.reqBankUpCount();\n            //显示破产吐司文案\n            this.print(\"显示破产吐司: \", content);\n            EventManager.dispatch(AppEvent.SYS_TOAST_TIP, { content: content });\n            //通知破产结果\n            EventManager.dispatch(AppEvent.ACTIVITY_BANKUP_BACK, isSuccess, packetInfo);\n        }\n        this.reqBankUpFrom = null;\n    }\n\n\n    //请求签到配置数据\n    reqSigninConfig(event) {\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_SIGNINAWARD_SIGNINDATA,\n            body: null,\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n    //请求签到配置数据返回\n    respSigninConfig(event, isSuccess, respData, reqData) {\n        this.dump(respData, \"请求签到配置数据返回\" + isSuccess)\n        if (isSuccess) {\n            GCache.Activity.updateSigninData(respData)\n            //签到配置数据有更新\n            EventManager.dispatch(AppEvent.ACTIVITY_UPDATE_SIGNIN_CONF)\n        }\n    }\n\n    //请求签到\n    reqSignin(event, day: number = 0) {\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_SIGNINAWARD_NEWSIGNIN,\n            body: {\n                day: day,\n                isBuSignin: false,\n                isAdSignin: false,\n            },\n        }\n        this.print(\"reqSignin\", sendMsg);\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n\n    //签到返回\n    respSignin(event, isSuccess, respData, reqData) {\n        this.dump(respData, \"签到返回\" + isSuccess)\n        if (isSuccess) {\n            let data = GCache.Activity.updateSigninBySuccess(respData)\n            if (data != null) {\n                let obj = {\n                    icon: data.icon,\n                    name: data.name,\n                    num: data.num\n                }\n                let arr = []\n                arr.push(obj)\n                EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.GongXiHuoDePrefab, arr)\n            }\n        }\n    }\n\n    // 请求连续奖励\n    reqContinusAward(event, day: number = 0) {\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_SIGNINAWARD_CONTINUAWARD,\n            body: {\n                day: day,\n            },\n        }\n        this.print(\"reqContinusAward\", sendMsg);\n        GCache.Activity.setContinusAwardDay(day);\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n\n    // 连续签到领取奖励返回\n    respSignContinusAward(event, isSuccess, respData, reqData) {\n        this.dump(respData, \"连续签到领取奖励返回\" + isSuccess)\n        if (isSuccess) {\n            this.print(\"respSignContinusAward\", respData)\n            let day = GCache.Activity.getContinusAwardDay();\n            let data = GCache.Activity.updateContinusAward(respData, day)\n            if (Utils.isNotNull(data)) {\n                let obj = {\n                    icon: data.icon,\n                    name: data.name,\n                    num: data.num\n                }\n                let arr = []\n                arr.push(obj)\n                EventManager.dispatch(AppEvent.VIEW_UI_OPEN, UIID.GongXiHuoDePrefab, arr)\n            }\n        }\n    }\n    //请求限时折扣\n    reqHolidaysGiftPackage(event) {\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_HOLIDAYS_GIFTPACKAGE,\n            body: null,\n        }\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n\n    //限时折扣返回\n    respHolidaysGiftPackage(event, isSuccess, respData, reqData) {\n        console.log(\"限时折扣返回\", respData, isSuccess, reqData)\n        if (isSuccess) {\n            GCache.Activity.updateHolidaysGiftPackage(respData)\n        }\n        //限时折扣有更新\n        EventManager.dispatch(AppEvent.ACTIVITY_UPDATE_HOLIDAYSGIFTPACKAGE);\n    }\n\n    //请求首充配置数据\n    reqFirstPayConfig(event) {\n        let sendMsg = {\n            cmd: GlobalCMD.PHP_FIRST_PAY_CONFIG,\n            body: null,\n        }\n        console.log(\"请求首充数据\", sendMsg)\n        EventManager.dispatch(AppEvent.NET_SEND_MSG, sendMsg)\n    }\n    //请求首充配置数据返回\n    respFirstPayConfig(event, isSuccess, respData, reqData) {\n        console.log(\"请求首充数据返回\", isSuccess, respData, reqData);\n        if (isSuccess) {\n            GCache.Activity.updateFirstPayPackage(respData);\n            //首充配置数据有更新\n            EventManager.dispatch(AppEvent.ACTIVITY_UPDATE_FIRSTPAY_CONF);\n        }\n    }\n\n}\n\n"]}
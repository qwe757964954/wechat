{"version":3,"sources":["file:///Users/mac/work/WXGame_FlySmallChick/assets/framework/vc/NetLoadingComponent.ts"],"names":["Node","sp","_decorator","DelegateComponent","BaseComponent","ccclass","property","menu","NetLoadingComponent","tooltip","type","Skeleton","_countTime","onLoad","setSpineAni","getParamData","startCountDown","comp","node","getComponent","param","getParams","start","self","addSchedulerOnce","isValid","destroy","num","name","isLoop","spineAniSkeleton","setAnimation","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,U,OAAAA,U;;AACVC,MAAAA,iB,iBAAAA,iB;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA8BL,U;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;qCAKaM,mB,WAHZH,OAAO,CAAC,qBAAD,C,UAEPE,IAAI,CAAC,wBAAD,C,UAIHD,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,aAAX;AAA0BC,QAAAA,IAAI,EAAEV;AAAhC,OAAD,C,UAIRM,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE,aAAX;AAA0BC,QAAAA,IAAI,EAAET,EAAE,CAACU;AAAnC,OAAD,C,0CAVV,MAGaH,mBAHb;AAAA;AAAA,0CAGuD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAW9CI,UAX8C,GAWzB,EAXyB;AAAA;;AAYtDC,QAAAA,MAAM,GAAG;AACR,eAAKC,WAAL,CAAiB,CAAjB,EAAoB,aAApB,EAAmC,IAAnC;AACA,eAAKC,YAAL;AACA,eAAKC,cAAL;AACA;;AACD;AACAD,QAAAA,YAAY,GAAG;AACd,cAAIE,IAAI,GAAG,IAAX;AACAA,UAAAA,IAAI,GAAG,KAAKC,IAAL,CAAUC,YAAV;AAAA;AAAA,qDAAP;;AACA,cAAIF,IAAJ,EAAU;AACT,gBAAIG,KAAK,GAAGH,IAAI,CAACI,SAAL,EAAZ;;AACA,gBAAID,KAAK,IAAIA,KAAK,CAAC,MAAD,CAAL,IAAiB,IAA9B,EAAoC;AACnC,mBAAKR,UAAL,GAAkBQ,KAAK,CAAC,MAAD,CAAvB;AACA;AACD;AACD;;AACDE,QAAAA,KAAK,GAAG,CAEP;;AACD;AACAN,QAAAA,cAAc,GAAG;AAChB,cAAIO,IAAI,GAAG,IAAX;AACA,eAAKC,gBAAL,CAAsB,KAAKZ,UAA3B,EAAuC,MAAM;AAC5C,gBAAIW,IAAI,CAACL,IAAL,IAAaK,IAAI,CAACL,IAAL,CAAUO,OAAV,IAAqB,IAAtC,EAA4C;AAC3CF,cAAAA,IAAI,CAACL,IAAL,CAAUQ,OAAV;AACA;AACD,WAJD;AAKA,SAvCqD,CAwCtD;;;AACAZ,QAAAA,WAAW,CAACa,GAAD,EAAMC,IAAN,EAAYC,MAAZ,EAAoB;AAC9B,eAAKC,gBAAL,CAAsBC,YAAtB,CAAmCJ,GAAnC,EAAwCC,IAAxC,EAA8CC,MAA9C;AACA,SA3CqD,CA4CtD;;;AACAG,QAAAA,SAAS,GAAG,CACX;;AA9CqD,O;;;;;iBAIlB,I;;;;;;;iBAIW,I","sourcesContent":["\nimport { Node, sp, _decorator } from 'cc';\nimport { DelegateComponent } from '../layer/DelegateComponent';\nimport { BaseComponent } from './BaseComponent';\nconst { ccclass, property, menu } = _decorator;\n\n/**\n * Name = NetLoadingComponent\n * URL = db://assets/framework/vc/NetLoadingComponent.ts\n * Time = Tue Sep 06 2022 12:30:05 GMT+0800 (中国标准时间)\n * Author = Tomoe\n *\n * Life: onLoad-->onEnable->start->update->lateUpdate->onDisable->onDestroy\n */\n\n@ccclass('NetLoadingComponent')\n//方便编辑器识别的菜单项目\n@menu('vc/NetLoadingComponent')\nexport class NetLoadingComponent extends BaseComponent {\n\n\t//动画根节点\n\t@property({ tooltip: \"spine动画加载节点\", type: Node })\n\tprivate spineAniNode: Node | null = null;\n\n\t//加载动画资源组件根节点\n\t@property({ tooltip: \"spine动画加载节点\", type: sp.Skeleton })\n\tprivate spineAniSkeleton: sp.Skeleton | null = null;\n\n\t/** 超时自动关闭的时间 */\n\tprivate _countTime: number = 15;\n\tonLoad() {\n\t\tthis.setSpineAni(0, \"loading_big\", true);\n\t\tthis.getParamData();\n\t\tthis.startCountDown();\n\t};\n\t/** 获取传递参数 */\n\tgetParamData() {\n\t\tlet comp = null;\n\t\tcomp = this.node.getComponent(DelegateComponent)\n\t\tif (comp) {\n\t\t\tlet param = comp.getParams();\n\t\t\tif (param && param[\"time\"] != null) {\n\t\t\t\tthis._countTime = param[\"time\"];\n\t\t\t}\n\t\t}\n\t}\n\tstart() {\n\n\t};\n\t/** 开始倒计时 */\n\tstartCountDown() {\n\t\tlet self = this;\n\t\tthis.addSchedulerOnce(this._countTime, () => {\n\t\t\tif (self.node && self.node.isValid == true) {\n\t\t\t\tself.node.destroy();\n\t\t\t}\n\t\t})\n\t}\n\t//根据传入参数播放指定骨骼动画\n\tsetSpineAni(num, name, isLoop) {\n\t\tthis.spineAniSkeleton.setAnimation(num, name, isLoop)\n\t}\n\t//销毁\n\tonDestroy() {\n\t};\n\n}\n\n"]}